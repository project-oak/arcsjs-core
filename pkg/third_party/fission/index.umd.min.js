(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define([], factory);
    } else if (typeof module === 'object' && module.exports) {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like environments that support module.exports,
        // like Node.
        module.exports = factory();
    } else {
        // Browser globals (root is window)
        root.webnative = factory();
  }
}(typeof self !== 'undefined' ? self : this, function () {
var webnative=(()=>{var aC=Object.create;var gl=Object.defineProperty;var fC=Object.getOwnPropertyDescriptor;var uC=Object.getOwnPropertyNames;var cC=Object.getPrototypeOf,lC=Object.prototype.hasOwnProperty;var pa=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Ne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),dt=(e,t)=>{for(var r in t)gl(e,r,{get:t[r],enumerable:!0})},Lw=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of uC(t))!lC.call(e,o)&&o!==r&&gl(e,o,{get:()=>t[o],enumerable:!(n=fC(t,o))||n.enumerable});return e};var oo=(e,t,r)=>(r=e!=null?aC(cC(e)):{},Lw(t||!e||!e.__esModule?gl(r,"default",{value:e,enumerable:!0}):r,e)),hC=e=>Lw(gl({},"__esModule",{value:!0}),e);var wl=Ne((Nw,xd)=>{(function(e){if(typeof Nw=="object"&&typeof xd<"u")xd.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.localforage=e()}})(function(){var e,t,r;return function n(o,a,f){function u(v,P){if(!a[v]){if(!o[v]){var I=typeof pa=="function"&&pa;if(!P&&I)return I(v,!0);if(h)return h(v,!0);var R=new Error("Cannot find module '"+v+"'");throw R.code="MODULE_NOT_FOUND",R}var ee=a[v]={exports:{}};o[v][0].call(ee.exports,function(ce){var De=o[v][1][ce];return u(De||ce)},ee,ee.exports,n,o,a,f)}return a[v].exports}for(var h=typeof pa=="function"&&pa,d=0;d<f.length;d++)u(f[d]);return u}({1:[function(n,o,a){(function(f){"use strict";var u=f.MutationObserver||f.WebKitMutationObserver,h;if(u){var d=0,v=new u(ce),P=f.document.createTextNode("");v.observe(P,{characterData:!0}),h=function(){P.data=d=++d%2}}else if(!f.setImmediate&&typeof f.MessageChannel<"u"){var I=new f.MessageChannel;I.port1.onmessage=ce,h=function(){I.port2.postMessage(0)}}else"document"in f&&"onreadystatechange"in f.document.createElement("script")?h=function(){var ge=f.document.createElement("script");ge.onreadystatechange=function(){ce(),ge.onreadystatechange=null,ge.parentNode.removeChild(ge),ge=null},f.document.documentElement.appendChild(ge)}:h=function(){setTimeout(ce,0)};var R,ee=[];function ce(){R=!0;for(var ge,Oe,ae=ee.length;ae;){for(Oe=ee,ee=[],ge=-1;++ge<ae;)Oe[ge]();ae=ee.length}R=!1}o.exports=De;function De(ge){ee.push(ge)===1&&!R&&h()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,o,a){"use strict";var f=n(1);function u(){}var h={},d=["REJECTED"],v=["FULFILLED"],P=["PENDING"];o.exports=I;function I(ne){if(typeof ne!="function")throw new TypeError("resolver must be a function");this.state=P,this.queue=[],this.outcome=void 0,ne!==u&&De(this,ne)}I.prototype.catch=function(ne){return this.then(null,ne)},I.prototype.then=function(ne,we){if(typeof ne!="function"&&this.state===v||typeof we!="function"&&this.state===d)return this;var be=new this.constructor(u);if(this.state!==P){var je=this.state===v?ne:we;ee(be,je,this.outcome)}else this.queue.push(new R(be,ne,we));return be};function R(ne,we,be){this.promise=ne,typeof we=="function"&&(this.onFulfilled=we,this.callFulfilled=this.otherCallFulfilled),typeof be=="function"&&(this.onRejected=be,this.callRejected=this.otherCallRejected)}R.prototype.callFulfilled=function(ne){h.resolve(this.promise,ne)},R.prototype.otherCallFulfilled=function(ne){ee(this.promise,this.onFulfilled,ne)},R.prototype.callRejected=function(ne){h.reject(this.promise,ne)},R.prototype.otherCallRejected=function(ne){ee(this.promise,this.onRejected,ne)};function ee(ne,we,be){f(function(){var je;try{je=we(be)}catch(gt){return h.reject(ne,gt)}je===ne?h.reject(ne,new TypeError("Cannot resolve promise with itself")):h.resolve(ne,je)})}h.resolve=function(ne,we){var be=ge(ce,we);if(be.status==="error")return h.reject(ne,be.value);var je=be.value;if(je)De(ne,je);else{ne.state=v,ne.outcome=we;for(var gt=-1,Tt=ne.queue.length;++gt<Tt;)ne.queue[gt].callFulfilled(we)}return ne},h.reject=function(ne,we){ne.state=d,ne.outcome=we;for(var be=-1,je=ne.queue.length;++be<je;)ne.queue[be].callRejected(we);return ne};function ce(ne){var we=ne&&ne.then;if(ne&&(typeof ne=="object"||typeof ne=="function")&&typeof we=="function")return function(){we.apply(ne,arguments)}}function De(ne,we){var be=!1;function je(Bt){be||(be=!0,h.reject(ne,Bt))}function gt(Bt){be||(be=!0,h.resolve(ne,Bt))}function Tt(){we(gt,je)}var At=ge(Tt);At.status==="error"&&je(At.value)}function ge(ne,we){var be={};try{be.value=ne(we),be.status="success"}catch(je){be.status="error",be.value=je}return be}I.resolve=Oe;function Oe(ne){return ne instanceof this?ne:h.resolve(new this(u),ne)}I.reject=ae;function ae(ne){var we=new this(u);return h.reject(we,ne)}I.all=Ue;function Ue(ne){var we=this;if(Object.prototype.toString.call(ne)!=="[object Array]")return this.reject(new TypeError("must be an array"));var be=ne.length,je=!1;if(!be)return this.resolve([]);for(var gt=new Array(be),Tt=0,At=-1,Bt=new this(u);++At<be;)Gt(ne[At],At);return Bt;function Gt(kt,wr){we.resolve(kt).then(Qr,function(hr){je||(je=!0,h.reject(Bt,hr))});function Qr(hr){gt[wr]=hr,++Tt===be&&!je&&(je=!0,h.resolve(Bt,gt))}}}I.race=He;function He(ne){var we=this;if(Object.prototype.toString.call(ne)!=="[object Array]")return this.reject(new TypeError("must be an array"));var be=ne.length,je=!1;if(!be)return this.resolve([]);for(var gt=-1,Tt=new this(u);++gt<be;)At(ne[gt]);return Tt;function At(Bt){we.resolve(Bt).then(function(Gt){je||(je=!0,h.resolve(Tt,Gt))},function(Gt){je||(je=!0,h.reject(Tt,Gt))})}}},{"1":1}],3:[function(n,o,a){(function(f){"use strict";typeof f.Promise!="function"&&(f.Promise=n(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"2":2}],4:[function(n,o,a){"use strict";var f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g};function u(g,C){if(!(g instanceof C))throw new TypeError("Cannot call a class as a function")}function h(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var d=h();function v(){try{if(!d||!d.open)return!1;var g=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),C=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!g||C)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function P(g,C){g=g||[],C=C||{};try{return new Blob(g,C)}catch(y){if(y.name!=="TypeError")throw y;for(var A=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,T=new A,F=0;F<g.length;F+=1)T.append(g[F]);return T.getBlob(C.type)}}typeof Promise>"u"&&n(3);var I=Promise;function R(g,C){C&&g.then(function(A){C(null,A)},function(A){C(A)})}function ee(g,C,A){typeof C=="function"&&g.then(C),typeof A=="function"&&g.catch(A)}function ce(g){return typeof g!="string"&&(console.warn(g+" used as a key, but it is not a string."),g=String(g)),g}function De(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var ge="local-forage-detect-blob-support",Oe=void 0,ae={},Ue=Object.prototype.toString,He="readonly",ne="readwrite";function we(g){for(var C=g.length,A=new ArrayBuffer(C),T=new Uint8Array(A),F=0;F<C;F++)T[F]=g.charCodeAt(F);return A}function be(g){return new I(function(C){var A=g.transaction(ge,ne),T=P([""]);A.objectStore(ge).put(T,"key"),A.onabort=function(F){F.preventDefault(),F.stopPropagation(),C(!1)},A.oncomplete=function(){var F=navigator.userAgent.match(/Chrome\/(\d+)/),y=navigator.userAgent.match(/Edge\//);C(y||!F||parseInt(F[1],10)>=43)}}).catch(function(){return!1})}function je(g){return typeof Oe=="boolean"?I.resolve(Oe):be(g).then(function(C){return Oe=C,Oe})}function gt(g){var C=ae[g.name],A={};A.promise=new I(function(T,F){A.resolve=T,A.reject=F}),C.deferredOperations.push(A),C.dbReady?C.dbReady=C.dbReady.then(function(){return A.promise}):C.dbReady=A.promise}function Tt(g){var C=ae[g.name],A=C.deferredOperations.pop();if(A)return A.resolve(),A.promise}function At(g,C){var A=ae[g.name],T=A.deferredOperations.pop();if(T)return T.reject(C),T.promise}function Bt(g,C){return new I(function(A,T){if(ae[g.name]=ae[g.name]||er(),g.db)if(C)gt(g),g.db.close();else return A(g.db);var F=[g.name];C&&F.push(g.version);var y=d.open.apply(d,F);C&&(y.onupgradeneeded=function(U){var $=y.result;try{$.createObjectStore(g.storeName),U.oldVersion<=1&&$.createObjectStore(ge)}catch(W){if(W.name==="ConstraintError")console.warn('The database "'+g.name+'" has been upgraded from version '+U.oldVersion+" to version "+U.newVersion+', but the storage "'+g.storeName+'" already exists.');else throw W}}),y.onerror=function(U){U.preventDefault(),T(y.error)},y.onsuccess=function(){var U=y.result;U.onversionchange=function($){$.target.close()},A(U),Tt(g)}})}function Gt(g){return Bt(g,!1)}function kt(g){return Bt(g,!0)}function wr(g,C){if(!g.db)return!0;var A=!g.db.objectStoreNames.contains(g.storeName),T=g.version<g.db.version,F=g.version>g.db.version;if(T&&(g.version!==C&&console.warn('The database "'+g.name+`" can't be downgraded from version `+g.db.version+" to version "+g.version+"."),g.version=g.db.version),F||A){if(A){var y=g.db.version+1;y>g.version&&(g.version=y)}return!0}return!1}function Qr(g){return new I(function(C,A){var T=new FileReader;T.onerror=A,T.onloadend=function(F){var y=btoa(F.target.result||"");C({__local_forage_encoded_blob:!0,data:y,type:g.type})},T.readAsBinaryString(g)})}function hr(g){var C=we(atob(g.data));return P([C],{type:g.type})}function Ar(g){return g&&g.__local_forage_encoded_blob}function So(g){var C=this,A=C._initReady().then(function(){var T=ae[C._dbInfo.name];if(T&&T.dbReady)return T.dbReady});return ee(A,g,g),A}function Ot(g){gt(g);for(var C=ae[g.name],A=C.forages,T=0;T<A.length;T++){var F=A[T];F._dbInfo.db&&(F._dbInfo.db.close(),F._dbInfo.db=null)}return g.db=null,Gt(g).then(function(y){return g.db=y,wr(g)?kt(g):y}).then(function(y){g.db=C.db=y;for(var U=0;U<A.length;U++)A[U]._dbInfo.db=y}).catch(function(y){throw At(g,y),y})}function Dt(g,C,A,T){T===void 0&&(T=1);try{var F=g.db.transaction(g.storeName,C);A(null,F)}catch(y){if(T>0&&(!g.db||y.name==="InvalidStateError"||y.name==="NotFoundError"))return I.resolve().then(function(){if(!g.db||y.name==="NotFoundError"&&!g.db.objectStoreNames.contains(g.storeName)&&g.version<=g.db.version)return g.db&&(g.version=g.db.version+1),kt(g)}).then(function(){return Ot(g).then(function(){Dt(g,C,A,T-1)})}).catch(A);A(y)}}function er(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Re(g){var C=this,A={db:null};if(g)for(var T in g)A[T]=g[T];var F=ae[A.name];F||(F=er(),ae[A.name]=F),F.forages.push(C),C._initReady||(C._initReady=C.ready,C.ready=So);var y=[];function U(){return I.resolve()}for(var $=0;$<F.forages.length;$++){var W=F.forages[$];W!==C&&y.push(W._initReady().catch(U))}var j=F.forages.slice(0);return I.all(y).then(function(){return A.db=F.db,Gt(A)}).then(function(J){return A.db=J,wr(A,C._defaultConfig.version)?kt(A):J}).then(function(J){A.db=F.db=J,C._dbInfo=A;for(var fe=0;fe<j.length;fe++){var Te=j[fe];Te!==C&&(Te._dbInfo.db=A.db,Te._dbInfo.version=A.version)}})}function Ir(g,C){var A=this;g=ce(g);var T=new I(function(F,y){A.ready().then(function(){Dt(A._dbInfo,He,function(U,$){if(U)return y(U);try{var W=$.objectStore(A._dbInfo.storeName),j=W.get(g);j.onsuccess=function(){var J=j.result;J===void 0&&(J=null),Ar(J)&&(J=hr(J)),F(J)},j.onerror=function(){y(j.error)}}catch(J){y(J)}})}).catch(y)});return R(T,C),T}function Qn(g,C){var A=this,T=new I(function(F,y){A.ready().then(function(){Dt(A._dbInfo,He,function(U,$){if(U)return y(U);try{var W=$.objectStore(A._dbInfo.storeName),j=W.openCursor(),J=1;j.onsuccess=function(){var fe=j.result;if(fe){var Te=fe.value;Ar(Te)&&(Te=hr(Te));var Pe=g(Te,fe.key,J++);Pe!==void 0?F(Pe):fe.continue()}else F()},j.onerror=function(){y(j.error)}}catch(fe){y(fe)}})}).catch(y)});return R(T,C),T}function ei(g,C,A){var T=this;g=ce(g);var F=new I(function(y,U){var $;T.ready().then(function(){return $=T._dbInfo,Ue.call(C)==="[object Blob]"?je($.db).then(function(W){return W?C:Qr(C)}):C}).then(function(W){Dt(T._dbInfo,ne,function(j,J){if(j)return U(j);try{var fe=J.objectStore(T._dbInfo.storeName);W===null&&(W=void 0);var Te=fe.put(W,g);J.oncomplete=function(){W===void 0&&(W=null),y(W)},J.onabort=J.onerror=function(){var Pe=Te.error?Te.error:Te.transaction.error;U(Pe)}}catch(Pe){U(Pe)}})}).catch(U)});return R(F,A),F}function to(g,C){var A=this;g=ce(g);var T=new I(function(F,y){A.ready().then(function(){Dt(A._dbInfo,ne,function(U,$){if(U)return y(U);try{var W=$.objectStore(A._dbInfo.storeName),j=W.delete(g);$.oncomplete=function(){F()},$.onerror=function(){y(j.error)},$.onabort=function(){var J=j.error?j.error:j.transaction.error;y(J)}}catch(J){y(J)}})}).catch(y)});return R(T,C),T}function pr(g){var C=this,A=new I(function(T,F){C.ready().then(function(){Dt(C._dbInfo,ne,function(y,U){if(y)return F(y);try{var $=U.objectStore(C._dbInfo.storeName),W=$.clear();U.oncomplete=function(){T()},U.onabort=U.onerror=function(){var j=W.error?W.error:W.transaction.error;F(j)}}catch(j){F(j)}})}).catch(F)});return R(A,g),A}function ti(g){var C=this,A=new I(function(T,F){C.ready().then(function(){Dt(C._dbInfo,He,function(y,U){if(y)return F(y);try{var $=U.objectStore(C._dbInfo.storeName),W=$.count();W.onsuccess=function(){T(W.result)},W.onerror=function(){F(W.error)}}catch(j){F(j)}})}).catch(F)});return R(A,g),A}function Gr(g,C){var A=this,T=new I(function(F,y){if(g<0){F(null);return}A.ready().then(function(){Dt(A._dbInfo,He,function(U,$){if(U)return y(U);try{var W=$.objectStore(A._dbInfo.storeName),j=!1,J=W.openKeyCursor();J.onsuccess=function(){var fe=J.result;if(!fe){F(null);return}g===0||j?F(fe.key):(j=!0,fe.advance(g))},J.onerror=function(){y(J.error)}}catch(fe){y(fe)}})}).catch(y)});return R(T,C),T}function Er(g){var C=this,A=new I(function(T,F){C.ready().then(function(){Dt(C._dbInfo,He,function(y,U){if(y)return F(y);try{var $=U.objectStore(C._dbInfo.storeName),W=$.openKeyCursor(),j=[];W.onsuccess=function(){var J=W.result;if(!J){T(j);return}j.push(J.key),J.continue()},W.onerror=function(){F(W.error)}}catch(J){F(J)}})}).catch(F)});return R(A,g),A}function Ti(g,C){C=De.apply(this,arguments);var A=this.config();g=typeof g!="function"&&g||{},g.name||(g.name=g.name||A.name,g.storeName=g.storeName||A.storeName);var T=this,F;if(!g.name)F=I.reject("Invalid arguments");else{var y=g.name===A.name&&T._dbInfo.db,U=y?I.resolve(T._dbInfo.db):Gt(g).then(function($){var W=ae[g.name],j=W.forages;W.db=$;for(var J=0;J<j.length;J++)j[J]._dbInfo.db=$;return $});g.storeName?F=U.then(function($){if(!!$.objectStoreNames.contains(g.storeName)){var W=$.version+1;gt(g);var j=ae[g.name],J=j.forages;$.close();for(var fe=0;fe<J.length;fe++){var Te=J[fe];Te._dbInfo.db=null,Te._dbInfo.version=W}var Pe=new I(function($e,at){var ft=d.open(g.name,W);ft.onerror=function(Et){var jt=ft.result;jt.close(),at(Et)},ft.onupgradeneeded=function(){var Et=ft.result;Et.deleteObjectStore(g.storeName)},ft.onsuccess=function(){var Et=ft.result;Et.close(),$e(Et)}});return Pe.then(function($e){j.db=$e;for(var at=0;at<J.length;at++){var ft=J[at];ft._dbInfo.db=$e,Tt(ft._dbInfo)}}).catch(function($e){throw(At(g,$e)||I.resolve()).catch(function(){}),$e})}}):F=U.then(function($){gt(g);var W=ae[g.name],j=W.forages;$.close();for(var J=0;J<j.length;J++){var fe=j[J];fe._dbInfo.db=null}var Te=new I(function(Pe,$e){var at=d.deleteDatabase(g.name);at.onerror=function(){var ft=at.result;ft&&ft.close(),$e(at.error)},at.onblocked=function(){console.warn('dropInstance blocked for database "'+g.name+'" until all open connections are closed')},at.onsuccess=function(){var ft=at.result;ft&&ft.close(),Pe(ft)}});return Te.then(function(Pe){W.db=Pe;for(var $e=0;$e<j.length;$e++){var at=j[$e];Tt(at._dbInfo)}}).catch(function(Pe){throw(At(g,Pe)||I.resolve()).catch(function(){}),Pe})})}return R(F,C),F}var ls={_driver:"asyncStorage",_initStorage:Re,_support:v(),iterate:Qn,getItem:Ir,setItem:ei,removeItem:to,clear:pr,length:ti,key:Gr,keys:Er,dropInstance:Ti};function en(){return typeof openDatabase=="function"}var Vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hs="~~local_forage_type~",Tr=/^~~local_forage_type~([^~]+)~/,$t="__lfsc__:",mn=$t.length,yn="arbf",Fi="blob",Rr="si08",O="ui08",q="uic8",oe="si16",le="si32",Ie="ur16",Kt="ui32",We="fl32",et="fl64",Le=mn+yn.length,ut=Object.prototype.toString;function st(g){var C=g.length*.75,A=g.length,T,F=0,y,U,$,W;g[g.length-1]==="="&&(C--,g[g.length-2]==="="&&C--);var j=new ArrayBuffer(C),J=new Uint8Array(j);for(T=0;T<A;T+=4)y=Vr.indexOf(g[T]),U=Vr.indexOf(g[T+1]),$=Vr.indexOf(g[T+2]),W=Vr.indexOf(g[T+3]),J[F++]=y<<2|U>>4,J[F++]=(U&15)<<4|$>>2,J[F++]=($&3)<<6|W&63;return j}function nr(g){var C=new Uint8Array(g),A="",T;for(T=0;T<C.length;T+=3)A+=Vr[C[T]>>2],A+=Vr[(C[T]&3)<<4|C[T+1]>>4],A+=Vr[(C[T+1]&15)<<2|C[T+2]>>6],A+=Vr[C[T+2]&63];return C.length%3===2?A=A.substring(0,A.length-1)+"=":C.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function Bi(g,C){var A="";if(g&&(A=ut.call(g)),g&&(A==="[object ArrayBuffer]"||g.buffer&&ut.call(g.buffer)==="[object ArrayBuffer]")){var T,F=$t;g instanceof ArrayBuffer?(T=g,F+=yn):(T=g.buffer,A==="[object Int8Array]"?F+=Rr:A==="[object Uint8Array]"?F+=O:A==="[object Uint8ClampedArray]"?F+=q:A==="[object Int16Array]"?F+=oe:A==="[object Uint16Array]"?F+=Ie:A==="[object Int32Array]"?F+=le:A==="[object Uint32Array]"?F+=Kt:A==="[object Float32Array]"?F+=We:A==="[object Float64Array]"?F+=et:C(new Error("Failed to get type for BinaryArray"))),C(F+nr(T))}else if(A==="[object Blob]"){var y=new FileReader;y.onload=function(){var U=hs+g.type+"~"+nr(this.result);C($t+Fi+U)},y.readAsArrayBuffer(g)}else try{C(JSON.stringify(g))}catch(U){console.error("Couldn't convert value into a JSON string: ",g),C(null,U)}}function Po(g){if(g.substring(0,mn)!==$t)return JSON.parse(g);var C=g.substring(Le),A=g.substring(mn,Le),T;if(A===Fi&&Tr.test(C)){var F=C.match(Tr);T=F[1],C=C.substring(F[0].length)}var y=st(C);switch(A){case yn:return y;case Fi:return P([y],{type:T});case Rr:return new Int8Array(y);case O:return new Uint8Array(y);case q:return new Uint8ClampedArray(y);case oe:return new Int16Array(y);case Ie:return new Uint16Array(y);case le:return new Int32Array(y);case Kt:return new Uint32Array(y);case We:return new Float32Array(y);case et:return new Float64Array(y);default:throw new Error("Unkown type: "+A)}}var Di={serialize:Bi,deserialize:Po,stringToBuffer:st,bufferToString:nr};function Co(g,C,A,T){g.executeSql("CREATE TABLE IF NOT EXISTS "+C.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],A,T)}function ea(g){var C=this,A={db:null};if(g)for(var T in g)A[T]=typeof g[T]!="string"?g[T].toString():g[T];var F=new I(function(y,U){try{A.db=openDatabase(A.name,String(A.version),A.description,A.size)}catch($){return U($)}A.db.transaction(function($){Co($,A,function(){C._dbInfo=A,y()},function(W,j){U(j)})},U)});return A.serializer=Di,F}function ri(g,C,A,T,F,y){g.executeSql(A,T,F,function(U,$){$.code===$.SYNTAX_ERR?U.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[C.storeName],function(W,j){j.rows.length?y(W,$):Co(W,C,function(){W.executeSql(A,T,F,y)},y)},y):y(U,$)},y)}function hu(g,C){var A=this;g=ce(g);var T=new I(function(F,y){A.ready().then(function(){var U=A._dbInfo;U.db.transaction(function($){ri($,U,"SELECT * FROM "+U.storeName+" WHERE key = ? LIMIT 1",[g],function(W,j){var J=j.rows.length?j.rows.item(0).value:null;J&&(J=U.serializer.deserialize(J)),F(J)},function(W,j){y(j)})})}).catch(y)});return R(T,C),T}function Tn(g,C){var A=this,T=new I(function(F,y){A.ready().then(function(){var U=A._dbInfo;U.db.transaction(function($){ri($,U,"SELECT * FROM "+U.storeName,[],function(W,j){for(var J=j.rows,fe=J.length,Te=0;Te<fe;Te++){var Pe=J.item(Te),$e=Pe.value;if($e&&($e=U.serializer.deserialize($e)),$e=g($e,Pe.key,Te+1),$e!==void 0){F($e);return}}F()},function(W,j){y(j)})})}).catch(y)});return R(T,C),T}function ni(g,C,A,T){var F=this;g=ce(g);var y=new I(function(U,$){F.ready().then(function(){C===void 0&&(C=null);var W=C,j=F._dbInfo;j.serializer.serialize(C,function(J,fe){fe?$(fe):j.db.transaction(function(Te){ri(Te,j,"INSERT OR REPLACE INTO "+j.storeName+" (key, value) VALUES (?, ?)",[g,J],function(){U(W)},function(Pe,$e){$($e)})},function(Te){if(Te.code===Te.QUOTA_ERR){if(T>0){U(ni.apply(F,[g,W,A,T-1]));return}$(Te)}})})}).catch($)});return R(y,A),y}function Li(g,C,A){return ni.apply(this,[g,C,A,1])}function ta(g,C){var A=this;g=ce(g);var T=new I(function(F,y){A.ready().then(function(){var U=A._dbInfo;U.db.transaction(function($){ri($,U,"DELETE FROM "+U.storeName+" WHERE key = ?",[g],function(){F()},function(W,j){y(j)})})}).catch(y)});return R(T,C),T}function ra(g){var C=this,A=new I(function(T,F){C.ready().then(function(){var y=C._dbInfo;y.db.transaction(function(U){ri(U,y,"DELETE FROM "+y.storeName,[],function(){T()},function($,W){F(W)})})}).catch(F)});return R(A,g),A}function Ja(g){var C=this,A=new I(function(T,F){C.ready().then(function(){var y=C._dbInfo;y.db.transaction(function(U){ri(U,y,"SELECT COUNT(key) as c FROM "+y.storeName,[],function($,W){var j=W.rows.item(0).c;T(j)},function($,W){F(W)})})}).catch(F)});return R(A,g),A}function na(g,C){var A=this,T=new I(function(F,y){A.ready().then(function(){var U=A._dbInfo;U.db.transaction(function($){ri($,U,"SELECT key FROM "+U.storeName+" WHERE id = ? LIMIT 1",[g+1],function(W,j){var J=j.rows.length?j.rows.item(0).key:null;F(J)},function(W,j){y(j)})})}).catch(y)});return R(T,C),T}function Ur(g){var C=this,A=new I(function(T,F){C.ready().then(function(){var y=C._dbInfo;y.db.transaction(function(U){ri(U,y,"SELECT key FROM "+y.storeName,[],function($,W){for(var j=[],J=0;J<W.rows.length;J++)j.push(W.rows.item(J).key);T(j)},function($,W){F(W)})})}).catch(F)});return R(A,g),A}function ps(g){return new I(function(C,A){g.transaction(function(T){T.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(F,y){for(var U=[],$=0;$<y.rows.length;$++)U.push(y.rows.item($).name);C({db:g,storeNames:U})},function(F,y){A(y)})},function(T){A(T)})})}function m(g,C){C=De.apply(this,arguments);var A=this.config();g=typeof g!="function"&&g||{},g.name||(g.name=g.name||A.name,g.storeName=g.storeName||A.storeName);var T=this,F;return g.name?F=new I(function(y){var U;g.name===A.name?U=T._dbInfo.db:U=openDatabase(g.name,"","",0),g.storeName?y({db:U,storeNames:[g.storeName]}):y(ps(U))}).then(function(y){return new I(function(U,$){y.db.transaction(function(W){function j(Pe){return new I(function($e,at){W.executeSql("DROP TABLE IF EXISTS "+Pe,[],function(){$e()},function(ft,Et){at(Et)})})}for(var J=[],fe=0,Te=y.storeNames.length;fe<Te;fe++)J.push(j(y.storeNames[fe]));I.all(J).then(function(){U()}).catch(function(Pe){$(Pe)})},function(W){$(W)})})}):F=I.reject("Invalid arguments"),R(F,C),F}var _={_driver:"webSQLStorage",_initStorage:ea,_support:en(),iterate:Tn,getItem:hu,setItem:Li,removeItem:ta,clear:ra,length:Ja,key:na,keys:Ur,dropInstance:m};function x(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function l(g,C){var A=g.name+"/";return g.storeName!==C.storeName&&(A+=g.storeName+"/"),A}function S(){var g="_localforage_support_test";try{return localStorage.setItem(g,!0),localStorage.removeItem(g),!1}catch{return!0}}function L(){return!S()||localStorage.length>0}function M(g){var C=this,A={};if(g)for(var T in g)A[T]=g[T];return A.keyPrefix=l(g,C._defaultConfig),L()?(C._dbInfo=A,A.serializer=Di,I.resolve()):I.reject()}function Q(g){var C=this,A=C.ready().then(function(){for(var T=C._dbInfo.keyPrefix,F=localStorage.length-1;F>=0;F--){var y=localStorage.key(F);y.indexOf(T)===0&&localStorage.removeItem(y)}});return R(A,g),A}function ue(g,C){var A=this;g=ce(g);var T=A.ready().then(function(){var F=A._dbInfo,y=localStorage.getItem(F.keyPrefix+g);return y&&(y=F.serializer.deserialize(y)),y});return R(T,C),T}function ke(g,C){var A=this,T=A.ready().then(function(){for(var F=A._dbInfo,y=F.keyPrefix,U=y.length,$=localStorage.length,W=1,j=0;j<$;j++){var J=localStorage.key(j);if(J.indexOf(y)===0){var fe=localStorage.getItem(J);if(fe&&(fe=F.serializer.deserialize(fe)),fe=g(fe,J.substring(U),W++),fe!==void 0)return fe}}});return R(T,C),T}function me(g,C){var A=this,T=A.ready().then(function(){var F=A._dbInfo,y;try{y=localStorage.key(g)}catch{y=null}return y&&(y=y.substring(F.keyPrefix.length)),y});return R(T,C),T}function vt(g){var C=this,A=C.ready().then(function(){for(var T=C._dbInfo,F=localStorage.length,y=[],U=0;U<F;U++){var $=localStorage.key(U);$.indexOf(T.keyPrefix)===0&&y.push($.substring(T.keyPrefix.length))}return y});return R(A,g),A}function _e(g){var C=this,A=C.keys().then(function(T){return T.length});return R(A,g),A}function Ge(g,C){var A=this;g=ce(g);var T=A.ready().then(function(){var F=A._dbInfo;localStorage.removeItem(F.keyPrefix+g)});return R(T,C),T}function Je(g,C,A){var T=this;g=ce(g);var F=T.ready().then(function(){C===void 0&&(C=null);var y=C;return new I(function(U,$){var W=T._dbInfo;W.serializer.serialize(C,function(j,J){if(J)$(J);else try{localStorage.setItem(W.keyPrefix+g,j),U(y)}catch(fe){(fe.name==="QuotaExceededError"||fe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&$(fe),$(fe)}})})});return R(F,A),F}function tt(g,C){if(C=De.apply(this,arguments),g=typeof g!="function"&&g||{},!g.name){var A=this.config();g.name=g.name||A.name,g.storeName=g.storeName||A.storeName}var T=this,F;return g.name?F=new I(function(y){g.storeName?y(l(g,T._defaultConfig)):y(g.name+"/")}).then(function(y){for(var U=localStorage.length-1;U>=0;U--){var $=localStorage.key(U);$.indexOf(y)===0&&localStorage.removeItem($)}}):F=I.reject("Invalid arguments"),R(F,C),F}var it={_driver:"localStorageWrapper",_initStorage:M,_support:x(),iterate:ke,getItem:ue,setItem:Je,removeItem:Ge,clear:Q,length:_e,key:me,keys:vt,dropInstance:tt},qe=function(C,A){return C===A||typeof C=="number"&&typeof A=="number"&&isNaN(C)&&isNaN(A)},rt=function(C,A){for(var T=C.length,F=0;F<T;){if(qe(C[F],A))return!0;F++}return!1},Ve=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"},ve={},Be={},he={INDEXEDDB:ls,WEBSQL:_,LOCALSTORAGE:it},Ee=[he.INDEXEDDB._driver,he.WEBSQL._driver,he.LOCALSTORAGE._driver],Se=["dropInstance"],pe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Se),z={description:"",driver:Ee.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function K(g,C){g[C]=function(){var A=arguments;return g.ready().then(function(){return g[C].apply(g,A)})}}function ie(){for(var g=1;g<arguments.length;g++){var C=arguments[g];if(C)for(var A in C)C.hasOwnProperty(A)&&(Ve(C[A])?arguments[0][A]=C[A].slice():arguments[0][A]=C[A])}return arguments[0]}var X=function(){function g(C){u(this,g);for(var A in he)if(he.hasOwnProperty(A)){var T=he[A],F=T._driver;this[A]=F,ve[F]||this.defineDriver(T)}this._defaultConfig=ie({},z),this._config=ie({},this._defaultConfig,C),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return g.prototype.config=function(A){if((typeof A>"u"?"undefined":f(A))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var T in A){if(T==="storeName"&&(A[T]=A[T].replace(/\W/g,"_")),T==="version"&&typeof A[T]!="number")return new Error("Database version must be a number.");this._config[T]=A[T]}return"driver"in A&&A.driver?this.setDriver(this._config.driver):!0}else return typeof A=="string"?this._config[A]:this._config},g.prototype.defineDriver=function(A,T,F){var y=new I(function(U,$){try{var W=A._driver,j=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!A._driver){$(j);return}for(var J=pe.concat("_initStorage"),fe=0,Te=J.length;fe<Te;fe++){var Pe=J[fe],$e=!rt(Se,Pe);if(($e||A[Pe])&&typeof A[Pe]!="function"){$(j);return}}var at=function(){for(var jt=function(pp){return function(){var Tc=new Error("Method "+pp+" is not implemented by the current driver"),Fc=I.reject(Tc);return R(Fc,arguments[arguments.length-1]),Fc}},tr=0,dr=Se.length;tr<dr;tr++){var pu=Se[tr];A[pu]||(A[pu]=jt(pu))}};at();var ft=function(jt){ve[W]&&console.info("Redefining LocalForage driver: "+W),ve[W]=A,Be[W]=jt,U()};"_support"in A?A._support&&typeof A._support=="function"?A._support().then(ft,$):ft(!!A._support):ft(!0)}catch(Et){$(Et)}});return ee(y,T,F),y},g.prototype.driver=function(){return this._driver||null},g.prototype.getDriver=function(A,T,F){var y=ve[A]?I.resolve(ve[A]):I.reject(new Error("Driver not found."));return ee(y,T,F),y},g.prototype.getSerializer=function(A){var T=I.resolve(Di);return ee(T,A),T},g.prototype.ready=function(A){var T=this,F=T._driverSet.then(function(){return T._ready===null&&(T._ready=T._initDriver()),T._ready});return ee(F,A,A),F},g.prototype.setDriver=function(A,T,F){var y=this;Ve(A)||(A=[A]);var U=this._getSupportedDrivers(A);function $(){y._config.driver=y.driver()}function W(fe){return y._extend(fe),$(),y._ready=y._initStorage(y._config),y._ready}function j(fe){return function(){var Te=0;function Pe(){for(;Te<fe.length;){var $e=fe[Te];return Te++,y._dbInfo=null,y._ready=null,y.getDriver($e).then(W).catch(Pe)}$();var at=new Error("No available storage method found.");return y._driverSet=I.reject(at),y._driverSet}return Pe()}}var J=this._driverSet!==null?this._driverSet.catch(function(){return I.resolve()}):I.resolve();return this._driverSet=J.then(function(){var fe=U[0];return y._dbInfo=null,y._ready=null,y.getDriver(fe).then(function(Te){y._driver=Te._driver,$(),y._wrapLibraryMethodsWithReady(),y._initDriver=j(U)})}).catch(function(){$();var fe=new Error("No available storage method found.");return y._driverSet=I.reject(fe),y._driverSet}),ee(this._driverSet,T,F),this._driverSet},g.prototype.supports=function(A){return!!Be[A]},g.prototype._extend=function(A){ie(this,A)},g.prototype._getSupportedDrivers=function(A){for(var T=[],F=0,y=A.length;F<y;F++){var U=A[F];this.supports(U)&&T.push(U)}return T},g.prototype._wrapLibraryMethodsWithReady=function(){for(var A=0,T=pe.length;A<T;A++)K(this,pe[A])},g.prototype.createInstance=function(A){return new g(A)},g}(),Z=new X;o.exports=Z},{"3":3}]},{},[4])(4)})});var im=Ne(()=>{});var b1=Ne((RL,Ul)=>{(function(e){"use strict";var t=function(m){var _,x=new Float64Array(16);if(m)for(_=0;_<m.length;_++)x[_]=m[_];return x},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var a=t(),f=t([1]),u=t([56129,1]),h=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),P=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),I=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function R(m,_,x,l){m[_]=x>>24&255,m[_+1]=x>>16&255,m[_+2]=x>>8&255,m[_+3]=x&255,m[_+4]=l>>24&255,m[_+5]=l>>16&255,m[_+6]=l>>8&255,m[_+7]=l&255}function ee(m,_,x,l,S){var L,M=0;for(L=0;L<S;L++)M|=m[_+L]^x[l+L];return(1&M-1>>>8)-1}function ce(m,_,x,l){return ee(m,_,x,l,16)}function De(m,_,x,l){return ee(m,_,x,l,32)}function ge(m,_,x,l){for(var S=l[0]&255|(l[1]&255)<<8|(l[2]&255)<<16|(l[3]&255)<<24,L=x[0]&255|(x[1]&255)<<8|(x[2]&255)<<16|(x[3]&255)<<24,M=x[4]&255|(x[5]&255)<<8|(x[6]&255)<<16|(x[7]&255)<<24,Q=x[8]&255|(x[9]&255)<<8|(x[10]&255)<<16|(x[11]&255)<<24,ue=x[12]&255|(x[13]&255)<<8|(x[14]&255)<<16|(x[15]&255)<<24,ke=l[4]&255|(l[5]&255)<<8|(l[6]&255)<<16|(l[7]&255)<<24,me=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,vt=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,_e=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,Ge=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Je=l[8]&255|(l[9]&255)<<8|(l[10]&255)<<16|(l[11]&255)<<24,tt=x[16]&255|(x[17]&255)<<8|(x[18]&255)<<16|(x[19]&255)<<24,it=x[20]&255|(x[21]&255)<<8|(x[22]&255)<<16|(x[23]&255)<<24,qe=x[24]&255|(x[25]&255)<<8|(x[26]&255)<<16|(x[27]&255)<<24,rt=x[28]&255|(x[29]&255)<<8|(x[30]&255)<<16|(x[31]&255)<<24,Ve=l[12]&255|(l[13]&255)<<8|(l[14]&255)<<16|(l[15]&255)<<24,ve=S,Be=L,he=M,Ee=Q,Se=ue,pe=ke,z=me,K=vt,ie=_e,X=Ge,Z=Je,g=tt,C=it,A=qe,T=rt,F=Ve,y,U=0;U<20;U+=2)y=ve+C|0,Se^=y<<7|y>>>32-7,y=Se+ve|0,ie^=y<<9|y>>>32-9,y=ie+Se|0,C^=y<<13|y>>>32-13,y=C+ie|0,ve^=y<<18|y>>>32-18,y=pe+Be|0,X^=y<<7|y>>>32-7,y=X+pe|0,A^=y<<9|y>>>32-9,y=A+X|0,Be^=y<<13|y>>>32-13,y=Be+A|0,pe^=y<<18|y>>>32-18,y=Z+z|0,T^=y<<7|y>>>32-7,y=T+Z|0,he^=y<<9|y>>>32-9,y=he+T|0,z^=y<<13|y>>>32-13,y=z+he|0,Z^=y<<18|y>>>32-18,y=F+g|0,Ee^=y<<7|y>>>32-7,y=Ee+F|0,K^=y<<9|y>>>32-9,y=K+Ee|0,g^=y<<13|y>>>32-13,y=g+K|0,F^=y<<18|y>>>32-18,y=ve+Ee|0,Be^=y<<7|y>>>32-7,y=Be+ve|0,he^=y<<9|y>>>32-9,y=he+Be|0,Ee^=y<<13|y>>>32-13,y=Ee+he|0,ve^=y<<18|y>>>32-18,y=pe+Se|0,z^=y<<7|y>>>32-7,y=z+pe|0,K^=y<<9|y>>>32-9,y=K+z|0,Se^=y<<13|y>>>32-13,y=Se+K|0,pe^=y<<18|y>>>32-18,y=Z+X|0,g^=y<<7|y>>>32-7,y=g+Z|0,ie^=y<<9|y>>>32-9,y=ie+g|0,X^=y<<13|y>>>32-13,y=X+ie|0,Z^=y<<18|y>>>32-18,y=F+T|0,C^=y<<7|y>>>32-7,y=C+F|0,A^=y<<9|y>>>32-9,y=A+C|0,T^=y<<13|y>>>32-13,y=T+A|0,F^=y<<18|y>>>32-18;ve=ve+S|0,Be=Be+L|0,he=he+M|0,Ee=Ee+Q|0,Se=Se+ue|0,pe=pe+ke|0,z=z+me|0,K=K+vt|0,ie=ie+_e|0,X=X+Ge|0,Z=Z+Je|0,g=g+tt|0,C=C+it|0,A=A+qe|0,T=T+rt|0,F=F+Ve|0,m[0]=ve>>>0&255,m[1]=ve>>>8&255,m[2]=ve>>>16&255,m[3]=ve>>>24&255,m[4]=Be>>>0&255,m[5]=Be>>>8&255,m[6]=Be>>>16&255,m[7]=Be>>>24&255,m[8]=he>>>0&255,m[9]=he>>>8&255,m[10]=he>>>16&255,m[11]=he>>>24&255,m[12]=Ee>>>0&255,m[13]=Ee>>>8&255,m[14]=Ee>>>16&255,m[15]=Ee>>>24&255,m[16]=Se>>>0&255,m[17]=Se>>>8&255,m[18]=Se>>>16&255,m[19]=Se>>>24&255,m[20]=pe>>>0&255,m[21]=pe>>>8&255,m[22]=pe>>>16&255,m[23]=pe>>>24&255,m[24]=z>>>0&255,m[25]=z>>>8&255,m[26]=z>>>16&255,m[27]=z>>>24&255,m[28]=K>>>0&255,m[29]=K>>>8&255,m[30]=K>>>16&255,m[31]=K>>>24&255,m[32]=ie>>>0&255,m[33]=ie>>>8&255,m[34]=ie>>>16&255,m[35]=ie>>>24&255,m[36]=X>>>0&255,m[37]=X>>>8&255,m[38]=X>>>16&255,m[39]=X>>>24&255,m[40]=Z>>>0&255,m[41]=Z>>>8&255,m[42]=Z>>>16&255,m[43]=Z>>>24&255,m[44]=g>>>0&255,m[45]=g>>>8&255,m[46]=g>>>16&255,m[47]=g>>>24&255,m[48]=C>>>0&255,m[49]=C>>>8&255,m[50]=C>>>16&255,m[51]=C>>>24&255,m[52]=A>>>0&255,m[53]=A>>>8&255,m[54]=A>>>16&255,m[55]=A>>>24&255,m[56]=T>>>0&255,m[57]=T>>>8&255,m[58]=T>>>16&255,m[59]=T>>>24&255,m[60]=F>>>0&255,m[61]=F>>>8&255,m[62]=F>>>16&255,m[63]=F>>>24&255}function Oe(m,_,x,l){for(var S=l[0]&255|(l[1]&255)<<8|(l[2]&255)<<16|(l[3]&255)<<24,L=x[0]&255|(x[1]&255)<<8|(x[2]&255)<<16|(x[3]&255)<<24,M=x[4]&255|(x[5]&255)<<8|(x[6]&255)<<16|(x[7]&255)<<24,Q=x[8]&255|(x[9]&255)<<8|(x[10]&255)<<16|(x[11]&255)<<24,ue=x[12]&255|(x[13]&255)<<8|(x[14]&255)<<16|(x[15]&255)<<24,ke=l[4]&255|(l[5]&255)<<8|(l[6]&255)<<16|(l[7]&255)<<24,me=_[0]&255|(_[1]&255)<<8|(_[2]&255)<<16|(_[3]&255)<<24,vt=_[4]&255|(_[5]&255)<<8|(_[6]&255)<<16|(_[7]&255)<<24,_e=_[8]&255|(_[9]&255)<<8|(_[10]&255)<<16|(_[11]&255)<<24,Ge=_[12]&255|(_[13]&255)<<8|(_[14]&255)<<16|(_[15]&255)<<24,Je=l[8]&255|(l[9]&255)<<8|(l[10]&255)<<16|(l[11]&255)<<24,tt=x[16]&255|(x[17]&255)<<8|(x[18]&255)<<16|(x[19]&255)<<24,it=x[20]&255|(x[21]&255)<<8|(x[22]&255)<<16|(x[23]&255)<<24,qe=x[24]&255|(x[25]&255)<<8|(x[26]&255)<<16|(x[27]&255)<<24,rt=x[28]&255|(x[29]&255)<<8|(x[30]&255)<<16|(x[31]&255)<<24,Ve=l[12]&255|(l[13]&255)<<8|(l[14]&255)<<16|(l[15]&255)<<24,ve=S,Be=L,he=M,Ee=Q,Se=ue,pe=ke,z=me,K=vt,ie=_e,X=Ge,Z=Je,g=tt,C=it,A=qe,T=rt,F=Ve,y,U=0;U<20;U+=2)y=ve+C|0,Se^=y<<7|y>>>32-7,y=Se+ve|0,ie^=y<<9|y>>>32-9,y=ie+Se|0,C^=y<<13|y>>>32-13,y=C+ie|0,ve^=y<<18|y>>>32-18,y=pe+Be|0,X^=y<<7|y>>>32-7,y=X+pe|0,A^=y<<9|y>>>32-9,y=A+X|0,Be^=y<<13|y>>>32-13,y=Be+A|0,pe^=y<<18|y>>>32-18,y=Z+z|0,T^=y<<7|y>>>32-7,y=T+Z|0,he^=y<<9|y>>>32-9,y=he+T|0,z^=y<<13|y>>>32-13,y=z+he|0,Z^=y<<18|y>>>32-18,y=F+g|0,Ee^=y<<7|y>>>32-7,y=Ee+F|0,K^=y<<9|y>>>32-9,y=K+Ee|0,g^=y<<13|y>>>32-13,y=g+K|0,F^=y<<18|y>>>32-18,y=ve+Ee|0,Be^=y<<7|y>>>32-7,y=Be+ve|0,he^=y<<9|y>>>32-9,y=he+Be|0,Ee^=y<<13|y>>>32-13,y=Ee+he|0,ve^=y<<18|y>>>32-18,y=pe+Se|0,z^=y<<7|y>>>32-7,y=z+pe|0,K^=y<<9|y>>>32-9,y=K+z|0,Se^=y<<13|y>>>32-13,y=Se+K|0,pe^=y<<18|y>>>32-18,y=Z+X|0,g^=y<<7|y>>>32-7,y=g+Z|0,ie^=y<<9|y>>>32-9,y=ie+g|0,X^=y<<13|y>>>32-13,y=X+ie|0,Z^=y<<18|y>>>32-18,y=F+T|0,C^=y<<7|y>>>32-7,y=C+F|0,A^=y<<9|y>>>32-9,y=A+C|0,T^=y<<13|y>>>32-13,y=T+A|0,F^=y<<18|y>>>32-18;m[0]=ve>>>0&255,m[1]=ve>>>8&255,m[2]=ve>>>16&255,m[3]=ve>>>24&255,m[4]=pe>>>0&255,m[5]=pe>>>8&255,m[6]=pe>>>16&255,m[7]=pe>>>24&255,m[8]=Z>>>0&255,m[9]=Z>>>8&255,m[10]=Z>>>16&255,m[11]=Z>>>24&255,m[12]=F>>>0&255,m[13]=F>>>8&255,m[14]=F>>>16&255,m[15]=F>>>24&255,m[16]=z>>>0&255,m[17]=z>>>8&255,m[18]=z>>>16&255,m[19]=z>>>24&255,m[20]=K>>>0&255,m[21]=K>>>8&255,m[22]=K>>>16&255,m[23]=K>>>24&255,m[24]=ie>>>0&255,m[25]=ie>>>8&255,m[26]=ie>>>16&255,m[27]=ie>>>24&255,m[28]=X>>>0&255,m[29]=X>>>8&255,m[30]=X>>>16&255,m[31]=X>>>24&255}function ae(m,_,x,l){ge(m,_,x,l)}function Ue(m,_,x,l){Oe(m,_,x,l)}var He=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ne(m,_,x,l,S,L,M){var Q=new Uint8Array(16),ue=new Uint8Array(64),ke,me;for(me=0;me<16;me++)Q[me]=0;for(me=0;me<8;me++)Q[me]=L[me];for(;S>=64;){for(ae(ue,Q,M,He),me=0;me<64;me++)m[_+me]=x[l+me]^ue[me];for(ke=1,me=8;me<16;me++)ke=ke+(Q[me]&255)|0,Q[me]=ke&255,ke>>>=8;S-=64,_+=64,l+=64}if(S>0)for(ae(ue,Q,M,He),me=0;me<S;me++)m[_+me]=x[l+me]^ue[me];return 0}function we(m,_,x,l,S){var L=new Uint8Array(16),M=new Uint8Array(64),Q,ue;for(ue=0;ue<16;ue++)L[ue]=0;for(ue=0;ue<8;ue++)L[ue]=l[ue];for(;x>=64;){for(ae(M,L,S,He),ue=0;ue<64;ue++)m[_+ue]=M[ue];for(Q=1,ue=8;ue<16;ue++)Q=Q+(L[ue]&255)|0,L[ue]=Q&255,Q>>>=8;x-=64,_+=64}if(x>0)for(ae(M,L,S,He),ue=0;ue<x;ue++)m[_+ue]=M[ue];return 0}function be(m,_,x,l,S){var L=new Uint8Array(32);Ue(L,l,S,He);for(var M=new Uint8Array(8),Q=0;Q<8;Q++)M[Q]=l[Q+16];return we(m,_,x,M,L)}function je(m,_,x,l,S,L,M){var Q=new Uint8Array(32);Ue(Q,L,M,He);for(var ue=new Uint8Array(8),ke=0;ke<8;ke++)ue[ke]=L[ke+16];return ne(m,_,x,l,S,ue,Q)}var gt=function(m){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var _,x,l,S,L,M,Q,ue;_=m[0]&255|(m[1]&255)<<8,this.r[0]=_&8191,x=m[2]&255|(m[3]&255)<<8,this.r[1]=(_>>>13|x<<3)&8191,l=m[4]&255|(m[5]&255)<<8,this.r[2]=(x>>>10|l<<6)&7939,S=m[6]&255|(m[7]&255)<<8,this.r[3]=(l>>>7|S<<9)&8191,L=m[8]&255|(m[9]&255)<<8,this.r[4]=(S>>>4|L<<12)&255,this.r[5]=L>>>1&8190,M=m[10]&255|(m[11]&255)<<8,this.r[6]=(L>>>14|M<<2)&8191,Q=m[12]&255|(m[13]&255)<<8,this.r[7]=(M>>>11|Q<<5)&8065,ue=m[14]&255|(m[15]&255)<<8,this.r[8]=(Q>>>8|ue<<8)&8191,this.r[9]=ue>>>5&127,this.pad[0]=m[16]&255|(m[17]&255)<<8,this.pad[1]=m[18]&255|(m[19]&255)<<8,this.pad[2]=m[20]&255|(m[21]&255)<<8,this.pad[3]=m[22]&255|(m[23]&255)<<8,this.pad[4]=m[24]&255|(m[25]&255)<<8,this.pad[5]=m[26]&255|(m[27]&255)<<8,this.pad[6]=m[28]&255|(m[29]&255)<<8,this.pad[7]=m[30]&255|(m[31]&255)<<8};gt.prototype.blocks=function(m,_,x){for(var l=this.fin?0:2048,S,L,M,Q,ue,ke,me,vt,_e,Ge,Je,tt,it,qe,rt,Ve,ve,Be,he,Ee=this.h[0],Se=this.h[1],pe=this.h[2],z=this.h[3],K=this.h[4],ie=this.h[5],X=this.h[6],Z=this.h[7],g=this.h[8],C=this.h[9],A=this.r[0],T=this.r[1],F=this.r[2],y=this.r[3],U=this.r[4],$=this.r[5],W=this.r[6],j=this.r[7],J=this.r[8],fe=this.r[9];x>=16;)S=m[_+0]&255|(m[_+1]&255)<<8,Ee+=S&8191,L=m[_+2]&255|(m[_+3]&255)<<8,Se+=(S>>>13|L<<3)&8191,M=m[_+4]&255|(m[_+5]&255)<<8,pe+=(L>>>10|M<<6)&8191,Q=m[_+6]&255|(m[_+7]&255)<<8,z+=(M>>>7|Q<<9)&8191,ue=m[_+8]&255|(m[_+9]&255)<<8,K+=(Q>>>4|ue<<12)&8191,ie+=ue>>>1&8191,ke=m[_+10]&255|(m[_+11]&255)<<8,X+=(ue>>>14|ke<<2)&8191,me=m[_+12]&255|(m[_+13]&255)<<8,Z+=(ke>>>11|me<<5)&8191,vt=m[_+14]&255|(m[_+15]&255)<<8,g+=(me>>>8|vt<<8)&8191,C+=vt>>>5|l,_e=0,Ge=_e,Ge+=Ee*A,Ge+=Se*(5*fe),Ge+=pe*(5*J),Ge+=z*(5*j),Ge+=K*(5*W),_e=Ge>>>13,Ge&=8191,Ge+=ie*(5*$),Ge+=X*(5*U),Ge+=Z*(5*y),Ge+=g*(5*F),Ge+=C*(5*T),_e+=Ge>>>13,Ge&=8191,Je=_e,Je+=Ee*T,Je+=Se*A,Je+=pe*(5*fe),Je+=z*(5*J),Je+=K*(5*j),_e=Je>>>13,Je&=8191,Je+=ie*(5*W),Je+=X*(5*$),Je+=Z*(5*U),Je+=g*(5*y),Je+=C*(5*F),_e+=Je>>>13,Je&=8191,tt=_e,tt+=Ee*F,tt+=Se*T,tt+=pe*A,tt+=z*(5*fe),tt+=K*(5*J),_e=tt>>>13,tt&=8191,tt+=ie*(5*j),tt+=X*(5*W),tt+=Z*(5*$),tt+=g*(5*U),tt+=C*(5*y),_e+=tt>>>13,tt&=8191,it=_e,it+=Ee*y,it+=Se*F,it+=pe*T,it+=z*A,it+=K*(5*fe),_e=it>>>13,it&=8191,it+=ie*(5*J),it+=X*(5*j),it+=Z*(5*W),it+=g*(5*$),it+=C*(5*U),_e+=it>>>13,it&=8191,qe=_e,qe+=Ee*U,qe+=Se*y,qe+=pe*F,qe+=z*T,qe+=K*A,_e=qe>>>13,qe&=8191,qe+=ie*(5*fe),qe+=X*(5*J),qe+=Z*(5*j),qe+=g*(5*W),qe+=C*(5*$),_e+=qe>>>13,qe&=8191,rt=_e,rt+=Ee*$,rt+=Se*U,rt+=pe*y,rt+=z*F,rt+=K*T,_e=rt>>>13,rt&=8191,rt+=ie*A,rt+=X*(5*fe),rt+=Z*(5*J),rt+=g*(5*j),rt+=C*(5*W),_e+=rt>>>13,rt&=8191,Ve=_e,Ve+=Ee*W,Ve+=Se*$,Ve+=pe*U,Ve+=z*y,Ve+=K*F,_e=Ve>>>13,Ve&=8191,Ve+=ie*T,Ve+=X*A,Ve+=Z*(5*fe),Ve+=g*(5*J),Ve+=C*(5*j),_e+=Ve>>>13,Ve&=8191,ve=_e,ve+=Ee*j,ve+=Se*W,ve+=pe*$,ve+=z*U,ve+=K*y,_e=ve>>>13,ve&=8191,ve+=ie*F,ve+=X*T,ve+=Z*A,ve+=g*(5*fe),ve+=C*(5*J),_e+=ve>>>13,ve&=8191,Be=_e,Be+=Ee*J,Be+=Se*j,Be+=pe*W,Be+=z*$,Be+=K*U,_e=Be>>>13,Be&=8191,Be+=ie*y,Be+=X*F,Be+=Z*T,Be+=g*A,Be+=C*(5*fe),_e+=Be>>>13,Be&=8191,he=_e,he+=Ee*fe,he+=Se*J,he+=pe*j,he+=z*W,he+=K*$,_e=he>>>13,he&=8191,he+=ie*U,he+=X*y,he+=Z*F,he+=g*T,he+=C*A,_e+=he>>>13,he&=8191,_e=(_e<<2)+_e|0,_e=_e+Ge|0,Ge=_e&8191,_e=_e>>>13,Je+=_e,Ee=Ge,Se=Je,pe=tt,z=it,K=qe,ie=rt,X=Ve,Z=ve,g=Be,C=he,_+=16,x-=16;this.h[0]=Ee,this.h[1]=Se,this.h[2]=pe,this.h[3]=z,this.h[4]=K,this.h[5]=ie,this.h[6]=X,this.h[7]=Z,this.h[8]=g,this.h[9]=C},gt.prototype.finish=function(m,_){var x=new Uint16Array(10),l,S,L,M;if(this.leftover){for(M=this.leftover,this.buffer[M++]=1;M<16;M++)this.buffer[M]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(l=this.h[1]>>>13,this.h[1]&=8191,M=2;M<10;M++)this.h[M]+=l,l=this.h[M]>>>13,this.h[M]&=8191;for(this.h[0]+=l*5,l=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=l,l=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=l,x[0]=this.h[0]+5,l=x[0]>>>13,x[0]&=8191,M=1;M<10;M++)x[M]=this.h[M]+l,l=x[M]>>>13,x[M]&=8191;for(x[9]-=1<<13,S=(l^1)-1,M=0;M<10;M++)x[M]&=S;for(S=~S,M=0;M<10;M++)this.h[M]=this.h[M]&S|x[M];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,L=this.h[0]+this.pad[0],this.h[0]=L&65535,M=1;M<8;M++)L=(this.h[M]+this.pad[M]|0)+(L>>>16)|0,this.h[M]=L&65535;m[_+0]=this.h[0]>>>0&255,m[_+1]=this.h[0]>>>8&255,m[_+2]=this.h[1]>>>0&255,m[_+3]=this.h[1]>>>8&255,m[_+4]=this.h[2]>>>0&255,m[_+5]=this.h[2]>>>8&255,m[_+6]=this.h[3]>>>0&255,m[_+7]=this.h[3]>>>8&255,m[_+8]=this.h[4]>>>0&255,m[_+9]=this.h[4]>>>8&255,m[_+10]=this.h[5]>>>0&255,m[_+11]=this.h[5]>>>8&255,m[_+12]=this.h[6]>>>0&255,m[_+13]=this.h[6]>>>8&255,m[_+14]=this.h[7]>>>0&255,m[_+15]=this.h[7]>>>8&255},gt.prototype.update=function(m,_,x){var l,S;if(this.leftover){for(S=16-this.leftover,S>x&&(S=x),l=0;l<S;l++)this.buffer[this.leftover+l]=m[_+l];if(x-=S,_+=S,this.leftover+=S,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(x>=16&&(S=x-x%16,this.blocks(m,_,S),_+=S,x-=S),x){for(l=0;l<x;l++)this.buffer[this.leftover+l]=m[_+l];this.leftover+=x}};function Tt(m,_,x,l,S,L){var M=new gt(L);return M.update(x,l,S),M.finish(m,_),0}function At(m,_,x,l,S,L){var M=new Uint8Array(16);return Tt(M,0,x,l,S,L),ce(m,_,M,0)}function Bt(m,_,x,l,S){var L;if(x<32)return-1;for(je(m,0,_,0,x,l,S),Tt(m,16,m,32,x-32,m),L=0;L<16;L++)m[L]=0;return 0}function Gt(m,_,x,l,S){var L,M=new Uint8Array(32);if(x<32||(be(M,0,32,l,S),At(_,16,_,32,x-32,M)!==0))return-1;for(je(m,0,_,0,x,l,S),L=0;L<32;L++)m[L]=0;return 0}function kt(m,_){var x;for(x=0;x<16;x++)m[x]=_[x]|0}function wr(m){var _,x,l=1;for(_=0;_<16;_++)x=m[_]+l+65535,l=Math.floor(x/65536),m[_]=x-l*65536;m[0]+=l-1+37*(l-1)}function Qr(m,_,x){for(var l,S=~(x-1),L=0;L<16;L++)l=S&(m[L]^_[L]),m[L]^=l,_[L]^=l}function hr(m,_){var x,l,S,L=t(),M=t();for(x=0;x<16;x++)M[x]=_[x];for(wr(M),wr(M),wr(M),l=0;l<2;l++){for(L[0]=M[0]-65517,x=1;x<15;x++)L[x]=M[x]-65535-(L[x-1]>>16&1),L[x-1]&=65535;L[15]=M[15]-32767-(L[14]>>16&1),S=L[15]>>16&1,L[14]&=65535,Qr(M,L,1-S)}for(x=0;x<16;x++)m[2*x]=M[x]&255,m[2*x+1]=M[x]>>8}function Ar(m,_){var x=new Uint8Array(32),l=new Uint8Array(32);return hr(x,m),hr(l,_),De(x,0,l,0)}function So(m){var _=new Uint8Array(32);return hr(_,m),_[0]&1}function Ot(m,_){var x;for(x=0;x<16;x++)m[x]=_[2*x]+(_[2*x+1]<<8);m[15]&=32767}function Dt(m,_,x){for(var l=0;l<16;l++)m[l]=_[l]+x[l]}function er(m,_,x){for(var l=0;l<16;l++)m[l]=_[l]-x[l]}function Re(m,_,x){var l,S,L=0,M=0,Q=0,ue=0,ke=0,me=0,vt=0,_e=0,Ge=0,Je=0,tt=0,it=0,qe=0,rt=0,Ve=0,ve=0,Be=0,he=0,Ee=0,Se=0,pe=0,z=0,K=0,ie=0,X=0,Z=0,g=0,C=0,A=0,T=0,F=0,y=x[0],U=x[1],$=x[2],W=x[3],j=x[4],J=x[5],fe=x[6],Te=x[7],Pe=x[8],$e=x[9],at=x[10],ft=x[11],Et=x[12],jt=x[13],tr=x[14],dr=x[15];l=_[0],L+=l*y,M+=l*U,Q+=l*$,ue+=l*W,ke+=l*j,me+=l*J,vt+=l*fe,_e+=l*Te,Ge+=l*Pe,Je+=l*$e,tt+=l*at,it+=l*ft,qe+=l*Et,rt+=l*jt,Ve+=l*tr,ve+=l*dr,l=_[1],M+=l*y,Q+=l*U,ue+=l*$,ke+=l*W,me+=l*j,vt+=l*J,_e+=l*fe,Ge+=l*Te,Je+=l*Pe,tt+=l*$e,it+=l*at,qe+=l*ft,rt+=l*Et,Ve+=l*jt,ve+=l*tr,Be+=l*dr,l=_[2],Q+=l*y,ue+=l*U,ke+=l*$,me+=l*W,vt+=l*j,_e+=l*J,Ge+=l*fe,Je+=l*Te,tt+=l*Pe,it+=l*$e,qe+=l*at,rt+=l*ft,Ve+=l*Et,ve+=l*jt,Be+=l*tr,he+=l*dr,l=_[3],ue+=l*y,ke+=l*U,me+=l*$,vt+=l*W,_e+=l*j,Ge+=l*J,Je+=l*fe,tt+=l*Te,it+=l*Pe,qe+=l*$e,rt+=l*at,Ve+=l*ft,ve+=l*Et,Be+=l*jt,he+=l*tr,Ee+=l*dr,l=_[4],ke+=l*y,me+=l*U,vt+=l*$,_e+=l*W,Ge+=l*j,Je+=l*J,tt+=l*fe,it+=l*Te,qe+=l*Pe,rt+=l*$e,Ve+=l*at,ve+=l*ft,Be+=l*Et,he+=l*jt,Ee+=l*tr,Se+=l*dr,l=_[5],me+=l*y,vt+=l*U,_e+=l*$,Ge+=l*W,Je+=l*j,tt+=l*J,it+=l*fe,qe+=l*Te,rt+=l*Pe,Ve+=l*$e,ve+=l*at,Be+=l*ft,he+=l*Et,Ee+=l*jt,Se+=l*tr,pe+=l*dr,l=_[6],vt+=l*y,_e+=l*U,Ge+=l*$,Je+=l*W,tt+=l*j,it+=l*J,qe+=l*fe,rt+=l*Te,Ve+=l*Pe,ve+=l*$e,Be+=l*at,he+=l*ft,Ee+=l*Et,Se+=l*jt,pe+=l*tr,z+=l*dr,l=_[7],_e+=l*y,Ge+=l*U,Je+=l*$,tt+=l*W,it+=l*j,qe+=l*J,rt+=l*fe,Ve+=l*Te,ve+=l*Pe,Be+=l*$e,he+=l*at,Ee+=l*ft,Se+=l*Et,pe+=l*jt,z+=l*tr,K+=l*dr,l=_[8],Ge+=l*y,Je+=l*U,tt+=l*$,it+=l*W,qe+=l*j,rt+=l*J,Ve+=l*fe,ve+=l*Te,Be+=l*Pe,he+=l*$e,Ee+=l*at,Se+=l*ft,pe+=l*Et,z+=l*jt,K+=l*tr,ie+=l*dr,l=_[9],Je+=l*y,tt+=l*U,it+=l*$,qe+=l*W,rt+=l*j,Ve+=l*J,ve+=l*fe,Be+=l*Te,he+=l*Pe,Ee+=l*$e,Se+=l*at,pe+=l*ft,z+=l*Et,K+=l*jt,ie+=l*tr,X+=l*dr,l=_[10],tt+=l*y,it+=l*U,qe+=l*$,rt+=l*W,Ve+=l*j,ve+=l*J,Be+=l*fe,he+=l*Te,Ee+=l*Pe,Se+=l*$e,pe+=l*at,z+=l*ft,K+=l*Et,ie+=l*jt,X+=l*tr,Z+=l*dr,l=_[11],it+=l*y,qe+=l*U,rt+=l*$,Ve+=l*W,ve+=l*j,Be+=l*J,he+=l*fe,Ee+=l*Te,Se+=l*Pe,pe+=l*$e,z+=l*at,K+=l*ft,ie+=l*Et,X+=l*jt,Z+=l*tr,g+=l*dr,l=_[12],qe+=l*y,rt+=l*U,Ve+=l*$,ve+=l*W,Be+=l*j,he+=l*J,Ee+=l*fe,Se+=l*Te,pe+=l*Pe,z+=l*$e,K+=l*at,ie+=l*ft,X+=l*Et,Z+=l*jt,g+=l*tr,C+=l*dr,l=_[13],rt+=l*y,Ve+=l*U,ve+=l*$,Be+=l*W,he+=l*j,Ee+=l*J,Se+=l*fe,pe+=l*Te,z+=l*Pe,K+=l*$e,ie+=l*at,X+=l*ft,Z+=l*Et,g+=l*jt,C+=l*tr,A+=l*dr,l=_[14],Ve+=l*y,ve+=l*U,Be+=l*$,he+=l*W,Ee+=l*j,Se+=l*J,pe+=l*fe,z+=l*Te,K+=l*Pe,ie+=l*$e,X+=l*at,Z+=l*ft,g+=l*Et,C+=l*jt,A+=l*tr,T+=l*dr,l=_[15],ve+=l*y,Be+=l*U,he+=l*$,Ee+=l*W,Se+=l*j,pe+=l*J,z+=l*fe,K+=l*Te,ie+=l*Pe,X+=l*$e,Z+=l*at,g+=l*ft,C+=l*Et,A+=l*jt,T+=l*tr,F+=l*dr,L+=38*Be,M+=38*he,Q+=38*Ee,ue+=38*Se,ke+=38*pe,me+=38*z,vt+=38*K,_e+=38*ie,Ge+=38*X,Je+=38*Z,tt+=38*g,it+=38*C,qe+=38*A,rt+=38*T,Ve+=38*F,S=1,l=L+S+65535,S=Math.floor(l/65536),L=l-S*65536,l=M+S+65535,S=Math.floor(l/65536),M=l-S*65536,l=Q+S+65535,S=Math.floor(l/65536),Q=l-S*65536,l=ue+S+65535,S=Math.floor(l/65536),ue=l-S*65536,l=ke+S+65535,S=Math.floor(l/65536),ke=l-S*65536,l=me+S+65535,S=Math.floor(l/65536),me=l-S*65536,l=vt+S+65535,S=Math.floor(l/65536),vt=l-S*65536,l=_e+S+65535,S=Math.floor(l/65536),_e=l-S*65536,l=Ge+S+65535,S=Math.floor(l/65536),Ge=l-S*65536,l=Je+S+65535,S=Math.floor(l/65536),Je=l-S*65536,l=tt+S+65535,S=Math.floor(l/65536),tt=l-S*65536,l=it+S+65535,S=Math.floor(l/65536),it=l-S*65536,l=qe+S+65535,S=Math.floor(l/65536),qe=l-S*65536,l=rt+S+65535,S=Math.floor(l/65536),rt=l-S*65536,l=Ve+S+65535,S=Math.floor(l/65536),Ve=l-S*65536,l=ve+S+65535,S=Math.floor(l/65536),ve=l-S*65536,L+=S-1+37*(S-1),S=1,l=L+S+65535,S=Math.floor(l/65536),L=l-S*65536,l=M+S+65535,S=Math.floor(l/65536),M=l-S*65536,l=Q+S+65535,S=Math.floor(l/65536),Q=l-S*65536,l=ue+S+65535,S=Math.floor(l/65536),ue=l-S*65536,l=ke+S+65535,S=Math.floor(l/65536),ke=l-S*65536,l=me+S+65535,S=Math.floor(l/65536),me=l-S*65536,l=vt+S+65535,S=Math.floor(l/65536),vt=l-S*65536,l=_e+S+65535,S=Math.floor(l/65536),_e=l-S*65536,l=Ge+S+65535,S=Math.floor(l/65536),Ge=l-S*65536,l=Je+S+65535,S=Math.floor(l/65536),Je=l-S*65536,l=tt+S+65535,S=Math.floor(l/65536),tt=l-S*65536,l=it+S+65535,S=Math.floor(l/65536),it=l-S*65536,l=qe+S+65535,S=Math.floor(l/65536),qe=l-S*65536,l=rt+S+65535,S=Math.floor(l/65536),rt=l-S*65536,l=Ve+S+65535,S=Math.floor(l/65536),Ve=l-S*65536,l=ve+S+65535,S=Math.floor(l/65536),ve=l-S*65536,L+=S-1+37*(S-1),m[0]=L,m[1]=M,m[2]=Q,m[3]=ue,m[4]=ke,m[5]=me,m[6]=vt,m[7]=_e,m[8]=Ge,m[9]=Je,m[10]=tt,m[11]=it,m[12]=qe,m[13]=rt,m[14]=Ve,m[15]=ve}function Ir(m,_){Re(m,_,_)}function Qn(m,_){var x=t(),l;for(l=0;l<16;l++)x[l]=_[l];for(l=253;l>=0;l--)Ir(x,x),l!==2&&l!==4&&Re(x,x,_);for(l=0;l<16;l++)m[l]=x[l]}function ei(m,_){var x=t(),l;for(l=0;l<16;l++)x[l]=_[l];for(l=250;l>=0;l--)Ir(x,x),l!==1&&Re(x,x,_);for(l=0;l<16;l++)m[l]=x[l]}function to(m,_,x){var l=new Uint8Array(32),S=new Float64Array(80),L,M,Q=t(),ue=t(),ke=t(),me=t(),vt=t(),_e=t();for(M=0;M<31;M++)l[M]=_[M];for(l[31]=_[31]&127|64,l[0]&=248,Ot(S,x),M=0;M<16;M++)ue[M]=S[M],me[M]=Q[M]=ke[M]=0;for(Q[0]=me[0]=1,M=254;M>=0;--M)L=l[M>>>3]>>>(M&7)&1,Qr(Q,ue,L),Qr(ke,me,L),Dt(vt,Q,ke),er(Q,Q,ke),Dt(ke,ue,me),er(ue,ue,me),Ir(me,vt),Ir(_e,Q),Re(Q,ke,Q),Re(ke,ue,vt),Dt(vt,Q,ke),er(Q,Q,ke),Ir(ue,Q),er(ke,me,_e),Re(Q,ke,u),Dt(Q,Q,me),Re(ke,ke,Q),Re(Q,me,_e),Re(me,ue,S),Ir(ue,vt),Qr(Q,ue,L),Qr(ke,me,L);for(M=0;M<16;M++)S[M+16]=Q[M],S[M+32]=ke[M],S[M+48]=ue[M],S[M+64]=me[M];var Ge=S.subarray(32),Je=S.subarray(16);return Qn(Ge,Ge),Re(Je,Je,Ge),hr(m,Je),0}function pr(m,_){return to(m,_,o)}function ti(m,_){return r(_,32),pr(m,_)}function Gr(m,_,x){var l=new Uint8Array(32);return to(l,x,_),Ue(m,n,l,He)}var Er=Bt,Ti=Gt;function ls(m,_,x,l,S,L){var M=new Uint8Array(32);return Gr(M,S,L),Er(m,_,x,l,M)}function en(m,_,x,l,S,L){var M=new Uint8Array(32);return Gr(M,S,L),Ti(m,_,x,l,M)}var Vr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function hs(m,_,x,l){for(var S=new Int32Array(16),L=new Int32Array(16),M,Q,ue,ke,me,vt,_e,Ge,Je,tt,it,qe,rt,Ve,ve,Be,he,Ee,Se,pe,z,K,ie,X,Z,g,C=m[0],A=m[1],T=m[2],F=m[3],y=m[4],U=m[5],$=m[6],W=m[7],j=_[0],J=_[1],fe=_[2],Te=_[3],Pe=_[4],$e=_[5],at=_[6],ft=_[7],Et=0;l>=128;){for(Se=0;Se<16;Se++)pe=8*Se+Et,S[Se]=x[pe+0]<<24|x[pe+1]<<16|x[pe+2]<<8|x[pe+3],L[Se]=x[pe+4]<<24|x[pe+5]<<16|x[pe+6]<<8|x[pe+7];for(Se=0;Se<80;Se++)if(M=C,Q=A,ue=T,ke=F,me=y,vt=U,_e=$,Ge=W,Je=j,tt=J,it=fe,qe=Te,rt=Pe,Ve=$e,ve=at,Be=ft,z=W,K=ft,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=(y>>>14|Pe<<32-14)^(y>>>18|Pe<<32-18)^(Pe>>>41-32|y<<32-(41-32)),K=(Pe>>>14|y<<32-14)^(Pe>>>18|y<<32-18)^(y>>>41-32|Pe<<32-(41-32)),ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,z=y&U^~y&$,K=Pe&$e^~Pe&at,ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,z=Vr[Se*2],K=Vr[Se*2+1],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,z=S[Se%16],K=L[Se%16],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,he=Z&65535|g<<16,Ee=ie&65535|X<<16,z=he,K=Ee,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=(C>>>28|j<<32-28)^(j>>>34-32|C<<32-(34-32))^(j>>>39-32|C<<32-(39-32)),K=(j>>>28|C<<32-28)^(C>>>34-32|j<<32-(34-32))^(C>>>39-32|j<<32-(39-32)),ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,z=C&A^C&T^A&T,K=j&J^j&fe^J&fe,ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,Ge=Z&65535|g<<16,Be=ie&65535|X<<16,z=ke,K=qe,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=he,K=Ee,ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,ke=Z&65535|g<<16,qe=ie&65535|X<<16,A=M,T=Q,F=ue,y=ke,U=me,$=vt,W=_e,C=Ge,J=Je,fe=tt,Te=it,Pe=qe,$e=rt,at=Ve,ft=ve,j=Be,Se%16===15)for(pe=0;pe<16;pe++)z=S[pe],K=L[pe],ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=S[(pe+9)%16],K=L[(pe+9)%16],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,he=S[(pe+1)%16],Ee=L[(pe+1)%16],z=(he>>>1|Ee<<32-1)^(he>>>8|Ee<<32-8)^he>>>7,K=(Ee>>>1|he<<32-1)^(Ee>>>8|he<<32-8)^(Ee>>>7|he<<32-7),ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,he=S[(pe+14)%16],Ee=L[(pe+14)%16],z=(he>>>19|Ee<<32-19)^(Ee>>>61-32|he<<32-(61-32))^he>>>6,K=(Ee>>>19|he<<32-19)^(he>>>61-32|Ee<<32-(61-32))^(Ee>>>6|he<<32-6),ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,S[pe]=Z&65535|g<<16,L[pe]=ie&65535|X<<16;z=C,K=j,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=m[0],K=_[0],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,m[0]=C=Z&65535|g<<16,_[0]=j=ie&65535|X<<16,z=A,K=J,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=m[1],K=_[1],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,m[1]=A=Z&65535|g<<16,_[1]=J=ie&65535|X<<16,z=T,K=fe,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=m[2],K=_[2],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,m[2]=T=Z&65535|g<<16,_[2]=fe=ie&65535|X<<16,z=F,K=Te,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=m[3],K=_[3],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,m[3]=F=Z&65535|g<<16,_[3]=Te=ie&65535|X<<16,z=y,K=Pe,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=m[4],K=_[4],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,m[4]=y=Z&65535|g<<16,_[4]=Pe=ie&65535|X<<16,z=U,K=$e,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=m[5],K=_[5],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,m[5]=U=Z&65535|g<<16,_[5]=$e=ie&65535|X<<16,z=$,K=at,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=m[6],K=_[6],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,m[6]=$=Z&65535|g<<16,_[6]=at=ie&65535|X<<16,z=W,K=ft,ie=K&65535,X=K>>>16,Z=z&65535,g=z>>>16,z=m[7],K=_[7],ie+=K&65535,X+=K>>>16,Z+=z&65535,g+=z>>>16,X+=ie>>>16,Z+=X>>>16,g+=Z>>>16,m[7]=W=Z&65535|g<<16,_[7]=ft=ie&65535|X<<16,Et+=128,l-=128}return l}function Tr(m,_,x){var l=new Int32Array(8),S=new Int32Array(8),L=new Uint8Array(256),M,Q=x;for(l[0]=1779033703,l[1]=3144134277,l[2]=1013904242,l[3]=2773480762,l[4]=1359893119,l[5]=2600822924,l[6]=528734635,l[7]=1541459225,S[0]=4089235720,S[1]=2227873595,S[2]=4271175723,S[3]=1595750129,S[4]=2917565137,S[5]=725511199,S[6]=4215389547,S[7]=327033209,hs(l,S,_,x),x%=128,M=0;M<x;M++)L[M]=_[Q-x+M];for(L[x]=128,x=256-128*(x<112?1:0),L[x-9]=0,R(L,x-8,Q/536870912|0,Q<<3),hs(l,S,L,x),M=0;M<8;M++)R(m,8*M,l[M],S[M]);return 0}function $t(m,_){var x=t(),l=t(),S=t(),L=t(),M=t(),Q=t(),ue=t(),ke=t(),me=t();er(x,m[1],m[0]),er(me,_[1],_[0]),Re(x,x,me),Dt(l,m[0],m[1]),Dt(me,_[0],_[1]),Re(l,l,me),Re(S,m[3],_[3]),Re(S,S,d),Re(L,m[2],_[2]),Dt(L,L,L),er(M,l,x),er(Q,L,S),Dt(ue,L,S),Dt(ke,l,x),Re(m[0],M,Q),Re(m[1],ke,ue),Re(m[2],ue,Q),Re(m[3],M,ke)}function mn(m,_,x){var l;for(l=0;l<4;l++)Qr(m[l],_[l],x)}function yn(m,_){var x=t(),l=t(),S=t();Qn(S,_[2]),Re(x,_[0],S),Re(l,_[1],S),hr(m,l),m[31]^=So(x)<<7}function Fi(m,_,x){var l,S;for(kt(m[0],a),kt(m[1],f),kt(m[2],f),kt(m[3],a),S=255;S>=0;--S)l=x[S/8|0]>>(S&7)&1,mn(m,_,l),$t(_,m),$t(m,m),mn(m,_,l)}function Rr(m,_){var x=[t(),t(),t(),t()];kt(x[0],v),kt(x[1],P),kt(x[2],f),Re(x[3],v,P),Fi(m,x,_)}function O(m,_,x){var l=new Uint8Array(64),S=[t(),t(),t(),t()],L;for(x||r(_,32),Tr(l,_,32),l[0]&=248,l[31]&=127,l[31]|=64,Rr(S,l),yn(m,S),L=0;L<32;L++)_[L+32]=m[L];return 0}var q=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(m,_){var x,l,S,L;for(l=63;l>=32;--l){for(x=0,S=l-32,L=l-12;S<L;++S)_[S]+=x-16*_[l]*q[S-(l-32)],x=Math.floor((_[S]+128)/256),_[S]-=x*256;_[S]+=x,_[l]=0}for(x=0,S=0;S<32;S++)_[S]+=x-(_[31]>>4)*q[S],x=_[S]>>8,_[S]&=255;for(S=0;S<32;S++)_[S]-=x*q[S];for(l=0;l<32;l++)_[l+1]+=_[l]>>8,m[l]=_[l]&255}function le(m){var _=new Float64Array(64),x;for(x=0;x<64;x++)_[x]=m[x];for(x=0;x<64;x++)m[x]=0;oe(m,_)}function Ie(m,_,x,l){var S=new Uint8Array(64),L=new Uint8Array(64),M=new Uint8Array(64),Q,ue,ke=new Float64Array(64),me=[t(),t(),t(),t()];Tr(S,l,32),S[0]&=248,S[31]&=127,S[31]|=64;var vt=x+64;for(Q=0;Q<x;Q++)m[64+Q]=_[Q];for(Q=0;Q<32;Q++)m[32+Q]=S[32+Q];for(Tr(M,m.subarray(32),x+32),le(M),Rr(me,M),yn(m,me),Q=32;Q<64;Q++)m[Q]=l[Q];for(Tr(L,m,x+64),le(L),Q=0;Q<64;Q++)ke[Q]=0;for(Q=0;Q<32;Q++)ke[Q]=M[Q];for(Q=0;Q<32;Q++)for(ue=0;ue<32;ue++)ke[Q+ue]+=L[Q]*S[ue];return oe(m.subarray(32),ke),vt}function Kt(m,_){var x=t(),l=t(),S=t(),L=t(),M=t(),Q=t(),ue=t();return kt(m[2],f),Ot(m[1],_),Ir(S,m[1]),Re(L,S,h),er(S,S,m[2]),Dt(L,m[2],L),Ir(M,L),Ir(Q,M),Re(ue,Q,M),Re(x,ue,S),Re(x,x,L),ei(x,x),Re(x,x,S),Re(x,x,L),Re(x,x,L),Re(m[0],x,L),Ir(l,m[0]),Re(l,l,L),Ar(l,S)&&Re(m[0],m[0],I),Ir(l,m[0]),Re(l,l,L),Ar(l,S)?-1:(So(m[0])===_[31]>>7&&er(m[0],a,m[0]),Re(m[3],m[0],m[1]),0)}function We(m,_,x,l){var S,L=new Uint8Array(32),M=new Uint8Array(64),Q=[t(),t(),t(),t()],ue=[t(),t(),t(),t()];if(x<64||Kt(ue,l))return-1;for(S=0;S<x;S++)m[S]=_[S];for(S=0;S<32;S++)m[S+32]=l[S];if(Tr(M,m,x),le(M),Fi(Q,ue,M),Rr(ue,_.subarray(32)),$t(Q,ue),yn(L,Q),x-=64,De(_,0,L,0)){for(S=0;S<x;S++)m[S]=0;return-1}for(S=0;S<x;S++)m[S]=_[S+64];return x}var et=32,Le=24,ut=32,st=16,nr=32,Bi=32,Po=32,Di=32,Co=32,ea=Le,ri=ut,hu=st,Tn=64,ni=32,Li=64,ta=32,ra=64;e.lowlevel={crypto_core_hsalsa20:Ue,crypto_stream_xor:je,crypto_stream:be,crypto_stream_salsa20_xor:ne,crypto_stream_salsa20:we,crypto_onetimeauth:Tt,crypto_onetimeauth_verify:At,crypto_verify_16:ce,crypto_verify_32:De,crypto_secretbox:Bt,crypto_secretbox_open:Gt,crypto_scalarmult:to,crypto_scalarmult_base:pr,crypto_box_beforenm:Gr,crypto_box_afternm:Er,crypto_box:ls,crypto_box_open:en,crypto_box_keypair:ti,crypto_hash:Tr,crypto_sign:Ie,crypto_sign_keypair:O,crypto_sign_open:We,crypto_secretbox_KEYBYTES:et,crypto_secretbox_NONCEBYTES:Le,crypto_secretbox_ZEROBYTES:ut,crypto_secretbox_BOXZEROBYTES:st,crypto_scalarmult_BYTES:nr,crypto_scalarmult_SCALARBYTES:Bi,crypto_box_PUBLICKEYBYTES:Po,crypto_box_SECRETKEYBYTES:Di,crypto_box_BEFORENMBYTES:Co,crypto_box_NONCEBYTES:ea,crypto_box_ZEROBYTES:ri,crypto_box_BOXZEROBYTES:hu,crypto_sign_BYTES:Tn,crypto_sign_PUBLICKEYBYTES:ni,crypto_sign_SECRETKEYBYTES:Li,crypto_sign_SEEDBYTES:ta,crypto_hash_BYTES:ra,gf:t,D:h,L:q,pack25519:hr,unpack25519:Ot,M:Re,A:Dt,S:Ir,Z:er,pow2523:ei,add:$t,set25519:kt,modL:oe,scalarmult:Fi,scalarbase:Rr};function Ja(m,_){if(m.length!==et)throw new Error("bad key size");if(_.length!==Le)throw new Error("bad nonce size")}function na(m,_){if(m.length!==Po)throw new Error("bad public key size");if(_.length!==Di)throw new Error("bad secret key size")}function Ur(){for(var m=0;m<arguments.length;m++)if(!(arguments[m]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ps(m){for(var _=0;_<m.length;_++)m[_]=0}e.randomBytes=function(m){var _=new Uint8Array(m);return r(_,m),_},e.secretbox=function(m,_,x){Ur(m,_,x),Ja(x,_);for(var l=new Uint8Array(ut+m.length),S=new Uint8Array(l.length),L=0;L<m.length;L++)l[L+ut]=m[L];return Bt(S,l,l.length,_,x),S.subarray(st)},e.secretbox.open=function(m,_,x){Ur(m,_,x),Ja(x,_);for(var l=new Uint8Array(st+m.length),S=new Uint8Array(l.length),L=0;L<m.length;L++)l[L+st]=m[L];return l.length<32||Gt(S,l,l.length,_,x)!==0?null:S.subarray(ut)},e.secretbox.keyLength=et,e.secretbox.nonceLength=Le,e.secretbox.overheadLength=st,e.scalarMult=function(m,_){if(Ur(m,_),m.length!==Bi)throw new Error("bad n size");if(_.length!==nr)throw new Error("bad p size");var x=new Uint8Array(nr);return to(x,m,_),x},e.scalarMult.base=function(m){if(Ur(m),m.length!==Bi)throw new Error("bad n size");var _=new Uint8Array(nr);return pr(_,m),_},e.scalarMult.scalarLength=Bi,e.scalarMult.groupElementLength=nr,e.box=function(m,_,x,l){var S=e.box.before(x,l);return e.secretbox(m,_,S)},e.box.before=function(m,_){Ur(m,_),na(m,_);var x=new Uint8Array(Co);return Gr(x,m,_),x},e.box.after=e.secretbox,e.box.open=function(m,_,x,l){var S=e.box.before(x,l);return e.secretbox.open(m,_,S)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var m=new Uint8Array(Po),_=new Uint8Array(Di);return ti(m,_),{publicKey:m,secretKey:_}},e.box.keyPair.fromSecretKey=function(m){if(Ur(m),m.length!==Di)throw new Error("bad secret key size");var _=new Uint8Array(Po);return pr(_,m),{publicKey:_,secretKey:new Uint8Array(m)}},e.box.publicKeyLength=Po,e.box.secretKeyLength=Di,e.box.sharedKeyLength=Co,e.box.nonceLength=ea,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(m,_){if(Ur(m,_),_.length!==Li)throw new Error("bad secret key size");var x=new Uint8Array(Tn+m.length);return Ie(x,m,m.length,_),x},e.sign.open=function(m,_){if(Ur(m,_),_.length!==ni)throw new Error("bad public key size");var x=new Uint8Array(m.length),l=We(x,m,m.length,_);if(l<0)return null;for(var S=new Uint8Array(l),L=0;L<S.length;L++)S[L]=x[L];return S},e.sign.detached=function(m,_){for(var x=e.sign(m,_),l=new Uint8Array(Tn),S=0;S<l.length;S++)l[S]=x[S];return l},e.sign.detached.verify=function(m,_,x){if(Ur(m,_,x),_.length!==Tn)throw new Error("bad signature size");if(x.length!==ni)throw new Error("bad public key size");var l=new Uint8Array(Tn+m.length),S=new Uint8Array(Tn+m.length),L;for(L=0;L<Tn;L++)l[L]=_[L];for(L=0;L<m.length;L++)l[L+Tn]=m[L];return We(S,l,l.length,x)>=0},e.sign.keyPair=function(){var m=new Uint8Array(ni),_=new Uint8Array(Li);return O(m,_),{publicKey:m,secretKey:_}},e.sign.keyPair.fromSecretKey=function(m){if(Ur(m),m.length!==Li)throw new Error("bad secret key size");for(var _=new Uint8Array(ni),x=0;x<_.length;x++)_[x]=m[32+x];return{publicKey:_,secretKey:new Uint8Array(m)}},e.sign.keyPair.fromSeed=function(m){if(Ur(m),m.length!==ta)throw new Error("bad seed size");for(var _=new Uint8Array(ni),x=new Uint8Array(Li),l=0;l<32;l++)x[l]=m[l];return O(_,x,!0),{publicKey:_,secretKey:x}},e.sign.publicKeyLength=ni,e.sign.secretKeyLength=Li,e.sign.seedLength=ta,e.sign.signatureLength=Tn,e.hash=function(m){Ur(m);var _=new Uint8Array(ra);return Tr(_,m,m.length),_},e.hash.hashLength=ra,e.verify=function(m,_){return Ur(m,_),m.length===0||_.length===0||m.length!==_.length?!1:ee(m,0,_,0,m.length)===0},e.setPRNG=function(m){r=m},function(){var m=typeof self<"u"?self.crypto||self.msCrypto:null;if(m&&m.getRandomValues){var _=65536;e.setPRNG(function(x,l){var S,L=new Uint8Array(l);for(S=0;S<l;S+=_)m.getRandomValues(L.subarray(S,S+Math.min(l-S,_)));for(S=0;S<l;S++)x[S]=L[S];ps(L)})}else typeof pa<"u"&&(m=im(),m&&m.randomBytes&&e.setPRNG(function(x,l){var S,L=m.randomBytes(l);for(S=0;S<l;S++)x[S]=L[S];ps(L)}))}()})(typeof Ul<"u"&&Ul.exports?Ul.exports:self.nacl=self.nacl||{})});var xx=Ne((rR,vx)=>{"use strict";async function*UI(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&r.cancel(),r.releaseLock()}}vx.exports=UI});var Rm=Ne((nR,bx)=>{"use strict";function _x(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function zI(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return _x(e,r)}catch{r.message=e.message,r.stack=e.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),_x(new o,r)}}bx.exports=zI});var Ex=Ne((iR,Ax)=>{"use strict";Ax.exports=KI;function KI(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,a=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(u,h){r[n]=function(v){if(a)if(a=!1,v)h(v);else{for(var P=new Array(arguments.length-1),I=0;I<P.length;)P[I++]=arguments[I];u.apply(null,P)}};try{e.apply(t||null,r)}catch(d){a&&(a=!1,h(d))}})}});var kx=Ne(Cx=>{"use strict";var dh=Cx;dh.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var Ff=new Array(64),Px=new Array(123);for(Gi=0;Gi<64;)Px[Ff[Gi]=Gi<26?Gi+65:Gi<52?Gi+71:Gi<62?Gi-4:Gi-59|43]=Gi++;var Gi;dh.encode=function(t,r,n){for(var o=null,a=[],f=0,u=0,h;r<n;){var d=t[r++];switch(u){case 0:a[f++]=Ff[d>>2],h=(d&3)<<4,u=1;break;case 1:a[f++]=Ff[h|d>>4],h=(d&15)<<2,u=2;break;case 2:a[f++]=Ff[h|d>>6],a[f++]=Ff[d&63],u=0;break}f>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),f=0)}return u&&(a[f++]=Ff[h],a[f++]=61,u===1&&(a[f++]=61)),o?(f&&o.push(String.fromCharCode.apply(String,a.slice(0,f))),o.join("")):String.fromCharCode.apply(String,a.slice(0,f))};var Sx="invalid encoding";dh.decode=function(t,r,n){for(var o=n,a=0,f,u=0;u<t.length;){var h=t.charCodeAt(u++);if(h===61&&a>1)break;if((h=Px[h])===void 0)throw Error(Sx);switch(a){case 0:f=h,a=1;break;case 1:r[n++]=f<<2|(h&48)>>4,f=h,a=2;break;case 2:r[n++]=(f&15)<<4|(h&60)>>2,f=h,a=3;break;case 3:r[n++]=(f&3)<<6|h,a=0;break}}if(a===1)throw Error(Sx);return n-o};dh.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var Tx=Ne((sR,Ix)=>{"use strict";Ix.exports=mh;function mh(){this._listeners={}}mh.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};mh.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};mh.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this}});var Ox=Ne((aR,Mx)=>{"use strict";Mx.exports=Fx(Fx);function Fx(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function o(h,d,v){t[0]=h,d[v]=r[0],d[v+1]=r[1],d[v+2]=r[2],d[v+3]=r[3]}function a(h,d,v){t[0]=h,d[v]=r[3],d[v+1]=r[2],d[v+2]=r[1],d[v+3]=r[0]}e.writeFloatLE=n?o:a,e.writeFloatBE=n?a:o;function f(h,d){return r[0]=h[d],r[1]=h[d+1],r[2]=h[d+2],r[3]=h[d+3],t[0]}function u(h,d){return r[3]=h[d],r[2]=h[d+1],r[1]=h[d+2],r[0]=h[d+3],t[0]}e.readFloatLE=n?f:u,e.readFloatBE=n?u:f}():function(){function t(n,o,a,f){var u=o<0?1:0;if(u&&(o=-o),o===0)n(1/o>0?0:2147483648,a,f);else if(isNaN(o))n(2143289344,a,f);else if(o>34028234663852886e22)n((u<<31|2139095040)>>>0,a,f);else if(o<11754943508222875e-54)n((u<<31|Math.round(o/1401298464324817e-60))>>>0,a,f);else{var h=Math.floor(Math.log(o)/Math.LN2),d=Math.round(o*Math.pow(2,-h)*8388608)&8388607;n((u<<31|h+127<<23|d)>>>0,a,f)}}e.writeFloatLE=t.bind(null,Bx),e.writeFloatBE=t.bind(null,Dx);function r(n,o,a){var f=n(o,a),u=(f>>31)*2+1,h=f>>>23&255,d=f&8388607;return h===255?d?NaN:u*(1/0):h===0?u*1401298464324817e-60*d:u*Math.pow(2,h-150)*(d+8388608)}e.readFloatLE=r.bind(null,Lx),e.readFloatBE=r.bind(null,Nx)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function o(h,d,v){t[0]=h,d[v]=r[0],d[v+1]=r[1],d[v+2]=r[2],d[v+3]=r[3],d[v+4]=r[4],d[v+5]=r[5],d[v+6]=r[6],d[v+7]=r[7]}function a(h,d,v){t[0]=h,d[v]=r[7],d[v+1]=r[6],d[v+2]=r[5],d[v+3]=r[4],d[v+4]=r[3],d[v+5]=r[2],d[v+6]=r[1],d[v+7]=r[0]}e.writeDoubleLE=n?o:a,e.writeDoubleBE=n?a:o;function f(h,d){return r[0]=h[d],r[1]=h[d+1],r[2]=h[d+2],r[3]=h[d+3],r[4]=h[d+4],r[5]=h[d+5],r[6]=h[d+6],r[7]=h[d+7],t[0]}function u(h,d){return r[7]=h[d],r[6]=h[d+1],r[5]=h[d+2],r[4]=h[d+3],r[3]=h[d+4],r[2]=h[d+5],r[1]=h[d+6],r[0]=h[d+7],t[0]}e.readDoubleLE=n?f:u,e.readDoubleBE=n?u:f}():function(){function t(n,o,a,f,u,h){var d=f<0?1:0;if(d&&(f=-f),f===0)n(0,u,h+o),n(1/f>0?0:2147483648,u,h+a);else if(isNaN(f))n(0,u,h+o),n(2146959360,u,h+a);else if(f>17976931348623157e292)n(0,u,h+o),n((d<<31|2146435072)>>>0,u,h+a);else{var v;if(f<22250738585072014e-324)v=f/5e-324,n(v>>>0,u,h+o),n((d<<31|v/4294967296)>>>0,u,h+a);else{var P=Math.floor(Math.log(f)/Math.LN2);P===1024&&(P=1023),v=f*Math.pow(2,-P),n(v*4503599627370496>>>0,u,h+o),n((d<<31|P+1023<<20|v*1048576&1048575)>>>0,u,h+a)}}}e.writeDoubleLE=t.bind(null,Bx,0,4),e.writeDoubleBE=t.bind(null,Dx,4,0);function r(n,o,a,f,u){var h=n(f,u+o),d=n(f,u+a),v=(d>>31)*2+1,P=d>>>20&2047,I=4294967296*(d&1048575)+h;return P===2047?I?NaN:v*(1/0):P===0?v*5e-324*I:v*Math.pow(2,P-1075)*(I+4503599627370496)}e.readDoubleLE=r.bind(null,Lx,0,4),e.readDoubleBE=r.bind(null,Nx,4,0)}(),e}function Bx(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Dx(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function Lx(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function Nx(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var Rx=Ne((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var zx=Ne(Ux=>{"use strict";var Um=Ux;Um.length=function(t){for(var r=0,n=0,o=0;o<t.length;++o)n=t.charCodeAt(o),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(t.charCodeAt(o+1)&64512)===56320?(++o,r+=4):r+=3;return r};Um.read=function(t,r,n){var o=n-r;if(o<1)return"";for(var a=null,f=[],u=0,h;r<n;)h=t[r++],h<128?f[u++]=h:h>191&&h<224?f[u++]=(h&31)<<6|t[r++]&63:h>239&&h<365?(h=((h&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,f[u++]=55296+(h>>10),f[u++]=56320+(h&1023)):f[u++]=(h&15)<<12|(t[r++]&63)<<6|t[r++]&63,u>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,f)),u=0);return a?(u&&a.push(String.fromCharCode.apply(String,f.slice(0,u))),a.join("")):String.fromCharCode.apply(String,f.slice(0,u))};Um.write=function(t,r,n){for(var o=n,a,f,u=0;u<t.length;++u)a=t.charCodeAt(u),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)===55296&&((f=t.charCodeAt(u+1))&64512)===56320?(a=65536+((a&1023)<<10)+(f&1023),++u,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128);return n-o}});var Hx=Ne((uR,Kx)=>{"use strict";Kx.exports=HI;function HI(e,t,r){var n=r||8192,o=n>>>1,a=null,f=n;return function(h){if(h<1||h>o)return e(h);f+h>n&&(a=e(n),f=0);var d=t.call(a,f,f+=h);return f&7&&(f=(f|7)+1),d}}});var jx=Ne((cR,$x)=>{"use strict";$x.exports=Nr;var Qu=js();function Nr(e,t){this.lo=e>>>0,this.hi=t>>>0}var Ca=Nr.zero=new Nr(0,0);Ca.toNumber=function(){return 0};Ca.zzEncode=Ca.zzDecode=function(){return this};Ca.length=function(){return 1};var $I=Nr.zeroHash="\0\0\0\0\0\0\0\0";Nr.fromNumber=function(t){if(t===0)return Ca;var r=t<0;r&&(t=-t);var n=t>>>0,o=(t-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new Nr(n,o)};Nr.from=function(t){if(typeof t=="number")return Nr.fromNumber(t);if(Qu.isString(t))if(Qu.Long)t=Qu.Long.fromString(t);else return Nr.fromNumber(parseInt(t,10));return t.low||t.high?new Nr(t.low>>>0,t.high>>>0):Ca};Nr.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Nr.prototype.toLong=function(t){return Qu.Long?new Qu.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var $s=String.prototype.charCodeAt;Nr.fromHash=function(t){return t===$I?Ca:new Nr(($s.call(t,0)|$s.call(t,1)<<8|$s.call(t,2)<<16|$s.call(t,3)<<24)>>>0,($s.call(t,4)|$s.call(t,5)<<8|$s.call(t,6)<<16|$s.call(t,7)<<24)>>>0)};Nr.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Nr.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};Nr.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};Nr.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var js=Ne(zm=>{"use strict";var Ke=zm;Ke.asPromise=Ex();Ke.base64=kx();Ke.EventEmitter=Tx();Ke.float=Ox();Ke.inquire=Rx();Ke.utf8=zx();Ke.pool=Hx();Ke.LongBits=jx();Ke.isNode=Boolean(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);Ke.global=Ke.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||zm;Ke.emptyArray=Object.freeze?Object.freeze([]):[];Ke.emptyObject=Object.freeze?Object.freeze({}):{};Ke.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};Ke.isString=function(t){return typeof t=="string"||t instanceof String};Ke.isObject=function(t){return t&&typeof t=="object"};Ke.isset=Ke.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Ke.Buffer=function(){try{var e=Ke.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();Ke._Buffer_from=null;Ke._Buffer_allocUnsafe=null;Ke.newBuffer=function(t){return typeof t=="number"?Ke.Buffer?Ke._Buffer_allocUnsafe(t):new Ke.Array(t):Ke.Buffer?Ke._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};Ke.Array=typeof Uint8Array<"u"?Uint8Array:Array;Ke.Long=Ke.global.dcodeIO&&Ke.global.dcodeIO.Long||Ke.global.Long||Ke.inquire("long");Ke.key2Re=/^true|false|0|1$/;Ke.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Ke.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Ke.longToHash=function(t){return t?Ke.LongBits.from(t).toHash():Ke.LongBits.zeroHash};Ke.longFromHash=function(t,r){var n=Ke.LongBits.fromHash(t);return Ke.Long?Ke.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function qx(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)(e[n[o]]===void 0||!r)&&(e[n[o]]=t[n[o]]);return e}Ke.merge=qx;Ke.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function Wx(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&qx(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}Ke.newError=Wx;Ke.ProtocolError=Wx("ProtocolError");Ke.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var o=Object.keys(this),a=o.length-1;a>-1;--a)if(r[o[a]]===1&&this[o[a]]!==void 0&&this[o[a]]!==null)return o[a]}};Ke.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};Ke.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Ke._configure=function(){var e=Ke.Buffer;if(!e){Ke._Buffer_from=Ke._Buffer_allocUnsafe=null;return}Ke._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},Ke._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var Gm=Ne((hR,Jx)=>{"use strict";Jx.exports=Ct;var vi=js(),Km,yh=vi.LongBits,Gx=vi.base64,Vx=vi.utf8;function ec(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function $m(){}function jI(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Ct(){this.len=0,this.head=new ec($m,0,0),this.tail=this.head,this.states=null}var Yx=function(){return vi.Buffer?function(){return(Ct.create=function(){return new Km})()}:function(){return new Ct}};Ct.create=Yx();Ct.alloc=function(t){return new vi.Array(t)};vi.Array!==Array&&(Ct.alloc=vi.pool(Ct.alloc,vi.Array.prototype.subarray));Ct.prototype._push=function(t,r,n){return this.tail=this.tail.next=new ec(t,r,n),this.len+=r,this};function jm(e,t,r){t[r]=e&255}function qI(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function qm(e,t){this.len=e,this.next=void 0,this.val=t}qm.prototype=Object.create(ec.prototype);qm.prototype.fn=qI;Ct.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new qm((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};Ct.prototype.int32=function(t){return t<0?this._push(Wm,10,yh.fromNumber(t)):this.uint32(t)};Ct.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Wm(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}Ct.prototype.uint64=function(t){var r=yh.from(t);return this._push(Wm,r.length(),r)};Ct.prototype.int64=Ct.prototype.uint64;Ct.prototype.sint64=function(t){var r=yh.from(t).zzEncode();return this._push(Wm,r.length(),r)};Ct.prototype.bool=function(t){return this._push(jm,1,t?1:0)};function Hm(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Ct.prototype.fixed32=function(t){return this._push(Hm,4,t>>>0)};Ct.prototype.sfixed32=Ct.prototype.fixed32;Ct.prototype.fixed64=function(t){var r=yh.from(t);return this._push(Hm,4,r.lo)._push(Hm,4,r.hi)};Ct.prototype.sfixed64=Ct.prototype.fixed64;Ct.prototype.float=function(t){return this._push(vi.float.writeFloatLE,4,t)};Ct.prototype.double=function(t){return this._push(vi.float.writeDoubleLE,8,t)};var WI=vi.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var o=0;o<t.length;++o)r[n+o]=t[o]};Ct.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(jm,1,0);if(vi.isString(t)){var n=Ct.alloc(r=Gx.length(t));Gx.decode(t,n,0),t=n}return this.uint32(r)._push(WI,r,t)};Ct.prototype.string=function(t){var r=Vx.length(t);return r?this.uint32(r)._push(Vx.write,r,t):this._push(jm,1,0)};Ct.prototype.fork=function(){return this.states=new jI(this),this.head=this.tail=new ec($m,0,0),this.len=0,this};Ct.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ec($m,0,0),this.len=0),this};Ct.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};Ct.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};Ct._configure=function(e){Km=e,Ct.create=Yx(),Km._configure()}});var Qx=Ne((pR,Zx)=>{"use strict";Zx.exports=vo;var Xx=Gm();(vo.prototype=Object.create(Xx.prototype)).constructor=vo;var qs=js();function vo(){Xx.call(this)}vo._configure=function(){vo.alloc=qs._Buffer_allocUnsafe,vo.writeBytesBuffer=qs.Buffer&&qs.Buffer.prototype instanceof Uint8Array&&qs.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var o=0;o<t.length;)r[n++]=t[o++]}};vo.prototype.bytes=function(t){qs.isString(t)&&(t=qs._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(vo.writeBytesBuffer,r,t),this};function GI(e,t,r){e.length<40?qs.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}vo.prototype.string=function(t){var r=qs.Buffer.byteLength(t);return this.uint32(r),r&&this._push(GI,r,t),this};vo._configure()});var Jm=Ne((dR,i_)=>{"use strict";i_.exports=gr;var xo=js(),Ym,r_=xo.LongBits,VI=xo.utf8;function Vi(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function gr(e){this.buf=e,this.pos=0,this.len=e.length}var e_=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new gr(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new gr(t);throw Error("illegal buffer")},n_=function(){return xo.Buffer?function(r){return(gr.create=function(o){return xo.Buffer.isBuffer(o)?new Ym(o):e_(o)})(r)}:e_};gr.create=n_();gr.prototype._slice=xo.Array.prototype.subarray||xo.Array.prototype.slice;gr.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Vi(this,10);return t}}();gr.prototype.int32=function(){return this.uint32()|0};gr.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Vm(){var e=new r_(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Vi(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Vi(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}gr.prototype.bool=function(){return this.uint32()!==0};function gh(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}gr.prototype.fixed32=function(){if(this.pos+4>this.len)throw Vi(this,4);return gh(this.buf,this.pos+=4)};gr.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Vi(this,4);return gh(this.buf,this.pos+=4)|0};function t_(){if(this.pos+8>this.len)throw Vi(this,8);return new r_(gh(this.buf,this.pos+=4),gh(this.buf,this.pos+=4))}gr.prototype.float=function(){if(this.pos+4>this.len)throw Vi(this,4);var t=xo.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};gr.prototype.double=function(){if(this.pos+8>this.len)throw Vi(this,4);var t=xo.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};gr.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Vi(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};gr.prototype.string=function(){var t=this.bytes();return VI.read(t,0,t.length)};gr.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Vi(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Vi(this);while(this.buf[this.pos++]&128);return this};gr.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};gr._configure=function(e){Ym=e,gr.create=n_(),Ym._configure();var t=xo.Long?"toLong":"toNumber";xo.merge(gr.prototype,{int64:function(){return Vm.call(this)[t](!1)},uint64:function(){return Vm.call(this)[t](!0)},sint64:function(){return Vm.call(this).zzDecode()[t](!1)},fixed64:function(){return t_.call(this)[t](!0)},sfixed64:function(){return t_.call(this)[t](!1)}})}});var f_=Ne((mR,a_)=>{"use strict";a_.exports=ka;var s_=Jm();(ka.prototype=Object.create(s_.prototype)).constructor=ka;var o_=js();function ka(e){s_.call(this,e)}ka._configure=function(){o_.Buffer&&(ka.prototype._slice=o_.Buffer.prototype.slice)};ka.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};ka._configure()});var c_=Ne((yR,u_)=>{"use strict";u_.exports=tc;var Xm=js();(tc.prototype=Object.create(Xm.EventEmitter.prototype)).constructor=tc;function tc(e,t,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");Xm.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}tc.prototype.rpcCall=function e(t,r,n,o,a){if(!o)throw TypeError("request must be specified");var f=this;if(!a)return Xm.asPromise(e,f,t,r,n,o);if(!f.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return f.rpcImpl(t,r[f.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(h,d){if(h)return f.emit("error",h,t),a(h);if(d===null){f.end(!0);return}if(!(d instanceof n))try{d=n[f.responseDelimited?"decodeDelimited":"decode"](d)}catch(v){return f.emit("error",v,t),a(v)}return f.emit("data",d,t),a(null,d)})}catch(u){f.emit("error",u,t),setTimeout(function(){a(u)},0);return}};tc.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var h_=Ne(l_=>{"use strict";var YI=l_;YI.Service=c_()});var d_=Ne((wR,p_)=>{"use strict";p_.exports={}});var g_=Ne(y_=>{"use strict";var En=y_;En.build="minimal";En.Writer=Gm();En.BufferWriter=Qx();En.Reader=Jm();En.BufferReader=f_();En.util=js();En.rpc=h_();En.roots=d_();En.configure=m_;function m_(){En.util._configure(),En.Writer._configure(En.BufferWriter),En.Reader._configure(En.BufferReader)}m_()});var v_=Ne((xR,w_)=>{"use strict";w_.exports=g_()});var E_=Ne((PR,A_)=>{"use strict";function ZI(e){let[t,r]=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:o=>{n.push(o)},next:()=>n.length?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}A_.exports=ZI});var H_=Ne((K_,kh)=>{(function(e){var t={36:n(Math.pow(36,5)),16:n(Math.pow(16,7)),10:n(Math.pow(10,9)),2:n(Math.pow(2,30))},r={36:n(36),16:n(16),10:n(10),2:n(2)};function n(u,h){if(!(this instanceof n))return new n(u,h);if(this._low=0,this._high=0,this.remainder=null,typeof h>"u")return a.call(this,u);if(typeof u=="string")return f.call(this,u,h);o.call(this,u,h)}function o(u,h){return this._low=u|0,this._high=h|0,this}n.prototype.fromBits=o;function a(u){return this._low=u&65535,this._high=u>>>16,this}n.prototype.fromNumber=a;function f(u,h){var d=parseInt(u,h||10);return this._low=d&65535,this._high=d>>>16,this}n.prototype.fromString=f,n.prototype.toNumber=function(){return this._high*65536+this._low},n.prototype.toString=function(u){return this.toNumber().toString(u||10)},n.prototype.add=function(u){var h=this._low+u._low,d=h>>>16;return d+=this._high+u._high,this._low=h&65535,this._high=d&65535,this},n.prototype.subtract=function(u){return this.add(u.clone().negate())},n.prototype.multiply=function(u){var h=this._high,d=this._low,v=u._high,P=u._low,I,R;return R=d*P,I=R>>>16,I+=h*P,I&=65535,I+=d*v,this._low=R&65535,this._high=I&65535,this},n.prototype.div=function(u){if(u._low==0&&u._high==0)throw Error("division by zero");if(u._high==0&&u._low==1)return this.remainder=new n(0),this;if(u.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(u))return this.remainder=new n(0),this._low=1,this._high=0,this;for(var h=u.clone(),d=-1;!this.lt(h);)h.shiftLeft(1,!0),d++;for(this.remainder=this.clone(),this._low=0,this._high=0;d>=0;d--)h.shiftRight(1),this.remainder.lt(h)||(this.remainder.subtract(h),d>=16?this._high|=1<<d-16:this._low|=1<<d);return this},n.prototype.negate=function(){var u=(~this._low&65535)+1;return this._low=u&65535,this._high=~this._high+(u>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(u){return this._low==u._low&&this._high==u._high},n.prototype.greaterThan=n.prototype.gt=function(u){return this._high>u._high?!0:this._high<u._high?!1:this._low>u._low},n.prototype.lessThan=n.prototype.lt=function(u){return this._high<u._high?!0:this._high>u._high?!1:this._low<u._low},n.prototype.or=function(u){return this._low|=u._low,this._high|=u._high,this},n.prototype.and=function(u){return this._low&=u._low,this._high&=u._high,this},n.prototype.not=function(){return this._low=~this._low&65535,this._high=~this._high&65535,this},n.prototype.xor=function(u){return this._low^=u._low,this._high^=u._high,this},n.prototype.shiftRight=n.prototype.shiftr=function(u){return u>16?(this._low=this._high>>u-16,this._high=0):u==16?(this._low=this._high,this._high=0):(this._low=this._low>>u|this._high<<16-u&65535,this._high>>=u),this},n.prototype.shiftLeft=n.prototype.shiftl=function(u,h){return u>16?(this._high=this._low<<u-16,this._low=0,h||(this._high&=65535)):u==16?(this._high=this._low,this._low=0):(this._high=this._high<<u|this._low>>16-u,this._low=this._low<<u&65535,h||(this._high&=65535)),this},n.prototype.rotateLeft=n.prototype.rotl=function(u){var h=this._high<<16|this._low;return h=h<<u|h>>>32-u,this._low=h&65535,this._high=h>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(u){var h=this._high<<16|this._low;return h=h>>>u|h<<32-u,this._low=h&65535,this._high=h>>>16,this},n.prototype.clone=function(){return new n(this._low,this._high)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof kh<"u"&&kh.exports?kh.exports=n:e.UINT32=n})(K_)});var j_=Ne(($_,Ih)=>{(function(e){var t={16:n(Math.pow(16,5)),10:n(Math.pow(10,5)),2:n(Math.pow(2,5))},r={16:n(16),10:n(10),2:n(2)};function n(u,h,d,v){if(!(this instanceof n))return new n(u,h,d,v);if(this.remainder=null,typeof u=="string")return f.call(this,u,h);if(typeof h>"u")return a.call(this,u);o.apply(this,arguments)}function o(u,h,d,v){return typeof d>"u"?(this._a00=u&65535,this._a16=u>>>16,this._a32=h&65535,this._a48=h>>>16,this):(this._a00=u|0,this._a16=h|0,this._a32=d|0,this._a48=v|0,this)}n.prototype.fromBits=o;function a(u){return this._a00=u&65535,this._a16=u>>>16,this._a32=0,this._a48=0,this}n.prototype.fromNumber=a;function f(u,h){h=h||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var d=t[h]||new n(Math.pow(h,5)),v=0,P=u.length;v<P;v+=5){var I=Math.min(5,P-v),R=parseInt(u.slice(v,v+I),h);this.multiply(I<5?new n(Math.pow(h,I)):d).add(new n(R))}return this}n.prototype.fromString=f,n.prototype.toNumber=function(){return this._a16*65536+this._a00},n.prototype.toString=function(u){u=u||10;var h=r[u]||new n(u);if(!this.gt(h))return this.toNumber().toString(u);for(var d=this.clone(),v=new Array(64),P=63;P>=0&&(d.div(h),v[P]=d.remainder.toNumber().toString(u),!!d.gt(h));P--);return v[P-1]=d.toNumber().toString(u),v.join("")},n.prototype.add=function(u){var h=this._a00+u._a00,d=h>>>16;d+=this._a16+u._a16;var v=d>>>16;v+=this._a32+u._a32;var P=v>>>16;return P+=this._a48+u._a48,this._a00=h&65535,this._a16=d&65535,this._a32=v&65535,this._a48=P&65535,this},n.prototype.subtract=function(u){return this.add(u.clone().negate())},n.prototype.multiply=function(u){var h=this._a00,d=this._a16,v=this._a32,P=this._a48,I=u._a00,R=u._a16,ee=u._a32,ce=u._a48,De=h*I,ge=De>>>16;ge+=h*R;var Oe=ge>>>16;ge&=65535,ge+=d*I,Oe+=ge>>>16,Oe+=h*ee;var ae=Oe>>>16;return Oe&=65535,Oe+=d*R,ae+=Oe>>>16,Oe&=65535,Oe+=v*I,ae+=Oe>>>16,ae+=h*ce,ae&=65535,ae+=d*ee,ae&=65535,ae+=v*R,ae&=65535,ae+=P*I,this._a00=De&65535,this._a16=ge&65535,this._a32=Oe&65535,this._a48=ae&65535,this},n.prototype.div=function(u){if(u._a16==0&&u._a32==0&&u._a48==0){if(u._a00==0)throw Error("division by zero");if(u._a00==1)return this.remainder=new n(0),this}if(u.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(u))return this.remainder=new n(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var h=u.clone(),d=-1;!this.lt(h);)h.shiftLeft(1,!0),d++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;d>=0;d--)h.shiftRight(1),this.remainder.lt(h)||(this.remainder.subtract(h),d>=48?this._a48|=1<<d-48:d>=32?this._a32|=1<<d-32:d>=16?this._a16|=1<<d-16:this._a00|=1<<d);return this},n.prototype.negate=function(){var u=(~this._a00&65535)+1;return this._a00=u&65535,u=(~this._a16&65535)+(u>>>16),this._a16=u&65535,u=(~this._a32&65535)+(u>>>16),this._a32=u&65535,this._a48=~this._a48+(u>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(u){return this._a48==u._a48&&this._a00==u._a00&&this._a32==u._a32&&this._a16==u._a16},n.prototype.greaterThan=n.prototype.gt=function(u){return this._a48>u._a48?!0:this._a48<u._a48?!1:this._a32>u._a32?!0:this._a32<u._a32?!1:this._a16>u._a16?!0:this._a16<u._a16?!1:this._a00>u._a00},n.prototype.lessThan=n.prototype.lt=function(u){return this._a48<u._a48?!0:this._a48>u._a48?!1:this._a32<u._a32?!0:this._a32>u._a32?!1:this._a16<u._a16?!0:this._a16>u._a16?!1:this._a00<u._a00},n.prototype.or=function(u){return this._a00|=u._a00,this._a16|=u._a16,this._a32|=u._a32,this._a48|=u._a48,this},n.prototype.and=function(u){return this._a00&=u._a00,this._a16&=u._a16,this._a32&=u._a32,this._a48&=u._a48,this},n.prototype.xor=function(u){return this._a00^=u._a00,this._a16^=u._a16,this._a32^=u._a32,this._a48^=u._a48,this},n.prototype.not=function(){return this._a00=~this._a00&65535,this._a16=~this._a16&65535,this._a32=~this._a32&65535,this._a48=~this._a48&65535,this},n.prototype.shiftRight=n.prototype.shiftr=function(u){return u%=64,u>=48?(this._a00=this._a48>>u-48,this._a16=0,this._a32=0,this._a48=0):u>=32?(u-=32,this._a00=(this._a32>>u|this._a48<<16-u)&65535,this._a16=this._a48>>u&65535,this._a32=0,this._a48=0):u>=16?(u-=16,this._a00=(this._a16>>u|this._a32<<16-u)&65535,this._a16=(this._a32>>u|this._a48<<16-u)&65535,this._a32=this._a48>>u&65535,this._a48=0):(this._a00=(this._a00>>u|this._a16<<16-u)&65535,this._a16=(this._a16>>u|this._a32<<16-u)&65535,this._a32=(this._a32>>u|this._a48<<16-u)&65535,this._a48=this._a48>>u&65535),this},n.prototype.shiftLeft=n.prototype.shiftl=function(u,h){return u%=64,u>=48?(this._a48=this._a00<<u-48,this._a32=0,this._a16=0,this._a00=0):u>=32?(u-=32,this._a48=this._a16<<u|this._a00>>16-u,this._a32=this._a00<<u&65535,this._a16=0,this._a00=0):u>=16?(u-=16,this._a48=this._a32<<u|this._a16>>16-u,this._a32=(this._a16<<u|this._a00>>16-u)&65535,this._a16=this._a00<<u&65535,this._a00=0):(this._a48=this._a48<<u|this._a32>>16-u,this._a32=(this._a32<<u|this._a16>>16-u)&65535,this._a16=(this._a16<<u|this._a00>>16-u)&65535,this._a00=this._a00<<u&65535),h||(this._a48&=65535),this},n.prototype.rotateLeft=n.prototype.rotl=function(u){if(u%=64,u==0)return this;if(u>=32){var h=this._a00;if(this._a00=this._a32,this._a32=h,h=this._a48,this._a48=this._a16,this._a16=h,u==32)return this;u-=32}var d=this._a48<<16|this._a32,v=this._a16<<16|this._a00,P=d<<u|v>>>32-u,I=v<<u|d>>>32-u;return this._a00=I&65535,this._a16=I>>>16,this._a32=P&65535,this._a48=P>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(u){if(u%=64,u==0)return this;if(u>=32){var h=this._a00;if(this._a00=this._a32,this._a32=h,h=this._a48,this._a48=this._a16,this._a16=h,u==32)return this;u-=32}var d=this._a48<<16|this._a32,v=this._a16<<16|this._a00,P=d>>>u|v<<32-u,I=v>>>u|d<<32-u;return this._a00=I&65535,this._a16=I>>>16,this._a32=P&65535,this._a48=P>>>16,this},n.prototype.clone=function(){return new n(this._a00,this._a16,this._a32,this._a48)},typeof define<"u"&&define.amd?define([],function(){return n}):typeof Ih<"u"&&Ih.exports?Ih.exports=n:e.UINT64=n})($_)});var gy=Ne(yy=>{yy.UINT32=H_();yy.UINT64=j_()});var Y_=Ne((wU,V_)=>{var Xo=gy().UINT32;Xo.prototype.xxh_update=function(e,t){var r=uc._low,n=uc._high,o,a;a=e*r,o=a>>>16,o+=t*r,o&=65535,o+=e*n;var f=this._low+(a&65535),u=f>>>16;u+=this._high+(o&65535);var h=u<<16|f&65535;h=h<<13|h>>>19,f=h&65535,u=h>>>16,r=fc._low,n=fc._high,a=f*r,o=a>>>16,o+=u*r,o&=65535,o+=f*n,this._low=a&65535,this._high=o&65535};var fc=Xo("2654435761"),uc=Xo("2246822519"),q_=Xo("3266489917"),PT=Xo("668265263"),W_=Xo("374761393");function CT(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e.charCodeAt(r);o<128?t.push(o):o<2048?t.push(192|o>>6,128|o&63):o<55296||o>=57344?t.push(224|o>>12,128|o>>6&63,128|o&63):(r++,o=65536+((o&1023)<<10|e.charCodeAt(r)&1023),t.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63))}return new Uint8Array(t)}function Da(){if(arguments.length==2)return new Da(arguments[1]).update(arguments[0]).digest();if(!(this instanceof Da))return new Da(arguments[0]);G_.call(this,arguments[0])}function G_(e){return this.seed=e instanceof Xo?e.clone():Xo(e),this.v1=this.seed.clone().add(fc).add(uc),this.v2=this.seed.clone().add(uc),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(fc),this.total_len=0,this.memsize=0,this.memory=null,this}Da.prototype.init=G_;Da.prototype.update=function(e){var t=typeof e=="string",r;t&&(e=CT(e),t=!1,r=!0),typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer&&(r=!0,e=new Uint8Array(e));var n=0,o=e.length,a=n+o;if(o==0)return this;if(this.total_len+=o,this.memsize==0&&(t?this.memory="":r?this.memory=new Uint8Array(16):this.memory=new Buffer(16)),this.memsize+o<16)return t?this.memory+=e:r?this.memory.set(e.subarray(0,o),this.memsize):e.copy(this.memory,this.memsize,0,o),this.memsize+=o,this;if(this.memsize>0){t?this.memory+=e.slice(0,16-this.memsize):r?this.memory.set(e.subarray(0,16-this.memsize),this.memsize):e.copy(this.memory,this.memsize,0,16-this.memsize);var f=0;t?(this.v1.xxh_update(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2)),f+=4,this.v2.xxh_update(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2)),f+=4,this.v3.xxh_update(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2)),f+=4,this.v4.xxh_update(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2))):(this.v1.xxh_update(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2]),f+=4,this.v2.xxh_update(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2]),f+=4,this.v3.xxh_update(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2]),f+=4,this.v4.xxh_update(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2])),n+=16-this.memsize,this.memsize=0,t&&(this.memory="")}if(n<=a-16){var u=a-16;do t?(this.v1.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v2.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v3.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v4.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2))):(this.v1.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v2.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v3.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v4.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2])),n+=4;while(n<=u)}return n<a&&(t?this.memory+=e.slice(n):r?this.memory.set(e.subarray(n,a),this.memsize):e.copy(this.memory,this.memsize,n,a),this.memsize=a-n),this};Da.prototype.digest=function(){var e=this.memory,t=typeof e=="string",r=0,n=this.memsize,o,a,f=new Xo;for(this.total_len>=16?o=this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):o=this.seed.clone().add(W_),o.add(f.fromNumber(this.total_len));r<=n-4;)t?f.fromBits(e.charCodeAt(r+1)<<8|e.charCodeAt(r),e.charCodeAt(r+3)<<8|e.charCodeAt(r+2)):f.fromBits(e[r+1]<<8|e[r],e[r+3]<<8|e[r+2]),o.add(f.multiply(q_)).rotl(17).multiply(PT),r+=4;for(;r<n;)f.fromBits(t?e.charCodeAt(r++):e[r++],0),o.add(f.multiply(W_)).rotl(11).multiply(fc);return a=o.clone().shiftRight(15),o.xor(a).multiply(uc),a=o.clone().shiftRight(13),o.xor(a).multiply(q_),a=o.clone().shiftRight(16),o.xor(a),this.init(this.seed),o};V_.exports=Da});var eb=Ne((vU,Q_)=>{var Zt=gy().UINT64,Nt=Zt("11400714785074694791"),Wt=Zt("14029467366897019727"),J_=Zt("1609587929392839161"),cc=Zt("9650029242287828579"),X_=Zt("2870177450012600261");function kT(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e.charCodeAt(r);o<128?t.push(o):o<2048?t.push(192|o>>6,128|o&63):o<55296||o>=57344?t.push(224|o>>12,128|o>>6&63,128|o&63):(r++,o=65536+((o&1023)<<10|e.charCodeAt(r)&1023),t.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63))}return new Uint8Array(t)}function La(){if(arguments.length==2)return new La(arguments[1]).update(arguments[0]).digest();if(!(this instanceof La))return new La(arguments[0]);Z_.call(this,arguments[0])}function Z_(e){return this.seed=e instanceof Zt?e.clone():Zt(e),this.v1=this.seed.clone().add(Nt).add(Wt),this.v2=this.seed.clone().add(Wt),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(Nt),this.total_len=0,this.memsize=0,this.memory=null,this}La.prototype.init=Z_;La.prototype.update=function(e){var t=typeof e=="string",r;t&&(e=kT(e),t=!1,r=!0),typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer&&(r=!0,e=new Uint8Array(e));var n=0,o=e.length,a=n+o;if(o==0)return this;if(this.total_len+=o,this.memsize==0&&(t?this.memory="":r?this.memory=new Uint8Array(32):this.memory=new Buffer(32)),this.memsize+o<32)return t?this.memory+=e:r?this.memory.set(e.subarray(0,o),this.memsize):e.copy(this.memory,this.memsize,0,o),this.memsize+=o,this;if(this.memsize>0){t?this.memory+=e.slice(0,32-this.memsize):r?this.memory.set(e.subarray(0,32-this.memsize),this.memsize):e.copy(this.memory,this.memsize,0,32-this.memsize);var f=0;if(t){var u;u=Zt(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v1.add(u.multiply(Wt)).rotl(31).multiply(Nt),f+=8,u=Zt(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v2.add(u.multiply(Wt)).rotl(31).multiply(Nt),f+=8,u=Zt(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v3.add(u.multiply(Wt)).rotl(31).multiply(Nt),f+=8,u=Zt(this.memory.charCodeAt(f+1)<<8|this.memory.charCodeAt(f),this.memory.charCodeAt(f+3)<<8|this.memory.charCodeAt(f+2),this.memory.charCodeAt(f+5)<<8|this.memory.charCodeAt(f+4),this.memory.charCodeAt(f+7)<<8|this.memory.charCodeAt(f+6)),this.v4.add(u.multiply(Wt)).rotl(31).multiply(Nt)}else{var u;u=Zt(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v1.add(u.multiply(Wt)).rotl(31).multiply(Nt),f+=8,u=Zt(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v2.add(u.multiply(Wt)).rotl(31).multiply(Nt),f+=8,u=Zt(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v3.add(u.multiply(Wt)).rotl(31).multiply(Nt),f+=8,u=Zt(this.memory[f+1]<<8|this.memory[f],this.memory[f+3]<<8|this.memory[f+2],this.memory[f+5]<<8|this.memory[f+4],this.memory[f+7]<<8|this.memory[f+6]),this.v4.add(u.multiply(Wt)).rotl(31).multiply(Nt)}n+=32-this.memsize,this.memsize=0,t&&(this.memory="")}if(n<=a-32){var h=a-32;do{if(t){var u;u=Zt(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v1.add(u.multiply(Wt)).rotl(31).multiply(Nt),n+=8,u=Zt(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v2.add(u.multiply(Wt)).rotl(31).multiply(Nt),n+=8,u=Zt(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v3.add(u.multiply(Wt)).rotl(31).multiply(Nt),n+=8,u=Zt(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v4.add(u.multiply(Wt)).rotl(31).multiply(Nt)}else{var u;u=Zt(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v1.add(u.multiply(Wt)).rotl(31).multiply(Nt),n+=8,u=Zt(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v2.add(u.multiply(Wt)).rotl(31).multiply(Nt),n+=8,u=Zt(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v3.add(u.multiply(Wt)).rotl(31).multiply(Nt),n+=8,u=Zt(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v4.add(u.multiply(Wt)).rotl(31).multiply(Nt)}n+=8}while(n<=h)}return n<a&&(t?this.memory+=e.slice(n):r?this.memory.set(e.subarray(n,a),this.memsize):e.copy(this.memory,this.memsize,n,a),this.memsize=a-n),this};La.prototype.digest=function(){var e=this.memory,t=typeof e=="string",r=0,n=this.memsize,o,a,f=new Zt;for(this.total_len>=32?(o=this.v1.clone().rotl(1),o.add(this.v2.clone().rotl(7)),o.add(this.v3.clone().rotl(12)),o.add(this.v4.clone().rotl(18)),o.xor(this.v1.multiply(Wt).rotl(31).multiply(Nt)),o.multiply(Nt).add(cc),o.xor(this.v2.multiply(Wt).rotl(31).multiply(Nt)),o.multiply(Nt).add(cc),o.xor(this.v3.multiply(Wt).rotl(31).multiply(Nt)),o.multiply(Nt).add(cc),o.xor(this.v4.multiply(Wt).rotl(31).multiply(Nt)),o.multiply(Nt).add(cc)):o=this.seed.clone().add(X_),o.add(f.fromNumber(this.total_len));r<=n-8;)t?f.fromBits(e.charCodeAt(r+1)<<8|e.charCodeAt(r),e.charCodeAt(r+3)<<8|e.charCodeAt(r+2),e.charCodeAt(r+5)<<8|e.charCodeAt(r+4),e.charCodeAt(r+7)<<8|e.charCodeAt(r+6)):f.fromBits(e[r+1]<<8|e[r],e[r+3]<<8|e[r+2],e[r+5]<<8|e[r+4],e[r+7]<<8|e[r+6]),f.multiply(Wt).rotl(31).multiply(Nt),o.xor(f).rotl(27).multiply(Nt).add(cc),r+=8;for(r+4<=n&&(t?f.fromBits(e.charCodeAt(r+1)<<8|e.charCodeAt(r),e.charCodeAt(r+3)<<8|e.charCodeAt(r+2),0,0):f.fromBits(e[r+1]<<8|e[r],e[r+3]<<8|e[r+2],0,0),o.xor(f.multiply(Nt)).rotl(23).multiply(Wt).add(J_),r+=4);r<n;)f.fromBits(t?e.charCodeAt(r++):e[r++],0,0,0),o.xor(f.multiply(X_)).rotl(11).multiply(Nt);return a=o.clone().shiftRight(33),o.xor(a).multiply(Wt),a=o.clone().shiftRight(29),o.xor(a).multiply(J_),a=o.clone().shiftRight(32),o.xor(a),this.init(this.seed),o};Q_.exports=La});var rb=Ne((xU,tb)=>{tb.exports={h32:Y_(),h64:eb()}});var ob=Ne(Th=>{"use strict";Th.byteLength=TT;Th.toByteArray=BT;Th.fromByteArray=NT;var bo=[],bi=[],IT=typeof Uint8Array<"u"?Uint8Array:Array,wy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Na=0,nb=wy.length;Na<nb;++Na)bo[Na]=wy[Na],bi[wy.charCodeAt(Na)]=Na;var Na,nb;bi["-".charCodeAt(0)]=62;bi["_".charCodeAt(0)]=63;function ib(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function TT(e){var t=ib(e),r=t[0],n=t[1];return(r+n)*3/4-n}function FT(e,t,r){return(t+r)*3/4-r}function BT(e){var t,r=ib(e),n=r[0],o=r[1],a=new IT(FT(e,n,o)),f=0,u=o>0?n-4:n,h;for(h=0;h<u;h+=4)t=bi[e.charCodeAt(h)]<<18|bi[e.charCodeAt(h+1)]<<12|bi[e.charCodeAt(h+2)]<<6|bi[e.charCodeAt(h+3)],a[f++]=t>>16&255,a[f++]=t>>8&255,a[f++]=t&255;return o===2&&(t=bi[e.charCodeAt(h)]<<2|bi[e.charCodeAt(h+1)]>>4,a[f++]=t&255),o===1&&(t=bi[e.charCodeAt(h)]<<10|bi[e.charCodeAt(h+1)]<<4|bi[e.charCodeAt(h+2)]>>2,a[f++]=t>>8&255,a[f++]=t&255),a}function DT(e){return bo[e>>18&63]+bo[e>>12&63]+bo[e>>6&63]+bo[e&63]}function LT(e,t,r){for(var n,o=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),o.push(DT(n));return o.join("")}function NT(e){for(var t,r=e.length,n=r%3,o=[],a=16383,f=0,u=r-n;f<u;f+=a)o.push(LT(e,f,f+a>u?u:f+a));return n===1?(t=e[r-1],o.push(bo[t>>2]+bo[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],o.push(bo[t>>10]+bo[t>>4&63]+bo[t<<2&63]+"=")),o.join("")}});var sb=Ne(vy=>{vy.read=function(e,t,r,n,o){var a,f,u=o*8-n-1,h=(1<<u)-1,d=h>>1,v=-7,P=r?o-1:0,I=r?-1:1,R=e[t+P];for(P+=I,a=R&(1<<-v)-1,R>>=-v,v+=u;v>0;a=a*256+e[t+P],P+=I,v-=8);for(f=a&(1<<-v)-1,a>>=-v,v+=n;v>0;f=f*256+e[t+P],P+=I,v-=8);if(a===0)a=1-d;else{if(a===h)return f?NaN:(R?-1:1)*(1/0);f=f+Math.pow(2,n),a=a-d}return(R?-1:1)*f*Math.pow(2,a-n)};vy.write=function(e,t,r,n,o,a){var f,u,h,d=a*8-o-1,v=(1<<d)-1,P=v>>1,I=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=n?0:a-1,ee=n?1:-1,ce=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,f=v):(f=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-f))<1&&(f--,h*=2),f+P>=1?t+=I/h:t+=I*Math.pow(2,1-P),t*h>=2&&(f++,h/=2),f+P>=v?(u=0,f=v):f+P>=1?(u=(t*h-1)*Math.pow(2,o),f=f+P):(u=t*Math.pow(2,P-1)*Math.pow(2,o),f=0));o>=8;e[r+R]=u&255,R+=ee,u/=256,o-=8);for(f=f<<o|u,d+=o;d>0;e[r+R]=f&255,R+=ee,f/=256,d-=8);e[r+R-ee]|=ce*128}});var Dh=Ne(Hf=>{"use strict";var xy=ob(),zf=sb(),ab=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Hf.Buffer=G;Hf.SlowBuffer=KT;Hf.INSPECT_MAX_BYTES=50;var Fh=2147483647;Hf.kMaxLength=Fh;G.TYPED_ARRAY_SUPPORT=MT();!G.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function MT(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(G.prototype,"parent",{enumerable:!0,get:function(){if(!!G.isBuffer(this))return this.buffer}});Object.defineProperty(G.prototype,"offset",{enumerable:!0,get:function(){if(!!G.isBuffer(this))return this.byteOffset}});function Zo(e){if(e>Fh)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,G.prototype),t}function G(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ey(e)}return lb(e,t,r)}G.poolSize=8192;function lb(e,t,r){if(typeof e=="string")return RT(e,t);if(ArrayBuffer.isView(e))return UT(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Ao(e,ArrayBuffer)||e&&Ao(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ao(e,SharedArrayBuffer)||e&&Ao(e.buffer,SharedArrayBuffer)))return by(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return G.from(n,t,r);let o=zT(e);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return G.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}G.from=function(e,t,r){return lb(e,t,r)};Object.setPrototypeOf(G.prototype,Uint8Array.prototype);Object.setPrototypeOf(G,Uint8Array);function hb(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function OT(e,t,r){return hb(e),e<=0?Zo(e):t!==void 0?typeof r=="string"?Zo(e).fill(t,r):Zo(e).fill(t):Zo(e)}G.alloc=function(e,t,r){return OT(e,t,r)};function Ey(e){return hb(e),Zo(e<0?0:Sy(e)|0)}G.allocUnsafe=function(e){return Ey(e)};G.allocUnsafeSlow=function(e){return Ey(e)};function RT(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!G.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=pb(e,t)|0,n=Zo(r),o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}function _y(e){let t=e.length<0?0:Sy(e.length)|0,r=Zo(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function UT(e){if(Ao(e,Uint8Array)){let t=new Uint8Array(e);return by(t.buffer,t.byteOffset,t.byteLength)}return _y(e)}function by(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,G.prototype),n}function zT(e){if(G.isBuffer(e)){let t=Sy(e.length)|0,r=Zo(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||Cy(e.length)?Zo(0):_y(e);if(e.type==="Buffer"&&Array.isArray(e.data))return _y(e.data)}function Sy(e){if(e>=Fh)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Fh.toString(16)+" bytes");return e|0}function KT(e){return+e!=e&&(e=0),G.alloc(+e)}G.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==G.prototype};G.compare=function(t,r){if(Ao(t,Uint8Array)&&(t=G.from(t,t.offset,t.byteLength)),Ao(r,Uint8Array)&&(r=G.from(r,r.offset,r.byteLength)),!G.isBuffer(t)||!G.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,o=r.length;for(let a=0,f=Math.min(n,o);a<f;++a)if(t[a]!==r[a]){n=t[a],o=r[a];break}return n<o?-1:o<n?1:0};G.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};G.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return G.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let o=G.allocUnsafe(r),a=0;for(n=0;n<t.length;++n){let f=t[n];if(Ao(f,Uint8Array))a+f.length>o.length?(G.isBuffer(f)||(f=G.from(f)),f.copy(o,a)):Uint8Array.prototype.set.call(o,f,a);else if(G.isBuffer(f))f.copy(o,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=f.length}return o};function pb(e,t){if(G.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Ao(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Ay(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return bb(e).length;default:if(o)return n?-1:Ay(e).length;t=(""+t).toLowerCase(),o=!0}}G.byteLength=pb;function HT(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return ZT(this,t,r);case"utf8":case"utf-8":return mb(this,t,r);case"ascii":return JT(this,t,r);case"latin1":case"binary":return XT(this,t,r);case"base64":return VT(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return QT(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}G.prototype._isBuffer=!0;function Ma(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}G.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)Ma(this,r,r+1);return this};G.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)Ma(this,r,r+3),Ma(this,r+1,r+2);return this};G.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)Ma(this,r,r+7),Ma(this,r+1,r+6),Ma(this,r+2,r+5),Ma(this,r+3,r+4);return this};G.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?mb(this,0,t):HT.apply(this,arguments)};G.prototype.toLocaleString=G.prototype.toString;G.prototype.equals=function(t){if(!G.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:G.compare(this,t)===0};G.prototype.inspect=function(){let t="",r=Hf.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};ab&&(G.prototype[ab]=G.prototype.inspect);G.prototype.compare=function(t,r,n,o,a){if(Ao(t,Uint8Array)&&(t=G.from(t,t.offset,t.byteLength)),!G.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),o===void 0&&(o=0),a===void 0&&(a=this.length),r<0||n>t.length||o<0||a>this.length)throw new RangeError("out of range index");if(o>=a&&r>=n)return 0;if(o>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,a>>>=0,this===t)return 0;let f=a-o,u=n-r,h=Math.min(f,u),d=this.slice(o,a),v=t.slice(r,n);for(let P=0;P<h;++P)if(d[P]!==v[P]){f=d[P],u=v[P];break}return f<u?-1:u<f?1:0};function db(e,t,r,n,o){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Cy(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0)if(o)r=0;else return-1;if(typeof t=="string"&&(t=G.from(t,n)),G.isBuffer(t))return t.length===0?-1:fb(e,t,r,n,o);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):fb(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function fb(e,t,r,n,o){let a=1,f=e.length,u=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,f/=2,u/=2,r/=2}function h(v,P){return a===1?v[P]:v.readUInt16BE(P*a)}let d;if(o){let v=-1;for(d=r;d<f;d++)if(h(e,d)===h(t,v===-1?0:d-v)){if(v===-1&&(v=d),d-v+1===u)return v*a}else v!==-1&&(d-=d-v),v=-1}else for(r+u>f&&(r=f-u),d=r;d>=0;d--){let v=!0;for(let P=0;P<u;P++)if(h(e,d+P)!==h(t,P)){v=!1;break}if(v)return d}return-1}G.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};G.prototype.indexOf=function(t,r,n){return db(this,t,r,n,!0)};G.prototype.lastIndexOf=function(t,r,n){return db(this,t,r,n,!1)};function $T(e,t,r,n){r=Number(r)||0;let o=e.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;let a=t.length;n>a/2&&(n=a/2);let f;for(f=0;f<n;++f){let u=parseInt(t.substr(f*2,2),16);if(Cy(u))return f;e[r+f]=u}return f}function jT(e,t,r,n){return Bh(Ay(t,e.length-r),e,r,n)}function qT(e,t,r,n){return Bh(nF(t),e,r,n)}function WT(e,t,r,n){return Bh(bb(t),e,r,n)}function GT(e,t,r,n){return Bh(iF(t,e.length-r),e,r,n)}G.prototype.write=function(t,r,n,o){if(r===void 0)o="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")o=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((n===void 0||n>a)&&(n=a),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let f=!1;for(;;)switch(o){case"hex":return $T(this,t,r,n);case"utf8":case"utf-8":return jT(this,t,r,n);case"ascii":case"latin1":case"binary":return qT(this,t,r,n);case"base64":return WT(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return GT(this,t,r,n);default:if(f)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),f=!0}};G.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function VT(e,t,r){return t===0&&r===e.length?xy.fromByteArray(e):xy.fromByteArray(e.slice(t,r))}function mb(e,t,r){r=Math.min(e.length,r);let n=[],o=t;for(;o<r;){let a=e[o],f=null,u=a>239?4:a>223?3:a>191?2:1;if(o+u<=r){let h,d,v,P;switch(u){case 1:a<128&&(f=a);break;case 2:h=e[o+1],(h&192)===128&&(P=(a&31)<<6|h&63,P>127&&(f=P));break;case 3:h=e[o+1],d=e[o+2],(h&192)===128&&(d&192)===128&&(P=(a&15)<<12|(h&63)<<6|d&63,P>2047&&(P<55296||P>57343)&&(f=P));break;case 4:h=e[o+1],d=e[o+2],v=e[o+3],(h&192)===128&&(d&192)===128&&(v&192)===128&&(P=(a&15)<<18|(h&63)<<12|(d&63)<<6|v&63,P>65535&&P<1114112&&(f=P))}}f===null?(f=65533,u=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|f&1023),n.push(f),o+=u}return YT(n)}var ub=4096;function YT(e){let t=e.length;if(t<=ub)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ub));return r}function JT(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]&127);return n}function XT(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function ZT(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let a=t;a<r;++a)o+=oF[e[a]];return o}function QT(e,t,r){let n=e.slice(t,r),o="";for(let a=0;a<n.length-1;a+=2)o+=String.fromCharCode(n[a]+n[a+1]*256);return o}G.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let o=this.subarray(t,r);return Object.setPrototypeOf(o,G.prototype),o};function Mr(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}G.prototype.readUintLE=G.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Mr(t,r,this.length);let o=this[t],a=1,f=0;for(;++f<r&&(a*=256);)o+=this[t+f]*a;return o};G.prototype.readUintBE=G.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Mr(t,r,this.length);let o=this[t+--r],a=1;for(;r>0&&(a*=256);)o+=this[t+--r]*a;return o};G.prototype.readUint8=G.prototype.readUInt8=function(t,r){return t=t>>>0,r||Mr(t,1,this.length),this[t]};G.prototype.readUint16LE=G.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||Mr(t,2,this.length),this[t]|this[t+1]<<8};G.prototype.readUint16BE=G.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||Mr(t,2,this.length),this[t]<<8|this[t+1]};G.prototype.readUint32LE=G.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||Mr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};G.prototype.readUint32BE=G.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||Mr(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};G.prototype.readBigUInt64LE=Vs(function(t){t=t>>>0,Kf(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&lc(t,this.length-8);let o=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(o)+(BigInt(a)<<BigInt(32))});G.prototype.readBigUInt64BE=Vs(function(t){t=t>>>0,Kf(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&lc(t,this.length-8);let o=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(o)<<BigInt(32))+BigInt(a)});G.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||Mr(t,r,this.length);let o=this[t],a=1,f=0;for(;++f<r&&(a*=256);)o+=this[t+f]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*r)),o};G.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||Mr(t,r,this.length);let o=r,a=1,f=this[t+--o];for(;o>0&&(a*=256);)f+=this[t+--o]*a;return a*=128,f>=a&&(f-=Math.pow(2,8*r)),f};G.prototype.readInt8=function(t,r){return t=t>>>0,r||Mr(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};G.prototype.readInt16LE=function(t,r){t=t>>>0,r||Mr(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};G.prototype.readInt16BE=function(t,r){t=t>>>0,r||Mr(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};G.prototype.readInt32LE=function(t,r){return t=t>>>0,r||Mr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};G.prototype.readInt32BE=function(t,r){return t=t>>>0,r||Mr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};G.prototype.readBigInt64LE=Vs(function(t){t=t>>>0,Kf(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&lc(t,this.length-8);let o=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(o)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});G.prototype.readBigInt64BE=Vs(function(t){t=t>>>0,Kf(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&lc(t,this.length-8);let o=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(o)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});G.prototype.readFloatLE=function(t,r){return t=t>>>0,r||Mr(t,4,this.length),zf.read(this,t,!0,23,4)};G.prototype.readFloatBE=function(t,r){return t=t>>>0,r||Mr(t,4,this.length),zf.read(this,t,!1,23,4)};G.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||Mr(t,8,this.length),zf.read(this,t,!0,52,8)};G.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||Mr(t,8,this.length),zf.read(this,t,!1,52,8)};function Sn(e,t,r,n,o,a){if(!G.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}G.prototype.writeUintLE=G.prototype.writeUIntLE=function(t,r,n,o){if(t=+t,r=r>>>0,n=n>>>0,!o){let u=Math.pow(2,8*n)-1;Sn(this,t,r,n,u,0)}let a=1,f=0;for(this[r]=t&255;++f<n&&(a*=256);)this[r+f]=t/a&255;return r+n};G.prototype.writeUintBE=G.prototype.writeUIntBE=function(t,r,n,o){if(t=+t,r=r>>>0,n=n>>>0,!o){let u=Math.pow(2,8*n)-1;Sn(this,t,r,n,u,0)}let a=n-1,f=1;for(this[r+a]=t&255;--a>=0&&(f*=256);)this[r+a]=t/f&255;return r+n};G.prototype.writeUint8=G.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,1,255,0),this[r]=t&255,r+1};G.prototype.writeUint16LE=G.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};G.prototype.writeUint16BE=G.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};G.prototype.writeUint32LE=G.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};G.prototype.writeUint32BE=G.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function yb(e,t,r,n,o){_b(t,n,o,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a;let f=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=f,f=f>>8,e[r++]=f,f=f>>8,e[r++]=f,f=f>>8,e[r++]=f,r}function gb(e,t,r,n,o){_b(t,n,o,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a=a>>8,e[r+6]=a,a=a>>8,e[r+5]=a,a=a>>8,e[r+4]=a;let f=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=f,f=f>>8,e[r+2]=f,f=f>>8,e[r+1]=f,f=f>>8,e[r]=f,r+8}G.prototype.writeBigUInt64LE=Vs(function(t,r=0){return yb(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});G.prototype.writeBigUInt64BE=Vs(function(t,r=0){return gb(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});G.prototype.writeIntLE=function(t,r,n,o){if(t=+t,r=r>>>0,!o){let h=Math.pow(2,8*n-1);Sn(this,t,r,n,h-1,-h)}let a=0,f=1,u=0;for(this[r]=t&255;++a<n&&(f*=256);)t<0&&u===0&&this[r+a-1]!==0&&(u=1),this[r+a]=(t/f>>0)-u&255;return r+n};G.prototype.writeIntBE=function(t,r,n,o){if(t=+t,r=r>>>0,!o){let h=Math.pow(2,8*n-1);Sn(this,t,r,n,h-1,-h)}let a=n-1,f=1,u=0;for(this[r+a]=t&255;--a>=0&&(f*=256);)t<0&&u===0&&this[r+a+1]!==0&&(u=1),this[r+a]=(t/f>>0)-u&255;return r+n};G.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};G.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};G.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};G.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};G.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Sn(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};G.prototype.writeBigInt64LE=Vs(function(t,r=0){return yb(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});G.prototype.writeBigInt64BE=Vs(function(t,r=0){return gb(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function wb(e,t,r,n,o,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function vb(e,t,r,n,o){return t=+t,r=r>>>0,o||wb(e,t,r,4,34028234663852886e22,-34028234663852886e22),zf.write(e,t,r,n,23,4),r+4}G.prototype.writeFloatLE=function(t,r,n){return vb(this,t,r,!0,n)};G.prototype.writeFloatBE=function(t,r,n){return vb(this,t,r,!1,n)};function xb(e,t,r,n,o){return t=+t,r=r>>>0,o||wb(e,t,r,8,17976931348623157e292,-17976931348623157e292),zf.write(e,t,r,n,52,8),r+8}G.prototype.writeDoubleLE=function(t,r,n){return xb(this,t,r,!0,n)};G.prototype.writeDoubleBE=function(t,r,n){return xb(this,t,r,!1,n)};G.prototype.copy=function(t,r,n,o){if(!G.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),r>=t.length&&(r=t.length),r||(r=0),o>0&&o<n&&(o=n),o===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-r<o-n&&(o=t.length-r+n);let a=o-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,o):Uint8Array.prototype.set.call(t,this.subarray(n,o),r),a};G.prototype.fill=function(t,r,n,o){if(typeof t=="string"){if(typeof r=="string"?(o=r,r=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!G.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(t.length===1){let f=t.charCodeAt(0);(o==="utf8"&&f<128||o==="latin1")&&(t=f)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let a;if(typeof t=="number")for(a=r;a<n;++a)this[a]=t;else{let f=G.isBuffer(t)?t:G.from(t,o),u=f.length;if(u===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=f[a%u]}return this};var Uf={};function Py(e,t,r){Uf[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(o){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:o,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}Py("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Py("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);Py("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=cb(String(r)):typeof r=="bigint"&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=cb(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n},RangeError);function cb(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function eF(e,t,r){Kf(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&lc(t,e.length-(r+1))}function _b(e,t,r,n,o,a){if(e>r||e<t){let f=typeof t=="bigint"?"n":"",u;throw a>3?t===0||t===BigInt(0)?u=`>= 0${f} and < 2${f} ** ${(a+1)*8}${f}`:u=`>= -(2${f} ** ${(a+1)*8-1}${f}) and < 2 ** ${(a+1)*8-1}${f}`:u=`>= ${t}${f} and <= ${r}${f}`,new Uf.ERR_OUT_OF_RANGE("value",u,e)}eF(n,o,a)}function Kf(e,t){if(typeof e!="number")throw new Uf.ERR_INVALID_ARG_TYPE(t,"number",e)}function lc(e,t,r){throw Math.floor(e)!==e?(Kf(e,r),new Uf.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new Uf.ERR_BUFFER_OUT_OF_BOUNDS:new Uf.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var tF=/[^+/0-9A-Za-z-_]/g;function rF(e){if(e=e.split("=")[0],e=e.trim().replace(tF,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function Ay(e,t){t=t||1/0;let r,n=e.length,o=null,a=[];for(let f=0;f<n;++f){if(r=e.charCodeAt(f),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(f+1===n){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function nF(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function iF(e,t){let r,n,o,a=[];for(let f=0;f<e.length&&!((t-=2)<0);++f)r=e.charCodeAt(f),n=r>>8,o=r%256,a.push(o),a.push(n);return a}function bb(e){return xy.toByteArray(rF(e))}function Bh(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Ao(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Cy(e){return e!==e}var oF=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function Vs(e){return typeof BigInt>"u"?sF:e}function sF(){throw new Error("BigInt not supported")}});var Ai=Ne(Qt=>{"use strict";var aF=Qt&&Qt.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},fF=Qt&&Qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qt,"__esModule",{value:!0});var fn=fF(rb()),uF=Dh();function cF(e,t){for(var r=new Array(e),n=typeof t=="function"?t:function(){return t},o=0;o<e;o++)r[o]=n();return r}Qt.allocateArray=cF;function ky(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=Qo());var n=fn.default.h64(e,r+1),o=fn.default.h64(e,r+2);if(t)return{first:n.toNumber(),second:o.toNumber()};var a=n.toString(16);a.length<16&&(a="0".repeat(16-a.length)+a);var f=o.toString(16);return f.length<16&&(f="0".repeat(16-f.length)+f),{first:Number(a),second:Number(f)}}Qt.hashTwice=ky;function lF(e,t){t===void 0&&(t=Qo());var r=fn.default.h64(e,t+1),n=fn.default.h64(e,t+2),o=r.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var a=n.toString(16);return a.length<16&&(a="0".repeat(16-a.length)+a),{first:o,second:a}}Qt.hashTwiceAsString=lF;function hF(e,t){t===void 0&&(t=Qo());var r=fn.default.h64(e,t+1),n=fn.default.h64(e,t+2),o=r.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var a=n.toString(16);return a.length<16&&(a="0".repeat(16-a.length)+a),{int:{first:r.toNumber(),second:n.toNumber()},string:{first:o,second:a}}}Qt.allInOneHashTwice=hF;function Iy(e,t,r,n){return Math.abs((t+e*r)%n)}Qt.doubleHashing=Iy;function pF(e,t,r,n){n===void 0&&(n=Qo());function o(a,f,u,h,d){if(d===void 0&&(d=[]),d.length===h)return d;var v=ky(f,!0,n+u%a),P=Iy(a,v.first,v.second,u);return d.includes(P)||d.push(P),o(a+1,f,u,h,d)}return o(1,e,t,r)}Qt.getDistinctIndices=pF;function dF(e,t,r,n){n===void 0&&(n=Qo());for(var o=[],a=1;a<=r;a++){var f=ky(e,!0,n+t%a);o.push(Iy(a,f.first,f.second,t))}if(o.length!==r)throw new Error("report this, please, shouldnt be of different size");return o}Qt.getIndices=dF;function mF(e,t,r){r===void 0&&(r=Math.random),e=Math.ceil(e),t=Math.floor(t);var n=r();return Math.floor(n*(t-e+1))+e}Qt.randomInt=mF;function yF(e,t){for(var r=Math.max(e.length,t.length),n=uF.Buffer.allocUnsafe(r).fill(0),o=0;o<r;++o)o<e.length&&o<t.length?n[r-o-1]=e[e.length-o-1]^t[t.length-o-1]:o<e.length&&o>=t.length?n[r-o-1]^=e[e.length-o-1]:o<t.length&&o>=e.length&&(n[r-o-1]^=t[t.length-o-1]);for(var a=0,f=n.values(),u=f.next();!u.done&&u.value===0;)a++,u=f.next();var h=n.slice(a);return h}Qt.xorBuffer=yF;function gF(e){var t,r;if(e===null||!e)return!0;try{for(var n=aF(e),o=n.next();!o.done;o=n.next()){var a=o.value;if(a!==0)return!1}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!0}Qt.isEmptyBuffer=gF;function wF(e,t,r){switch(t===void 0&&(t=Qo()),r){case 32:return fn.default.h32(e,t).toNumber();case 64:return fn.default.h64(e,t).toNumber();default:return fn.default.h64(e,t).toNumber()}}Qt.hashAsInt=wF;function vF(e,t,r,n){t===void 0&&(t=Qo()),r===void 0&&(r=16),n===void 0&&(n=64);var o;switch(n){case 32:o=fn.default.h32(e,t);break;case 64:o=fn.default.h64(e,t);break;default:o=fn.default.h64(e,t);break}var a="";return r===16?(a=o.toString(r),a.length<n/4&&(a="0".repeat(n/4-a.length)+a)):r===2&&(a=Ty(o.toString(16)),a.length<n&&(a="0".repeat(n-a.length)+a)),a}Qt.hashAsString=vF;function xF(e,t,r,n){t===void 0&&(t=Qo()),r===void 0&&(r=16),n===void 0&&(n=64);var o;switch(n){case 32:o=fn.default.h32(e,t);break;case 64:o=fn.default.h64(e,t);break;default:o=fn.default.h64(e,t);break}var a="";return r===16?(a=o.toString(r),a.length<n/4&&(a="0".repeat(n/4-a.length)+a)):r===2&&(a=Ty(o.toString(16)),a.length<n&&(a="0".repeat(n-a.length)+a)),{int:o.toNumber(),string:a}}Qt.hashIntAndString=xF;function Qo(){return 78187493520}Qt.getDefaultSeed=Qo;function _F(e){return Math.ceil(Math.pow(2,Math.floor(Math.log(e)/Math.log(2))))}Qt.power2=_F;function Ty(e){return parseInt(e,16).toString(2)}Qt.hex2bin=Ty;function bF(e){return[128,64,32,16,8,4,2,1].map(function(t){return(t&e)>0?1:0})}Qt.uint8ToBits=bF;function AF(e){return e.reduce(function(t,r,n){if(r===0)return t;if(r===1)return t+Math.pow(2,7-n);throw new Error("Not binary")},0)}Qt.bitsToUint8=AF});var Eb=Ne((Ab,Fy)=>{(function(e,t,r){function n(u){var h=this,d=f();h.next=function(){var v=2091639*h.s0+h.c*23283064365386963e-26;return h.s0=h.s1,h.s1=h.s2,h.s2=v-(h.c=v|0)},h.c=1,h.s0=d(" "),h.s1=d(" "),h.s2=d(" "),h.s0-=d(u),h.s0<0&&(h.s0+=1),h.s1-=d(u),h.s1<0&&(h.s1+=1),h.s2-=d(u),h.s2<0&&(h.s2+=1),d=null}function o(u,h){return h.c=u.c,h.s0=u.s0,h.s1=u.s1,h.s2=u.s2,h}function a(u,h){var d=new n(u),v=h&&h.state,P=d.next;return P.int32=function(){return d.next()*4294967296|0},P.double=function(){return P()+(P()*2097152|0)*11102230246251565e-32},P.quick=P,v&&(typeof v=="object"&&o(v,d),P.state=function(){return o(d,{})}),P}function f(){var u=4022871197,h=function(d){d=String(d);for(var v=0;v<d.length;v++){u+=d.charCodeAt(v);var P=.02519603282416938*u;u=P>>>0,P-=u,P*=u,u=P>>>0,P-=u,u+=P*4294967296}return(u>>>0)*23283064365386963e-26};return h}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(Ab,typeof Fy=="object"&&Fy,typeof define=="function"&&define)});var Pb=Ne((Sb,By)=>{(function(e,t,r){function n(f){var u=this,h="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var v=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^v^v>>>8},f===(f|0)?u.x=f:h+=f;for(var d=0;d<h.length+64;d++)u.x^=h.charCodeAt(d)|0,u.next()}function o(f,u){return u.x=f.x,u.y=f.y,u.z=f.z,u.w=f.w,u}function a(f,u){var h=new n(f),d=u&&u.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var P=h.next()>>>11,I=(h.next()>>>0)/4294967296,R=(P+I)/(1<<21);while(R===0);return R},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(Sb,typeof By=="object"&&By,typeof define=="function"&&define)});var kb=Ne((Cb,Dy)=>{(function(e,t,r){function n(f){var u=this,h="";u.next=function(){var v=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(v^v<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,f===(f|0)?u.x=f:h+=f;for(var d=0;d<h.length+64;d++)u.x^=h.charCodeAt(d)|0,d==h.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(f,u){return u.x=f.x,u.y=f.y,u.z=f.z,u.w=f.w,u.v=f.v,u.d=f.d,u}function a(f,u){var h=new n(f),d=u&&u.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var P=h.next()>>>11,I=(h.next()>>>0)/4294967296,R=(P+I)/(1<<21);while(R===0);return R},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(Cb,typeof Dy=="object"&&Dy,typeof define=="function"&&define)});var Tb=Ne((Ib,Ly)=>{(function(e,t,r){function n(f){var u=this;u.next=function(){var d=u.x,v=u.i,P,I,R;return P=d[v],P^=P>>>7,I=P^P<<24,P=d[v+1&7],I^=P^P>>>10,P=d[v+3&7],I^=P^P>>>3,P=d[v+4&7],I^=P^P<<7,P=d[v+7&7],P=P^P<<13,I^=P^P<<9,d[v]=I,u.i=v+1&7,I};function h(d,v){var P,I,R=[];if(v===(v|0))I=R[0]=v;else for(v=""+v,P=0;P<v.length;++P)R[P&7]=R[P&7]<<15^v.charCodeAt(P)+R[P+1&7]<<13;for(;R.length<8;)R.push(0);for(P=0;P<8&&R[P]===0;++P);for(P==8?I=R[7]=-1:I=R[P],d.x=R,d.i=0,P=256;P>0;--P)d.next()}h(u,f)}function o(f,u){return u.x=f.x.slice(),u.i=f.i,u}function a(f,u){f==null&&(f=+new Date);var h=new n(f),d=u&&u.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var P=h.next()>>>11,I=(h.next()>>>0)/4294967296,R=(P+I)/(1<<21);while(R===0);return R},v.int32=h.next,v.quick=v,d&&(d.x&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(Ib,typeof Ly=="object"&&Ly,typeof define=="function"&&define)});var Bb=Ne((Fb,Ny)=>{(function(e,t,r){function n(f){var u=this;u.next=function(){var d=u.w,v=u.X,P=u.i,I,R;return u.w=d=d+1640531527|0,R=v[P+34&127],I=v[P=P+1&127],R^=R<<13,I^=I<<17,R^=R>>>15,I^=I>>>12,R=v[P]=R^I,u.i=P,R+(d^d>>>16)|0};function h(d,v){var P,I,R,ee,ce,De=[],ge=128;for(v===(v|0)?(I=v,v=null):(v=v+"\0",I=0,ge=Math.max(ge,v.length)),R=0,ee=-32;ee<ge;++ee)v&&(I^=v.charCodeAt((ee+32)%v.length)),ee===0&&(ce=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,ee>=0&&(ce=ce+1640531527|0,P=De[ee&127]^=I+ce,R=P==0?R+1:0);for(R>=128&&(De[(v&&v.length||0)&127]=-1),R=127,ee=4*128;ee>0;--ee)I=De[R+34&127],P=De[R=R+1&127],I^=I<<13,P^=P<<17,I^=I>>>15,P^=P>>>12,De[R]=I^P;d.w=ce,d.X=De,d.i=R}h(u,f)}function o(f,u){return u.i=f.i,u.w=f.w,u.X=f.X.slice(),u}function a(f,u){f==null&&(f=+new Date);var h=new n(f),d=u&&u.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var P=h.next()>>>11,I=(h.next()>>>0)/4294967296,R=(P+I)/(1<<21);while(R===0);return R},v.int32=h.next,v.quick=v,d&&(d.X&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(Fb,typeof Ny=="object"&&Ny,typeof define=="function"&&define)});var Lb=Ne((Db,My)=>{(function(e,t,r){function n(f){var u=this,h="";u.next=function(){var v=u.b,P=u.c,I=u.d,R=u.a;return v=v<<25^v>>>7^P,P=P-I|0,I=I<<24^I>>>8^R,R=R-v|0,u.b=v=v<<20^v>>>12^P,u.c=P=P-I|0,u.d=I<<16^P>>>16^R,u.a=R-v|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,f===Math.floor(f)?(u.a=f/4294967296|0,u.b=f|0):h+=f;for(var d=0;d<h.length+20;d++)u.b^=h.charCodeAt(d)|0,u.next()}function o(f,u){return u.a=f.a,u.b=f.b,u.c=f.c,u.d=f.d,u}function a(f,u){var h=new n(f),d=u&&u.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var P=h.next()>>>11,I=(h.next()>>>0)/4294967296,R=(P+I)/(1<<21);while(R===0);return R},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(Db,typeof My=="object"&&My,typeof define=="function"&&define)});var Mb=Ne((Nb,Lh)=>{(function(e,t,r){var n=256,o=6,a=52,f="random",u=r.pow(n,o),h=r.pow(2,a),d=h*2,v=n-1,P;function I(ae,Ue,He){var ne=[];Ue=Ue==!0?{entropy:!0}:Ue||{};var we=De(ce(Ue.entropy?[ae,Oe(t)]:ae??ge(),3),ne),be=new R(ne),je=function(){for(var gt=be.g(o),Tt=u,At=0;gt<h;)gt=(gt+At)*n,Tt*=n,At=be.g(1);for(;gt>=d;)gt/=2,Tt/=2,At>>>=1;return(gt+At)/Tt};return je.int32=function(){return be.g(4)|0},je.quick=function(){return be.g(4)/4294967296},je.double=je,De(Oe(be.S),t),(Ue.pass||He||function(gt,Tt,At,Bt){return Bt&&(Bt.S&&ee(Bt,be),gt.state=function(){return ee(be,{})}),At?(r[f]=gt,Tt):gt})(je,we,"global"in Ue?Ue.global:this==r,Ue.state)}function R(ae){var Ue,He=ae.length,ne=this,we=0,be=ne.i=ne.j=0,je=ne.S=[];for(He||(ae=[He++]);we<n;)je[we]=we++;for(we=0;we<n;we++)je[we]=je[be=v&be+ae[we%He]+(Ue=je[we])],je[be]=Ue;(ne.g=function(gt){for(var Tt,At=0,Bt=ne.i,Gt=ne.j,kt=ne.S;gt--;)Tt=kt[Bt=v&Bt+1],At=At*n+kt[v&(kt[Bt]=kt[Gt=v&Gt+Tt])+(kt[Gt]=Tt)];return ne.i=Bt,ne.j=Gt,At})(n)}function ee(ae,Ue){return Ue.i=ae.i,Ue.j=ae.j,Ue.S=ae.S.slice(),Ue}function ce(ae,Ue){var He=[],ne=typeof ae,we;if(Ue&&ne=="object")for(we in ae)try{He.push(ce(ae[we],Ue-1))}catch{}return He.length?He:ne=="string"?ae:ae+"\0"}function De(ae,Ue){for(var He=ae+"",ne,we=0;we<He.length;)Ue[v&we]=v&(ne^=Ue[v&we]*19)+He.charCodeAt(we++);return Oe(Ue)}function ge(){try{var ae;return P&&(ae=P.randomBytes)?ae=ae(n):(ae=new Uint8Array(n),(e.crypto||e.msCrypto).getRandomValues(ae)),Oe(ae)}catch{var Ue=e.navigator,He=Ue&&Ue.plugins;return[+new Date,e,He,e.screen,Oe(t)]}}function Oe(ae){return String.fromCharCode.apply(0,ae)}if(De(r.random(),t),typeof Lh=="object"&&Lh.exports){Lh.exports=I;try{P=im()}catch{}}else typeof define=="function"&&define.amd?define(function(){return I}):r["seed"+f]=I})(typeof self<"u"?self:Nb,[],Math)});var Rb=Ne((PU,Ob)=>{var EF=Eb(),SF=Pb(),PF=kb(),CF=Tb(),kF=Bb(),IF=Lb(),Oa=Mb();Oa.alea=EF;Oa.xor128=SF;Oa.xorwow=PF;Oa.xorshift7=CF;Oa.xor4096=kF;Oa.tychei=IF;Ob.exports=Oa});var Ji=Ne(Ra=>{"use strict";var TF=Ra&&Ra.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},FF=Ra&&Ra.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ra,"__esModule",{value:!0});var BF=TF(Ai()),Ub=FF(Rb()),DF=function(){function e(){this._seed=BF.getDefaultSeed(),this._rng=Ub.default(""+this._seed)}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this._seed=t,this._rng=Ub.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),e.prototype.saveAsJSON=function(){throw new Error("not-implemented")},e.fromJSON=function(t){throw new Error("not-implemented")},e}();Ra.default=DF});var Kb=Ne(()=>{var zb;(function(e){(function(t){var r=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),n=o(e);typeof r.Reflect>"u"?r.Reflect=e:n=o(r.Reflect,n),t(n);function o(a,f){return function(u,h){typeof a[u]!="function"&&Object.defineProperty(a,u,{configurable:!0,writable:!0,value:h}),f&&f(u,h)}}})(function(t){var r=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",o=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",f=typeof Object.create=="function",u={__proto__:[]}instanceof Array,h=!f&&!u,d={create:f?function(){return Rr(Object.create(null))}:u?function(){return Rr({__proto__:null})}:function(){return Rr({})},has:h?function(O,q){return r.call(O,q)}:function(O,q){return q in O},get:h?function(O,q){return r.call(O,q)?O[q]:void 0}:function(O,q){return O[q]}},v=Object.getPrototypeOf(Function),P=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",I=!P&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:mn(),R=!P&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:yn(),ee=!P&&typeof WeakMap=="function"?WeakMap:Fi(),ce=new ee;function De(O,q,oe,le){if(Ot(oe)){if(!ti(O))throw new TypeError;if(!Er(q))throw new TypeError;return gt(O,q)}else{if(!ti(O))throw new TypeError;if(!Re(q))throw new TypeError;if(!Re(le)&&!Ot(le)&&!Dt(le))throw new TypeError;return Dt(le)&&(le=void 0),oe=pr(oe),Tt(O,q,oe,le)}}t("decorate",De);function ge(O,q){function oe(le,Ie){if(!Re(le))throw new TypeError;if(!Ot(Ie)&&!Ti(Ie))throw new TypeError;Qr(O,q,le,Ie)}return oe}t("metadata",ge);function Oe(O,q,oe,le){if(!Re(oe))throw new TypeError;return Ot(le)||(le=pr(le)),Qr(O,q,oe,le)}t("defineMetadata",Oe);function ae(O,q,oe){if(!Re(q))throw new TypeError;return Ot(oe)||(oe=pr(oe)),Bt(O,q,oe)}t("hasMetadata",ae);function Ue(O,q,oe){if(!Re(q))throw new TypeError;return Ot(oe)||(oe=pr(oe)),Gt(O,q,oe)}t("hasOwnMetadata",Ue);function He(O,q,oe){if(!Re(q))throw new TypeError;return Ot(oe)||(oe=pr(oe)),kt(O,q,oe)}t("getMetadata",He);function ne(O,q,oe){if(!Re(q))throw new TypeError;return Ot(oe)||(oe=pr(oe)),wr(O,q,oe)}t("getOwnMetadata",ne);function we(O,q){if(!Re(O))throw new TypeError;return Ot(q)||(q=pr(q)),hr(O,q)}t("getMetadataKeys",we);function be(O,q){if(!Re(O))throw new TypeError;return Ot(q)||(q=pr(q)),Ar(O,q)}t("getOwnMetadataKeys",be);function je(O,q,oe){if(!Re(q))throw new TypeError;Ot(oe)||(oe=pr(oe));var le=At(q,oe,!1);if(Ot(le)||!le.delete(O))return!1;if(le.size>0)return!0;var Ie=ce.get(q);return Ie.delete(oe),Ie.size>0||ce.delete(q),!0}t("deleteMetadata",je);function gt(O,q){for(var oe=O.length-1;oe>=0;--oe){var le=O[oe],Ie=le(q);if(!Ot(Ie)&&!Dt(Ie)){if(!Er(Ie))throw new TypeError;q=Ie}}return q}function Tt(O,q,oe,le){for(var Ie=O.length-1;Ie>=0;--Ie){var Kt=O[Ie],We=Kt(q,oe,le);if(!Ot(We)&&!Dt(We)){if(!Re(We))throw new TypeError;le=We}}return le}function At(O,q,oe){var le=ce.get(O);if(Ot(le)){if(!oe)return;le=new I,ce.set(O,le)}var Ie=le.get(q);if(Ot(Ie)){if(!oe)return;Ie=new I,le.set(q,Ie)}return Ie}function Bt(O,q,oe){var le=Gt(O,q,oe);if(le)return!0;var Ie=$t(q);return Dt(Ie)?!1:Bt(O,Ie,oe)}function Gt(O,q,oe){var le=At(q,oe,!1);return Ot(le)?!1:ei(le.has(O))}function kt(O,q,oe){var le=Gt(O,q,oe);if(le)return wr(O,q,oe);var Ie=$t(q);if(!Dt(Ie))return kt(O,Ie,oe)}function wr(O,q,oe){var le=At(q,oe,!1);if(!Ot(le))return le.get(O)}function Qr(O,q,oe,le){var Ie=At(oe,le,!0);Ie.set(O,q)}function hr(O,q){var oe=Ar(O,q),le=$t(O);if(le===null)return oe;var Ie=hr(le,q);if(Ie.length<=0)return oe;if(oe.length<=0)return Ie;for(var Kt=new R,We=[],et=0,Le=oe;et<Le.length;et++){var ut=Le[et],st=Kt.has(ut);st||(Kt.add(ut),We.push(ut))}for(var nr=0,Bi=Ie;nr<Bi.length;nr++){var ut=Bi[nr],st=Kt.has(ut);st||(Kt.add(ut),We.push(ut))}return We}function Ar(O,q){var oe=[],le=At(O,q,!1);if(Ot(le))return oe;for(var Ie=le.keys(),Kt=en(Ie),We=0;;){var et=hs(Kt);if(!et)return oe.length=We,oe;var Le=Vr(et);try{oe[We]=Le}catch(ut){try{Tr(Kt)}finally{throw ut}}We++}}function So(O){if(O===null)return 1;switch(typeof O){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return O===null?1:6;default:return 6}}function Ot(O){return O===void 0}function Dt(O){return O===null}function er(O){return typeof O=="symbol"}function Re(O){return typeof O=="object"?O!==null:typeof O=="function"}function Ir(O,q){switch(So(O)){case 0:return O;case 1:return O;case 2:return O;case 3:return O;case 4:return O;case 5:return O}var oe=q===3?"string":q===5?"number":"default",le=ls(O,o);if(le!==void 0){var Ie=le.call(O,oe);if(Re(Ie))throw new TypeError;return Ie}return Qn(O,oe==="default"?"number":oe)}function Qn(O,q){if(q==="string"){var oe=O.toString;if(Gr(oe)){var le=oe.call(O);if(!Re(le))return le}var Ie=O.valueOf;if(Gr(Ie)){var le=Ie.call(O);if(!Re(le))return le}}else{var Ie=O.valueOf;if(Gr(Ie)){var le=Ie.call(O);if(!Re(le))return le}var Kt=O.toString;if(Gr(Kt)){var le=Kt.call(O);if(!Re(le))return le}}throw new TypeError}function ei(O){return!!O}function to(O){return""+O}function pr(O){var q=Ir(O,3);return er(q)?q:to(q)}function ti(O){return Array.isArray?Array.isArray(O):O instanceof Object?O instanceof Array:Object.prototype.toString.call(O)==="[object Array]"}function Gr(O){return typeof O=="function"}function Er(O){return typeof O=="function"}function Ti(O){switch(So(O)){case 3:return!0;case 4:return!0;default:return!1}}function ls(O,q){var oe=O[q];if(oe!=null){if(!Gr(oe))throw new TypeError;return oe}}function en(O){var q=ls(O,a);if(!Gr(q))throw new TypeError;var oe=q.call(O);if(!Re(oe))throw new TypeError;return oe}function Vr(O){return O.value}function hs(O){var q=O.next();return q.done?!1:q}function Tr(O){var q=O.return;q&&q.call(O)}function $t(O){var q=Object.getPrototypeOf(O);if(typeof O!="function"||O===v||q!==v)return q;var oe=O.prototype,le=oe&&Object.getPrototypeOf(oe);if(le==null||le===Object.prototype)return q;var Ie=le.constructor;return typeof Ie!="function"||Ie===O?q:Ie}function mn(){var O={},q=[],oe=function(){function We(et,Le,ut){this._index=0,this._keys=et,this._values=Le,this._selector=ut}return We.prototype["@@iterator"]=function(){return this},We.prototype[a]=function(){return this},We.prototype.next=function(){var et=this._index;if(et>=0&&et<this._keys.length){var Le=this._selector(this._keys[et],this._values[et]);return et+1>=this._keys.length?(this._index=-1,this._keys=q,this._values=q):this._index++,{value:Le,done:!1}}return{value:void 0,done:!0}},We.prototype.throw=function(et){throw this._index>=0&&(this._index=-1,this._keys=q,this._values=q),et},We.prototype.return=function(et){return this._index>=0&&(this._index=-1,this._keys=q,this._values=q),{value:et,done:!0}},We}();return function(){function We(){this._keys=[],this._values=[],this._cacheKey=O,this._cacheIndex=-2}return Object.defineProperty(We.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),We.prototype.has=function(et){return this._find(et,!1)>=0},We.prototype.get=function(et){var Le=this._find(et,!1);return Le>=0?this._values[Le]:void 0},We.prototype.set=function(et,Le){var ut=this._find(et,!0);return this._values[ut]=Le,this},We.prototype.delete=function(et){var Le=this._find(et,!1);if(Le>=0){for(var ut=this._keys.length,st=Le+1;st<ut;st++)this._keys[st-1]=this._keys[st],this._values[st-1]=this._values[st];return this._keys.length--,this._values.length--,et===this._cacheKey&&(this._cacheKey=O,this._cacheIndex=-2),!0}return!1},We.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=O,this._cacheIndex=-2},We.prototype.keys=function(){return new oe(this._keys,this._values,le)},We.prototype.values=function(){return new oe(this._keys,this._values,Ie)},We.prototype.entries=function(){return new oe(this._keys,this._values,Kt)},We.prototype["@@iterator"]=function(){return this.entries()},We.prototype[a]=function(){return this.entries()},We.prototype._find=function(et,Le){return this._cacheKey!==et&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=et)),this._cacheIndex<0&&Le&&(this._cacheIndex=this._keys.length,this._keys.push(et),this._values.push(void 0)),this._cacheIndex},We}();function le(We,et){return We}function Ie(We,et){return et}function Kt(We,et){return[We,et]}}function yn(){return function(){function O(){this._map=new I}return Object.defineProperty(O.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),O.prototype.has=function(q){return this._map.has(q)},O.prototype.add=function(q){return this._map.set(q,q),this},O.prototype.delete=function(q){return this._map.delete(q)},O.prototype.clear=function(){this._map.clear()},O.prototype.keys=function(){return this._map.keys()},O.prototype.values=function(){return this._map.values()},O.prototype.entries=function(){return this._map.entries()},O.prototype["@@iterator"]=function(){return this.keys()},O.prototype[a]=function(){return this.keys()},O}()}function Fi(){var O=16,q=d.create(),oe=le();return function(){function Le(){this._key=le()}return Le.prototype.has=function(ut){var st=Ie(ut,!1);return st!==void 0?d.has(st,this._key):!1},Le.prototype.get=function(ut){var st=Ie(ut,!1);return st!==void 0?d.get(st,this._key):void 0},Le.prototype.set=function(ut,st){var nr=Ie(ut,!0);return nr[this._key]=st,this},Le.prototype.delete=function(ut){var st=Ie(ut,!1);return st!==void 0?delete st[this._key]:!1},Le.prototype.clear=function(){this._key=le()},Le}();function le(){var Le;do Le="@@WeakMap@@"+et();while(d.has(q,Le));return q[Le]=!0,Le}function Ie(Le,ut){if(!r.call(Le,oe)){if(!ut)return;Object.defineProperty(Le,oe,{value:d.create()})}return Le[oe]}function Kt(Le,ut){for(var st=0;st<ut;++st)Le[st]=Math.random()*255|0;return Le}function We(Le){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(Le)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(Le)):Kt(new Uint8Array(Le),Le):Kt(new Array(Le),Le)}function et(){var Le=We(O);Le[6]=Le[6]&79|64,Le[8]=Le[8]&191|128;for(var ut="",st=0;st<O;++st){var nr=Le[st];(st===4||st===6||st===8)&&(ut+="-"),nr<16&&(ut+="0"),ut+=nr.toString(16).toLowerCase()}return ut}}function Rr(O){return O.__=void 0,delete O.__,O}})})(zb||(zb={}))});var qn=Ne(Ei=>{"use strict";var LF=Ei&&Ei.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],f;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(u){f={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return a},NF=Ei&&Ei.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(LF(arguments[t]));return e};Object.defineProperty(Ei,"__esModule",{value:!0});Kb();function hc(e){return e==null?e:Array.isArray(e)?e.map(hc):typeof e=="object"?"saveAsJSON"in e?e.saveAsJSON():Object.assign({},e):e}Ei.cloneField=hc;function MF(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(n){var o={type:e};return t.forEach(function(a){o[a]=hc(n[a])}),o}}Ei.cloneObject=MF;function OF(e){return function(t){return t.prototype.saveAsJSON=function(){return e.export(this)},t.fromJSON=function(r){return e.import(r)},t}}Ei.Exportable=OF;var Oy=Symbol("bloom-filters:exportable:class-name"),$f=Symbol("bloom-filters:exportable:fields"),jf=Symbol("bloom-filters:exportable:constructor-parameters");function RF(e,t){return e===void 0&&(e=hc),t===void 0&&(t=function(r){return r}),function(r,n){var o=[];Reflect.hasMetadata($f,r)&&(o=Reflect.getMetadata($f,r)),o.push({name:n,exporter:e,importer:t}),Reflect.defineMetadata($f,o,r)}}Ei.Field=RF;function UF(e){return function(t,r,n){var o=new Map;Reflect.hasMetadata(jf,t)&&(o=Reflect.getMetadata(jf,t)),o.set(e,n),Reflect.defineMetadata(jf,o,t)}}Ei.Parameter=UF;function zF(e,t){return t===void 0&&(t=[]),function(r){if(Reflect.defineMetadata(Oy,e,r.prototype),!Reflect.hasMetadata($f,r.prototype)||t.length===0)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(jf,r)||Reflect.defineMetadata(jf,new Map,r),r.prototype.saveAsJSON=function(){var n=this,o={type:Reflect.getMetadata(Oy,r.prototype)},a=Reflect.getMetadata($f,r.prototype);return a.forEach(function(f){o[f.name]=f.exporter(n[f.name])}),t.forEach(function(f){o[f]=hc(n[f])}),o},r.fromJSON=function(n){var o=Reflect.getMetadata(Oy,r.prototype),a=Reflect.getMetadata(jf,r),f=Reflect.getMetadata($f,r.prototype);if(n.type!==o)throw new Error("Cannot create an object "+o+' from a JSON export with type "'+n.type+'"');var u=[],h=[];t.map(function(v){return{name:v,importer:function(P){return P}}}).concat(f).forEach(function(v){if(!(v.name in n))throw new Error('Invalid import: required field "'+v+'" not found in JSON export "'+n+'"');a.has(v.name)?u[a.get(v.name)]=v.importer(n[v.name]):h.push({name:v.name,value:v.importer(n[v.name])})});var d=new(r.bind.apply(r,NF([void 0],u)));return h.forEach(function(v){d[v.name]=v.value}),d}}}Ei.AutoExportable=zF});var Mh=Ne(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});function KF(e,t){return Math.ceil(-(e*Math.log(t)/Math.pow(Math.log(2),2)))}Nh.optimalFilterSize=KF;function HF(e,t){return Math.ceil(e/t*Math.log(2))}Nh.optimalHashes=HF});var jb=Ne(Wn=>{"use strict";var $F=Wn&&Wn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pc=Wn&&Wn.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},dc=Wn&&Wn.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},Hb=Wn&&Wn.__param||function(e,t){return function(r,n){t(r,n,e)}},jF=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wn,"__esModule",{value:!0});var qF=jF(Ji()),Ua=qn(),$b=Mh(),mc=Ai(),WF=function(e){$F(t,e);function t(n,o){var a=e.call(this)||this;if(o<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+o+".");return a._size=n,a._nbHashes=o,a._filter=mc.allocateArray(a._size,0),a._length=0,a}r=t,t.create=function(n,o){var a=$b.optimalFilterSize(n,o),f=$b.optimalHashes(a,n);return new r(a,f)},t.from=function(n,o){var a=Array.from(n),f=r.create(a.length,o);return a.forEach(function(u){return f.add(u)}),f},t.fromBytes=function(n,o){for(var a=[],f=0;f<n.length;f++){var u=mc.uint8ToBits(n[f]);a=a.concat(u)}var h=new r(a.length,o);return h._filter=a,h},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.add=function(n){for(var o=mc.getDistinctIndices(n,this._size,this._nbHashes,this.seed),a=0;a<o.length;a++)this._filter[o[a]]=1;this._length++},t.prototype.has=function(n){for(var o=mc.getDistinctIndices(n,this._size,this._nbHashes,this.seed),a=0;a<o.length;a++)if(!this._filter[o[a]])return!1;return!0},t.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},t.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes?!1:this._filter.every(function(o,a){return n._filter[a]===o})},t.prototype.toBytes=function(){for(var n=new Uint8Array(Math.ceil(this._size/8)),o=0;o<n.length;o++){var a=this._filter.slice(o*8,o*8+8);n[o]=mc.bitsToUint8(a)}return n};var r;return pc([Ua.Field(),dc("design:type",Number)],t.prototype,"_size",void 0),pc([Ua.Field(),dc("design:type",Number)],t.prototype,"_nbHashes",void 0),pc([Ua.Field(),dc("design:type",Array)],t.prototype,"_filter",void 0),pc([Ua.Field(),dc("design:type",Number)],t.prototype,"_length",void 0),t=r=pc([Ua.AutoExportable("BloomFilter",["_seed"]),Hb(0,Ua.Parameter("_size")),Hb(1,Ua.Parameter("_nbHashes")),dc("design:paramtypes",[Number,Number])],t),t}(qF.default);Wn.default=WF});var Gb=Ne(Gn=>{"use strict";var GF=Gn&&Gn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yc=Gn&&Gn.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},gc=Gn&&Gn.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},qb=Gn&&Gn.__param||function(e,t){return function(r,n){t(r,n,e)}},VF=Gn&&Gn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gn,"__esModule",{value:!0});var YF=VF(Ji()),za=qn(),Wb=Mh(),Oh=Ai(),JF=function(e){GF(t,e);function t(n,o){var a=e.call(this)||this;if(o<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+o+" functions. Consider increasing it.");return a._size=n,a._nbHashes=o,a._filter=Oh.allocateArray(a._size,function(){return[0,0]}),a._length=0,a}r=t,t.create=function(n,o){var a=Wb.optimalFilterSize(n,o);return new r(a,Wb.optimalHashes(a,n))},t.from=function(n,o){var a=Array.from(n),f=r.create(a.length,o);return a.forEach(function(u){return f.add(u)}),f},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.add=function(n){for(var o=Oh.getDistinctIndices(n,this._size,this._nbHashes,this.seed),a=0;a<o.length;a++)this._filter[o[a]][1]+=1,this._filter[o[a]][1]>0&&(this._filter[o[a]][0]=1);this._length++},t.prototype.remove=function(n){for(var o=Oh.getDistinctIndices(n,this._size,this._nbHashes,this.seed),a=!0,f=0;f<o.length;f++)this._filter[o[f]][1]-=1,this._filter[o[f]][1]<=0&&(this._filter[o[f]][0]=0);return this._length--,a},t.prototype.has=function(n){for(var o=Oh.getDistinctIndices(n,this._size,this._nbHashes,this.seed),a=0;a<o.length;a++)if(!this._filter[o[a]][0])return!1;return!0},t.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},t.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length?!1:this._filter.every(function(o,a){return n._filter[a][0]===o[0]&&n._filter[a][1]===o[1]})};var r;return yc([za.Field(),gc("design:type",Number)],t.prototype,"_size",void 0),yc([za.Field(),gc("design:type",Number)],t.prototype,"_nbHashes",void 0),yc([za.Field(),gc("design:type",Array)],t.prototype,"_filter",void 0),yc([za.Field(),gc("design:type",Number)],t.prototype,"_length",void 0),t=r=yc([za.AutoExportable("CountingBloomFilter",["_seed"]),qb(0,za.Parameter("_size")),qb(1,za.Parameter("_nbHashes")),gc("design:paramtypes",[Number,Number])],t),t}(YF.default);Gn.default=JF});var Vb=Ne(Vn=>{"use strict";var XF=Vn&&Vn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ys=Vn&&Vn.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Js=Vn&&Vn.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},Rh=Vn&&Vn.__param||function(e,t){return function(r,n){t(r,n,e)}},ZF=Vn&&Vn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vn,"__esModule",{value:!0});var QF=ZF(Ji()),Si=qn(),Uh=Ai();function eB(e,t){return Math.ceil(Math.log(e)/Math.log(t))}function tB(e,t,r){return Math.ceil(e*-Math.log(t)/(Math.log(r)*Math.log(1-r)))}function rB(e,t,r){return Math.ceil(e*(Math.log(t)*Math.log(1-t))/-(r*Math.log(t)))}var nB=function(e){XF(t,e);function t(n,o,a,f){var u=e.call(this)||this;return u._size=n,u._nbHashes=o,u._loadFactor=a,u._m=Math.ceil(u._size/u._nbHashes),u._filter=Uh.allocateArray(u._nbHashes,function(){return Uh.allocateArray(u._m,0)}),u._capacity=f!==void 0?f:rB(u._size,a,o),u._length=0,u}r=t,t.create=function(n,o,a){a===void 0&&(a=.5);var f=tB(n,o,a),u=eB(o,a);return new r(f,u,a,n)},t.from=function(n,o,a){a===void 0&&(a=.5);var f=Array.from(n),u=r.create(f.length,o,a);return f.forEach(function(h){return u.add(h)}),u},Object.defineProperty(t.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),t.prototype.add=function(n){for(var o=Uh.getIndices(n,this._m,this._nbHashes,this.seed),a=0;a<this._nbHashes;a++)this._filter[a][o[a]]=1;this._length++},t.prototype.has=function(n){for(var o=Uh.getIndices(n,this._m,this._nbHashes,this.seed),a=0;a<this._nbHashes;a++)if(!this._filter[a][o[a]])return!1;return!0},t.prototype.rate=function(){var n=this._currentload();return Math.pow(n,this._nbHashes)},t.prototype.equals=function(n){return this._size!==n._size||this._nbHashes!==n._nbHashes||this._length!==n._length||this._loadFactor!==n._loadFactor?!1:this._filter.every(function(o,a){return n._filter[a].every(function(f,u){return o[u]===f})})},t.prototype._currentload=function(){var n=this._filter.map(function(a){return a.reduce(function(f,u){return f+u},0)}),o=n.reduce(function(a,f){return a+f},0);return o/this._size};var r;return Ys([Si.Field(),Js("design:type",Number)],t.prototype,"_size",void 0),Ys([Si.Field(),Js("design:type",Number)],t.prototype,"_nbHashes",void 0),Ys([Si.Field(),Js("design:type",Number)],t.prototype,"_loadFactor",void 0),Ys([Si.Field(),Js("design:type",Number)],t.prototype,"_m",void 0),Ys([Si.Field(),Js("design:type",Array)],t.prototype,"_filter",void 0),Ys([Si.Field(),Js("design:type",Number)],t.prototype,"_capacity",void 0),Ys([Si.Field(),Js("design:type",Number)],t.prototype,"_length",void 0),t=r=Ys([Si.AutoExportable("PartitionedBloomFilter",["_seed"]),Rh(0,Si.Parameter("_size")),Rh(1,Si.Parameter("_nbHashes")),Rh(2,Si.Parameter("_loadFactor")),Rh(3,Si.Parameter("_capacity")),Js("design:paramtypes",[Number,Number,Number,Number])],t),t}(QF.default);Vn.default=nB});var Ry=Ne(un=>{"use strict";var iB=un&&un.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wc=un&&un.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},vc=un&&un.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},Yb=un&&un.__param||function(e,t){return function(r,n){t(r,n,e)}},oB=un&&un.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},sB=un&&un.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(un,"__esModule",{value:!0});var aB=sB(Ji()),Ka=qn(),zh=Ai(),fB=function(e){iB(t,e);function t(n,o){var a=e.call(this)||this;return a._columns=n,a._rows=o,a._matrix=zh.allocateArray(a._rows,function(){return zh.allocateArray(a._columns,0)}),a._allSums=0,a}r=t,t.create=function(n,o){o===void 0&&(o=.999);var a=Math.ceil(Math.E/n),f=Math.ceil(Math.log(1/o));return new r(a,f)},t.from=function(n,o,a){var f,u;a===void 0&&(a=.999);var h=r.create(o,a);try{for(var d=oB(n),v=d.next();!v.done;v=d.next()){var P=v.value;h.update(P)}}catch(I){f={error:I}}finally{try{v&&!v.done&&(u=d.return)&&u.call(d)}finally{if(f)throw f.error}}return h},Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),t.prototype.update=function(n,o){o===void 0&&(o=1),this._allSums+=o;for(var a=zh.getDistinctIndices(n,this._columns,this._rows,this.seed),f=0;f<this._rows;f++)this._matrix[f][a[f]]+=o},t.prototype.count=function(n){for(var o=1/0,a=zh.getDistinctIndices(n,this._columns,this._rows,this.seed),f=0;f<this._rows;f++){var u=this._matrix[f][a[f]];o=Math.min(u,o)}return o},t.prototype.equals=function(n){if(this._columns!==n._columns||this._rows!==n._rows)return!1;for(var o=0;o<this._rows;o++)for(var a=0;a<this._columns;a++)if(this._matrix[o][a]!==n._matrix[o][a])return!1;return!0},t.prototype.merge=function(n){if(this._columns!==n._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==n._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var o=0;o<this._rows;o++)for(var a=0;a<this._columns;a++)this._matrix[o][a]+=n._matrix[o][a]},t.prototype.clone=function(){var n=new r(this._columns,this._rows);return n.merge(this),n.seed=this.seed,n};var r;return wc([Ka.Field(),vc("design:type",Number)],t.prototype,"_columns",void 0),wc([Ka.Field(),vc("design:type",Number)],t.prototype,"_rows",void 0),wc([Ka.Field(),vc("design:type",Array)],t.prototype,"_matrix",void 0),wc([Ka.Field(),vc("design:type",Number)],t.prototype,"_allSums",void 0),t=r=wc([Ka.AutoExportable("CountMinSketch",["_seed"]),Yb(0,Ka.Parameter("_columns")),Yb(1,Ka.Parameter("_rows")),vc("design:paramtypes",[Number,Number])],t),t}(aB.default);un.default=fB});var Xb=Ne(Yn=>{"use strict";var uB=Yn&&Yn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xc=Yn&&Yn.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},_c=Yn&&Yn.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},cB=Yn&&Yn.__param||function(e,t){return function(r,n){t(r,n,e)}},lB=Yn&&Yn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yn,"__esModule",{value:!0});var hB=lB(Ji()),qf=qn(),Jb=Ai(),Uy=Math.pow(2,32);function pB(e){switch(e){case 16:return .673;case 32:return .697;case 64:return .709;default:return .7213/(1+1.079/e)}}var dB=function(e){uB(t,e);function t(n){var o=e.call(this)||this;return o._nbRegisters=n,o._nbBytesPerHash=Math.round(Math.log2(n)),o._correctionBias=pB(n),o._registers=Jb.allocateArray(o._nbRegisters,0),o}r=t,Object.defineProperty(t.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),t.prototype.update=function(n){for(var o=Jb.hashAsInt(n,this.seed).toString(2),a=1+parseInt(o.slice(0,this._nbBytesPerHash-1),2),f=o.slice(this._nbBytesPerHash),u=0;f[u]!=="1"&&u<f.length-1;)u++;this._registers[a]=Math.max(this._registers[a],u)},t.prototype.count=function(n){n===void 0&&(n=!1);var o=this._registers.reduce(function(f,u){return f+Math.pow(2,-u)},0),a=this._correctionBias*Math.pow(this._nbRegisters,2)/o;return a>Uy/30&&(a=-Uy*Math.log(1-a/Uy)),n&&(a=Math.round(a)),a},t.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},t.prototype.merge=function(n){if(this.nbRegisters!==n.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+n.nbRegisters);for(var o=new r(this.nbRegisters),a=0;a<this.nbRegisters-1;a++)o._registers[a]=Math.max(this._registers[a],n._registers[a]);return o},t.prototype.equals=function(n){if(this.nbRegisters!==n.nbRegisters)return!1;for(var o=0;o<this.nbRegisters-1;o++)if(this._registers[o]!==n._registers[o])return!1;return!0};var r;return xc([qf.Field(),_c("design:type",Number)],t.prototype,"_nbRegisters",void 0),xc([qf.Field(),_c("design:type",Number)],t.prototype,"_nbBytesPerHash",void 0),xc([qf.Field(),_c("design:type",Number)],t.prototype,"_correctionBias",void 0),xc([qf.Field(),_c("design:type",Array)],t.prototype,"_registers",void 0),t=r=xc([qf.AutoExportable("HyperLogLog",["_seed"]),cB(0,qf.Parameter("_nbRegisters")),_c("design:paramtypes",[Number])],t),t}(hB.default);Yn.default=dB});var Kh=Ne((Wf,bc)=>{(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",d=1,v=2,P=4,I=1,R=2,ee=1,ce=2,De=4,ge=8,Oe=16,ae=32,Ue=64,He=128,ne=256,we=512,be=30,je="...",gt=800,Tt=16,At=1,Bt=2,Gt=3,kt=1/0,wr=9007199254740991,Qr=17976931348623157e292,hr=0/0,Ar=4294967295,So=Ar-1,Ot=Ar>>>1,Dt=[["ary",He],["bind",ee],["bindKey",ce],["curry",ge],["curryRight",Oe],["flip",we],["partial",ae],["partialRight",Ue],["rearg",ne]],er="[object Arguments]",Re="[object Array]",Ir="[object AsyncFunction]",Qn="[object Boolean]",ei="[object Date]",to="[object DOMException]",pr="[object Error]",ti="[object Function]",Gr="[object GeneratorFunction]",Er="[object Map]",Ti="[object Number]",ls="[object Null]",en="[object Object]",Vr="[object Promise]",hs="[object Proxy]",Tr="[object RegExp]",$t="[object Set]",mn="[object String]",yn="[object Symbol]",Fi="[object Undefined]",Rr="[object WeakMap]",O="[object WeakSet]",q="[object ArrayBuffer]",oe="[object DataView]",le="[object Float32Array]",Ie="[object Float64Array]",Kt="[object Int8Array]",We="[object Int16Array]",et="[object Int32Array]",Le="[object Uint8Array]",ut="[object Uint8ClampedArray]",st="[object Uint16Array]",nr="[object Uint32Array]",Bi=/\b__p \+= '';/g,Po=/\b(__p \+=) '' \+/g,Di=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Co=/&(?:amp|lt|gt|quot|#39);/g,ea=/[&<>"']/g,ri=RegExp(Co.source),hu=RegExp(ea.source),Tn=/<%-([\s\S]+?)%>/g,ni=/<%([\s\S]+?)%>/g,Li=/<%=([\s\S]+?)%>/g,ta=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ra=/^\w*$/,Ja=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,na=/[\\^$.*+?()[\]{}|]/g,Ur=RegExp(na.source),ps=/^\s+/,m=/\s/,_=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,x=/\{\n\/\* \[wrapped with (.+)\] \*/,l=/,? & /,S=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,L=/[()=,{}\[\]\/\s]/,M=/\\(\\)?/g,Q=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ue=/\w*$/,ke=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,Ge=/^(?:0|[1-9]\d*)$/,Je=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tt=/($^)/,it=/['\n\r\u2028\u2029\\]/g,qe="\\ud800-\\udfff",rt="\\u0300-\\u036f",Ve="\\ufe20-\\ufe2f",ve="\\u20d0-\\u20ff",Be=rt+Ve+ve,he="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",Se="\\xac\\xb1\\xd7\\xf7",pe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",z="\\u2000-\\u206f",K=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ie="A-Z\\xc0-\\xd6\\xd8-\\xde",X="\\ufe0e\\ufe0f",Z=Se+pe+z+K,g="['\u2019]",C="["+qe+"]",A="["+Z+"]",T="["+Be+"]",F="\\d+",y="["+he+"]",U="["+Ee+"]",$="[^"+qe+Z+F+he+Ee+ie+"]",W="\\ud83c[\\udffb-\\udfff]",j="(?:"+T+"|"+W+")",J="[^"+qe+"]",fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Te="[\\ud800-\\udbff][\\udc00-\\udfff]",Pe="["+ie+"]",$e="\\u200d",at="(?:"+U+"|"+$+")",ft="(?:"+Pe+"|"+$+")",Et="(?:"+g+"(?:d|ll|m|re|s|t|ve))?",jt="(?:"+g+"(?:D|LL|M|RE|S|T|VE))?",tr=j+"?",dr="["+X+"]?",pu="(?:"+$e+"(?:"+[J,fe,Te].join("|")+")"+dr+tr+")*",P0="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Tc=dr+tr+pu,Fc="(?:"+[y,fe,Te].join("|")+")"+Tc,m6="(?:"+[J+T+"?",T,fe,Te,C].join("|")+")",y6=RegExp(g,"g"),g6=RegExp(T,"g"),dp=RegExp(W+"(?="+W+")|"+m6+Tc,"g"),w6=RegExp([Pe+"?"+U+"+"+Et+"(?="+[A,Pe,"$"].join("|")+")",ft+"+"+jt+"(?="+[A,Pe+at,"$"].join("|")+")",Pe+"?"+at+"+"+Et,Pe+"+"+jt,pp,P0,F,Fc].join("|"),"g"),v6=RegExp("["+$e+qe+Be+X+"]"),x6=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_6=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],b6=-1,qt={};qt[le]=qt[Ie]=qt[Kt]=qt[We]=qt[et]=qt[Le]=qt[ut]=qt[st]=qt[nr]=!0,qt[er]=qt[Re]=qt[q]=qt[Qn]=qt[oe]=qt[ei]=qt[pr]=qt[ti]=qt[Er]=qt[Ti]=qt[en]=qt[Tr]=qt[$t]=qt[mn]=qt[Rr]=!1;var Ht={};Ht[er]=Ht[Re]=Ht[q]=Ht[oe]=Ht[Qn]=Ht[ei]=Ht[le]=Ht[Ie]=Ht[Kt]=Ht[We]=Ht[et]=Ht[Er]=Ht[Ti]=Ht[en]=Ht[Tr]=Ht[$t]=Ht[mn]=Ht[yn]=Ht[Le]=Ht[ut]=Ht[st]=Ht[nr]=!0,Ht[pr]=Ht[ti]=Ht[Rr]=!1;var A6={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},E6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S6={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},P6={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},C6=parseFloat,k6=parseInt,C0=typeof global=="object"&&global&&global.Object===Object&&global,I6=typeof self=="object"&&self&&self.Object===Object&&self,Fr=C0||I6||Function("return this")(),mp=typeof Wf=="object"&&Wf&&!Wf.nodeType&&Wf,ia=mp&&typeof bc=="object"&&bc&&!bc.nodeType&&bc,k0=ia&&ia.exports===mp,yp=k0&&C0.process,ii=function(){try{var D=ia&&ia.require&&ia.require("util").types;return D||yp&&yp.binding&&yp.binding("util")}catch{}}(),I0=ii&&ii.isArrayBuffer,T0=ii&&ii.isDate,F0=ii&&ii.isMap,B0=ii&&ii.isRegExp,D0=ii&&ii.isSet,L0=ii&&ii.isTypedArray;function Fn(D,Y,H){switch(H.length){case 0:return D.call(Y);case 1:return D.call(Y,H[0]);case 2:return D.call(Y,H[0],H[1]);case 3:return D.call(Y,H[0],H[1],H[2])}return D.apply(Y,H)}function T6(D,Y,H,Ce){for(var lt=-1,Ft=D==null?0:D.length;++lt<Ft;){var Sr=D[lt];Y(Ce,Sr,H(Sr),D)}return Ce}function oi(D,Y){for(var H=-1,Ce=D==null?0:D.length;++H<Ce&&Y(D[H],H,D)!==!1;);return D}function F6(D,Y){for(var H=D==null?0:D.length;H--&&Y(D[H],H,D)!==!1;);return D}function N0(D,Y){for(var H=-1,Ce=D==null?0:D.length;++H<Ce;)if(!Y(D[H],H,D))return!1;return!0}function ds(D,Y){for(var H=-1,Ce=D==null?0:D.length,lt=0,Ft=[];++H<Ce;){var Sr=D[H];Y(Sr,H,D)&&(Ft[lt++]=Sr)}return Ft}function Bc(D,Y){var H=D==null?0:D.length;return!!H&&Xa(D,Y,0)>-1}function gp(D,Y,H){for(var Ce=-1,lt=D==null?0:D.length;++Ce<lt;)if(H(Y,D[Ce]))return!0;return!1}function Vt(D,Y){for(var H=-1,Ce=D==null?0:D.length,lt=Array(Ce);++H<Ce;)lt[H]=Y(D[H],H,D);return lt}function ms(D,Y){for(var H=-1,Ce=Y.length,lt=D.length;++H<Ce;)D[lt+H]=Y[H];return D}function wp(D,Y,H,Ce){var lt=-1,Ft=D==null?0:D.length;for(Ce&&Ft&&(H=D[++lt]);++lt<Ft;)H=Y(H,D[lt],lt,D);return H}function B6(D,Y,H,Ce){var lt=D==null?0:D.length;for(Ce&&lt&&(H=D[--lt]);lt--;)H=Y(H,D[lt],lt,D);return H}function vp(D,Y){for(var H=-1,Ce=D==null?0:D.length;++H<Ce;)if(Y(D[H],H,D))return!0;return!1}var D6=xp("length");function L6(D){return D.split("")}function N6(D){return D.match(S)||[]}function M0(D,Y,H){var Ce;return H(D,function(lt,Ft,Sr){if(Y(lt,Ft,Sr))return Ce=Ft,!1}),Ce}function Dc(D,Y,H,Ce){for(var lt=D.length,Ft=H+(Ce?1:-1);Ce?Ft--:++Ft<lt;)if(Y(D[Ft],Ft,D))return Ft;return-1}function Xa(D,Y,H){return Y===Y?G6(D,Y,H):Dc(D,O0,H)}function M6(D,Y,H,Ce){for(var lt=H-1,Ft=D.length;++lt<Ft;)if(Ce(D[lt],Y))return lt;return-1}function O0(D){return D!==D}function R0(D,Y){var H=D==null?0:D.length;return H?bp(D,Y)/H:hr}function xp(D){return function(Y){return Y==null?e:Y[D]}}function _p(D){return function(Y){return D==null?e:D[Y]}}function U0(D,Y,H,Ce,lt){return lt(D,function(Ft,Sr,Rt){H=Ce?(Ce=!1,Ft):Y(H,Ft,Sr,Rt)}),H}function O6(D,Y){var H=D.length;for(D.sort(Y);H--;)D[H]=D[H].value;return D}function bp(D,Y){for(var H,Ce=-1,lt=D.length;++Ce<lt;){var Ft=Y(D[Ce]);Ft!==e&&(H=H===e?Ft:H+Ft)}return H}function Ap(D,Y){for(var H=-1,Ce=Array(D);++H<D;)Ce[H]=Y(H);return Ce}function R6(D,Y){return Vt(Y,function(H){return[H,D[H]]})}function z0(D){return D&&D.slice(0,j0(D)+1).replace(ps,"")}function Bn(D){return function(Y){return D(Y)}}function Ep(D,Y){return Vt(Y,function(H){return D[H]})}function du(D,Y){return D.has(Y)}function K0(D,Y){for(var H=-1,Ce=D.length;++H<Ce&&Xa(Y,D[H],0)>-1;);return H}function H0(D,Y){for(var H=D.length;H--&&Xa(Y,D[H],0)>-1;);return H}function U6(D,Y){for(var H=D.length,Ce=0;H--;)D[H]===Y&&++Ce;return Ce}var z6=_p(A6),K6=_p(E6);function H6(D){return"\\"+P6[D]}function $6(D,Y){return D==null?e:D[Y]}function Za(D){return v6.test(D)}function j6(D){return x6.test(D)}function q6(D){for(var Y,H=[];!(Y=D.next()).done;)H.push(Y.value);return H}function Sp(D){var Y=-1,H=Array(D.size);return D.forEach(function(Ce,lt){H[++Y]=[lt,Ce]}),H}function $0(D,Y){return function(H){return D(Y(H))}}function ys(D,Y){for(var H=-1,Ce=D.length,lt=0,Ft=[];++H<Ce;){var Sr=D[H];(Sr===Y||Sr===h)&&(D[H]=h,Ft[lt++]=H)}return Ft}function Lc(D){var Y=-1,H=Array(D.size);return D.forEach(function(Ce){H[++Y]=Ce}),H}function W6(D){var Y=-1,H=Array(D.size);return D.forEach(function(Ce){H[++Y]=[Ce,Ce]}),H}function G6(D,Y,H){for(var Ce=H-1,lt=D.length;++Ce<lt;)if(D[Ce]===Y)return Ce;return-1}function V6(D,Y,H){for(var Ce=H+1;Ce--;)if(D[Ce]===Y)return Ce;return Ce}function Qa(D){return Za(D)?J6(D):D6(D)}function Ni(D){return Za(D)?X6(D):L6(D)}function j0(D){for(var Y=D.length;Y--&&m.test(D.charAt(Y)););return Y}var Y6=_p(S6);function J6(D){for(var Y=dp.lastIndex=0;dp.test(D);)++Y;return Y}function X6(D){return D.match(dp)||[]}function Z6(D){return D.match(w6)||[]}var Q6=function D(Y){Y=Y==null?Fr:gs.defaults(Fr.Object(),Y,gs.pick(Fr,_6));var H=Y.Array,Ce=Y.Date,lt=Y.Error,Ft=Y.Function,Sr=Y.Math,Rt=Y.Object,Pp=Y.RegExp,eA=Y.String,si=Y.TypeError,Nc=H.prototype,tA=Ft.prototype,ef=Rt.prototype,Mc=Y["__core-js_shared__"],Oc=tA.toString,Mt=ef.hasOwnProperty,rA=0,q0=function(){var i=/[^.]+$/.exec(Mc&&Mc.keys&&Mc.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),Rc=ef.toString,nA=Oc.call(Rt),iA=Fr._,oA=Pp("^"+Oc.call(Mt).replace(na,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uc=k0?Y.Buffer:e,ws=Y.Symbol,zc=Y.Uint8Array,W0=Uc?Uc.allocUnsafe:e,Kc=$0(Rt.getPrototypeOf,Rt),G0=Rt.create,V0=ef.propertyIsEnumerable,Hc=Nc.splice,Y0=ws?ws.isConcatSpreadable:e,mu=ws?ws.iterator:e,oa=ws?ws.toStringTag:e,$c=function(){try{var i=ca(Rt,"defineProperty");return i({},"",{}),i}catch{}}(),sA=Y.clearTimeout!==Fr.clearTimeout&&Y.clearTimeout,aA=Ce&&Ce.now!==Fr.Date.now&&Ce.now,fA=Y.setTimeout!==Fr.setTimeout&&Y.setTimeout,jc=Sr.ceil,qc=Sr.floor,Cp=Rt.getOwnPropertySymbols,uA=Uc?Uc.isBuffer:e,J0=Y.isFinite,cA=Nc.join,lA=$0(Rt.keys,Rt),Pr=Sr.max,Yr=Sr.min,hA=Ce.now,pA=Y.parseInt,X0=Sr.random,dA=Nc.reverse,kp=ca(Y,"DataView"),yu=ca(Y,"Map"),Ip=ca(Y,"Promise"),tf=ca(Y,"Set"),gu=ca(Y,"WeakMap"),wu=ca(Rt,"create"),Wc=gu&&new gu,rf={},mA=la(kp),yA=la(yu),gA=la(Ip),wA=la(tf),vA=la(gu),Gc=ws?ws.prototype:e,vu=Gc?Gc.valueOf:e,Z0=Gc?Gc.toString:e;function b(i){if(ir(i)&&!pt(i)&&!(i instanceof bt)){if(i instanceof ai)return i;if(Mt.call(i,"__wrapped__"))return Qg(i)}return new ai(i)}var nf=function(){function i(){}return function(s){if(!rr(s))return{};if(G0)return G0(s);i.prototype=s;var c=new i;return i.prototype=e,c}}();function Vc(){}function ai(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=e}b.templateSettings={escape:Tn,evaluate:ni,interpolate:Li,variable:"",imports:{_:b}},b.prototype=Vc.prototype,b.prototype.constructor=b,ai.prototype=nf(Vc.prototype),ai.prototype.constructor=ai;function bt(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ar,this.__views__=[]}function xA(){var i=new bt(this.__wrapped__);return i.__actions__=gn(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=gn(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=gn(this.__views__),i}function _A(){if(this.__filtered__){var i=new bt(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function bA(){var i=this.__wrapped__.value(),s=this.__dir__,c=pt(i),p=s<0,w=c?i.length:0,E=LE(0,w,this.__views__),k=E.start,B=E.end,N=B-k,te=p?B:k-1,re=this.__iteratees__,se=re.length,ye=0,ze=Yr(N,this.__takeCount__);if(!c||!p&&w==N&&ze==N)return bg(i,this.__actions__);var Xe=[];e:for(;N--&&ye<ze;){te+=s;for(var yt=-1,Ze=i[te];++yt<se;){var xt=re[yt],St=xt.iteratee,Nn=xt.type,nn=St(Ze);if(Nn==Bt)Ze=nn;else if(!nn){if(Nn==At)continue e;break e}}Xe[ye++]=Ze}return Xe}bt.prototype=nf(Vc.prototype),bt.prototype.constructor=bt;function sa(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var p=i[s];this.set(p[0],p[1])}}function AA(){this.__data__=wu?wu(null):{},this.size=0}function EA(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function SA(i){var s=this.__data__;if(wu){var c=s[i];return c===f?e:c}return Mt.call(s,i)?s[i]:e}function PA(i){var s=this.__data__;return wu?s[i]!==e:Mt.call(s,i)}function CA(i,s){var c=this.__data__;return this.size+=this.has(i)?0:1,c[i]=wu&&s===e?f:s,this}sa.prototype.clear=AA,sa.prototype.delete=EA,sa.prototype.get=SA,sa.prototype.has=PA,sa.prototype.set=CA;function ko(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var p=i[s];this.set(p[0],p[1])}}function kA(){this.__data__=[],this.size=0}function IA(i){var s=this.__data__,c=Yc(s,i);if(c<0)return!1;var p=s.length-1;return c==p?s.pop():Hc.call(s,c,1),--this.size,!0}function TA(i){var s=this.__data__,c=Yc(s,i);return c<0?e:s[c][1]}function FA(i){return Yc(this.__data__,i)>-1}function BA(i,s){var c=this.__data__,p=Yc(c,i);return p<0?(++this.size,c.push([i,s])):c[p][1]=s,this}ko.prototype.clear=kA,ko.prototype.delete=IA,ko.prototype.get=TA,ko.prototype.has=FA,ko.prototype.set=BA;function Io(i){var s=-1,c=i==null?0:i.length;for(this.clear();++s<c;){var p=i[s];this.set(p[0],p[1])}}function DA(){this.size=0,this.__data__={hash:new sa,map:new(yu||ko),string:new sa}}function LA(i){var s=al(this,i).delete(i);return this.size-=s?1:0,s}function NA(i){return al(this,i).get(i)}function MA(i){return al(this,i).has(i)}function OA(i,s){var c=al(this,i),p=c.size;return c.set(i,s),this.size+=c.size==p?0:1,this}Io.prototype.clear=DA,Io.prototype.delete=LA,Io.prototype.get=NA,Io.prototype.has=MA,Io.prototype.set=OA;function aa(i){var s=-1,c=i==null?0:i.length;for(this.__data__=new Io;++s<c;)this.add(i[s])}function RA(i){return this.__data__.set(i,f),this}function UA(i){return this.__data__.has(i)}aa.prototype.add=aa.prototype.push=RA,aa.prototype.has=UA;function Mi(i){var s=this.__data__=new ko(i);this.size=s.size}function zA(){this.__data__=new ko,this.size=0}function KA(i){var s=this.__data__,c=s.delete(i);return this.size=s.size,c}function HA(i){return this.__data__.get(i)}function $A(i){return this.__data__.has(i)}function jA(i,s){var c=this.__data__;if(c instanceof ko){var p=c.__data__;if(!yu||p.length<r-1)return p.push([i,s]),this.size=++c.size,this;c=this.__data__=new Io(p)}return c.set(i,s),this.size=c.size,this}Mi.prototype.clear=zA,Mi.prototype.delete=KA,Mi.prototype.get=HA,Mi.prototype.has=$A,Mi.prototype.set=jA;function Q0(i,s){var c=pt(i),p=!c&&ha(i),w=!c&&!p&&As(i),E=!c&&!p&&!w&&ff(i),k=c||p||w||E,B=k?Ap(i.length,eA):[],N=B.length;for(var te in i)(s||Mt.call(i,te))&&!(k&&(te=="length"||w&&(te=="offset"||te=="parent")||E&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||Do(te,N)))&&B.push(te);return B}function eg(i){var s=i.length;return s?i[zp(0,s-1)]:e}function qA(i,s){return fl(gn(i),fa(s,0,i.length))}function WA(i){return fl(gn(i))}function Tp(i,s,c){(c!==e&&!Oi(i[s],c)||c===e&&!(s in i))&&To(i,s,c)}function xu(i,s,c){var p=i[s];(!(Mt.call(i,s)&&Oi(p,c))||c===e&&!(s in i))&&To(i,s,c)}function Yc(i,s){for(var c=i.length;c--;)if(Oi(i[c][0],s))return c;return-1}function GA(i,s,c,p){return vs(i,function(w,E,k){s(p,w,c(w),k)}),p}function tg(i,s){return i&&no(s,Br(s),i)}function VA(i,s){return i&&no(s,vn(s),i)}function To(i,s,c){s=="__proto__"&&$c?$c(i,s,{configurable:!0,enumerable:!0,value:c,writable:!0}):i[s]=c}function Fp(i,s){for(var c=-1,p=s.length,w=H(p),E=i==null;++c<p;)w[c]=E?e:ld(i,s[c]);return w}function fa(i,s,c){return i===i&&(c!==e&&(i=i<=c?i:c),s!==e&&(i=i>=s?i:s)),i}function fi(i,s,c,p,w,E){var k,B=s&d,N=s&v,te=s&P;if(c&&(k=w?c(i,p,w,E):c(i)),k!==e)return k;if(!rr(i))return i;var re=pt(i);if(re){if(k=ME(i),!B)return gn(i,k)}else{var se=Jr(i),ye=se==ti||se==Gr;if(As(i))return Sg(i,B);if(se==en||se==er||ye&&!w){if(k=N||ye?{}:jg(i),!B)return N?SE(i,VA(k,i)):EE(i,tg(k,i))}else{if(!Ht[se])return w?i:{};k=OE(i,se,B)}}E||(E=new Mi);var ze=E.get(i);if(ze)return ze;E.set(i,k),vw(i)?i.forEach(function(Ze){k.add(fi(Ze,s,c,Ze,i,E))}):gw(i)&&i.forEach(function(Ze,xt){k.set(xt,fi(Ze,s,c,xt,i,E))});var Xe=te?N?Xp:Jp:N?vn:Br,yt=re?e:Xe(i);return oi(yt||i,function(Ze,xt){yt&&(xt=Ze,Ze=i[xt]),xu(k,xt,fi(Ze,s,c,xt,i,E))}),k}function YA(i){var s=Br(i);return function(c){return rg(c,i,s)}}function rg(i,s,c){var p=c.length;if(i==null)return!p;for(i=Rt(i);p--;){var w=c[p],E=s[w],k=i[w];if(k===e&&!(w in i)||!E(k))return!1}return!0}function ng(i,s,c){if(typeof i!="function")throw new si(o);return Cu(function(){i.apply(e,c)},s)}function _u(i,s,c,p){var w=-1,E=Bc,k=!0,B=i.length,N=[],te=s.length;if(!B)return N;c&&(s=Vt(s,Bn(c))),p?(E=gp,k=!1):s.length>=r&&(E=du,k=!1,s=new aa(s));e:for(;++w<B;){var re=i[w],se=c==null?re:c(re);if(re=p||re!==0?re:0,k&&se===se){for(var ye=te;ye--;)if(s[ye]===se)continue e;N.push(re)}else E(s,se,p)||N.push(re)}return N}var vs=Tg(ro),ig=Tg(Dp,!0);function JA(i,s){var c=!0;return vs(i,function(p,w,E){return c=!!s(p,w,E),c}),c}function Jc(i,s,c){for(var p=-1,w=i.length;++p<w;){var E=i[p],k=s(E);if(k!=null&&(B===e?k===k&&!Ln(k):c(k,B)))var B=k,N=E}return N}function XA(i,s,c,p){var w=i.length;for(c=mt(c),c<0&&(c=-c>w?0:w+c),p=p===e||p>w?w:mt(p),p<0&&(p+=w),p=c>p?0:_w(p);c<p;)i[c++]=s;return i}function og(i,s){var c=[];return vs(i,function(p,w,E){s(p,w,E)&&c.push(p)}),c}function zr(i,s,c,p,w){var E=-1,k=i.length;for(c||(c=UE),w||(w=[]);++E<k;){var B=i[E];s>0&&c(B)?s>1?zr(B,s-1,c,p,w):ms(w,B):p||(w[w.length]=B)}return w}var Bp=Fg(),sg=Fg(!0);function ro(i,s){return i&&Bp(i,s,Br)}function Dp(i,s){return i&&sg(i,s,Br)}function Xc(i,s){return ds(s,function(c){return Lo(i[c])})}function ua(i,s){s=_s(s,i);for(var c=0,p=s.length;i!=null&&c<p;)i=i[io(s[c++])];return c&&c==p?i:e}function ag(i,s,c){var p=s(i);return pt(i)?p:ms(p,c(i))}function tn(i){return i==null?i===e?Fi:ls:oa&&oa in Rt(i)?DE(i):WE(i)}function Lp(i,s){return i>s}function ZA(i,s){return i!=null&&Mt.call(i,s)}function QA(i,s){return i!=null&&s in Rt(i)}function eE(i,s,c){return i>=Yr(s,c)&&i<Pr(s,c)}function Np(i,s,c){for(var p=c?gp:Bc,w=i[0].length,E=i.length,k=E,B=H(E),N=1/0,te=[];k--;){var re=i[k];k&&s&&(re=Vt(re,Bn(s))),N=Yr(re.length,N),B[k]=!c&&(s||w>=120&&re.length>=120)?new aa(k&&re):e}re=i[0];var se=-1,ye=B[0];e:for(;++se<w&&te.length<N;){var ze=re[se],Xe=s?s(ze):ze;if(ze=c||ze!==0?ze:0,!(ye?du(ye,Xe):p(te,Xe,c))){for(k=E;--k;){var yt=B[k];if(!(yt?du(yt,Xe):p(i[k],Xe,c)))continue e}ye&&ye.push(Xe),te.push(ze)}}return te}function tE(i,s,c,p){return ro(i,function(w,E,k){s(p,c(w),E,k)}),p}function bu(i,s,c){s=_s(s,i),i=Vg(i,s);var p=i==null?i:i[io(ci(s))];return p==null?e:Fn(p,i,c)}function fg(i){return ir(i)&&tn(i)==er}function rE(i){return ir(i)&&tn(i)==q}function nE(i){return ir(i)&&tn(i)==ei}function Au(i,s,c,p,w){return i===s?!0:i==null||s==null||!ir(i)&&!ir(s)?i!==i&&s!==s:iE(i,s,c,p,Au,w)}function iE(i,s,c,p,w,E){var k=pt(i),B=pt(s),N=k?Re:Jr(i),te=B?Re:Jr(s);N=N==er?en:N,te=te==er?en:te;var re=N==en,se=te==en,ye=N==te;if(ye&&As(i)){if(!As(s))return!1;k=!0,re=!1}if(ye&&!re)return E||(E=new Mi),k||ff(i)?Kg(i,s,c,p,w,E):FE(i,s,N,c,p,w,E);if(!(c&I)){var ze=re&&Mt.call(i,"__wrapped__"),Xe=se&&Mt.call(s,"__wrapped__");if(ze||Xe){var yt=ze?i.value():i,Ze=Xe?s.value():s;return E||(E=new Mi),w(yt,Ze,c,p,E)}}return ye?(E||(E=new Mi),BE(i,s,c,p,w,E)):!1}function oE(i){return ir(i)&&Jr(i)==Er}function Mp(i,s,c,p){var w=c.length,E=w,k=!p;if(i==null)return!E;for(i=Rt(i);w--;){var B=c[w];if(k&&B[2]?B[1]!==i[B[0]]:!(B[0]in i))return!1}for(;++w<E;){B=c[w];var N=B[0],te=i[N],re=B[1];if(k&&B[2]){if(te===e&&!(N in i))return!1}else{var se=new Mi;if(p)var ye=p(te,re,N,i,s,se);if(!(ye===e?Au(re,te,I|R,p,se):ye))return!1}}return!0}function ug(i){if(!rr(i)||KE(i))return!1;var s=Lo(i)?oA:vt;return s.test(la(i))}function sE(i){return ir(i)&&tn(i)==Tr}function aE(i){return ir(i)&&Jr(i)==$t}function fE(i){return ir(i)&&dl(i.length)&&!!qt[tn(i)]}function cg(i){return typeof i=="function"?i:i==null?xn:typeof i=="object"?pt(i)?pg(i[0],i[1]):hg(i):Bw(i)}function Op(i){if(!Pu(i))return lA(i);var s=[];for(var c in Rt(i))Mt.call(i,c)&&c!="constructor"&&s.push(c);return s}function uE(i){if(!rr(i))return qE(i);var s=Pu(i),c=[];for(var p in i)p=="constructor"&&(s||!Mt.call(i,p))||c.push(p);return c}function Rp(i,s){return i<s}function lg(i,s){var c=-1,p=wn(i)?H(i.length):[];return vs(i,function(w,E,k){p[++c]=s(w,E,k)}),p}function hg(i){var s=Qp(i);return s.length==1&&s[0][2]?Wg(s[0][0],s[0][1]):function(c){return c===i||Mp(c,i,s)}}function pg(i,s){return td(i)&&qg(s)?Wg(io(i),s):function(c){var p=ld(c,i);return p===e&&p===s?hd(c,i):Au(s,p,I|R)}}function Zc(i,s,c,p,w){i!==s&&Bp(s,function(E,k){if(w||(w=new Mi),rr(E))cE(i,s,k,c,Zc,p,w);else{var B=p?p(nd(i,k),E,k+"",i,s,w):e;B===e&&(B=E),Tp(i,k,B)}},vn)}function cE(i,s,c,p,w,E,k){var B=nd(i,c),N=nd(s,c),te=k.get(N);if(te){Tp(i,c,te);return}var re=E?E(B,N,c+"",i,s,k):e,se=re===e;if(se){var ye=pt(N),ze=!ye&&As(N),Xe=!ye&&!ze&&ff(N);re=N,ye||ze||Xe?pt(B)?re=B:mr(B)?re=gn(B):ze?(se=!1,re=Sg(N,!0)):Xe?(se=!1,re=Pg(N,!0)):re=[]:ku(N)||ha(N)?(re=B,ha(B)?re=bw(B):(!rr(B)||Lo(B))&&(re=jg(N))):se=!1}se&&(k.set(N,re),w(re,N,p,E,k),k.delete(N)),Tp(i,c,re)}function dg(i,s){var c=i.length;if(!!c)return s+=s<0?c:0,Do(s,c)?i[s]:e}function mg(i,s,c){s.length?s=Vt(s,function(E){return pt(E)?function(k){return ua(k,E.length===1?E[0]:E)}:E}):s=[xn];var p=-1;s=Vt(s,Bn(Ye()));var w=lg(i,function(E,k,B){var N=Vt(s,function(te){return te(E)});return{criteria:N,index:++p,value:E}});return O6(w,function(E,k){return AE(E,k,c)})}function lE(i,s){return yg(i,s,function(c,p){return hd(i,p)})}function yg(i,s,c){for(var p=-1,w=s.length,E={};++p<w;){var k=s[p],B=ua(i,k);c(B,k)&&Eu(E,_s(k,i),B)}return E}function hE(i){return function(s){return ua(s,i)}}function Up(i,s,c,p){var w=p?M6:Xa,E=-1,k=s.length,B=i;for(i===s&&(s=gn(s)),c&&(B=Vt(i,Bn(c)));++E<k;)for(var N=0,te=s[E],re=c?c(te):te;(N=w(B,re,N,p))>-1;)B!==i&&Hc.call(B,N,1),Hc.call(i,N,1);return i}function gg(i,s){for(var c=i?s.length:0,p=c-1;c--;){var w=s[c];if(c==p||w!==E){var E=w;Do(w)?Hc.call(i,w,1):$p(i,w)}}return i}function zp(i,s){return i+qc(X0()*(s-i+1))}function pE(i,s,c,p){for(var w=-1,E=Pr(jc((s-i)/(c||1)),0),k=H(E);E--;)k[p?E:++w]=i,i+=c;return k}function Kp(i,s){var c="";if(!i||s<1||s>wr)return c;do s%2&&(c+=i),s=qc(s/2),s&&(i+=i);while(s);return c}function wt(i,s){return id(Gg(i,s,xn),i+"")}function dE(i){return eg(uf(i))}function mE(i,s){var c=uf(i);return fl(c,fa(s,0,c.length))}function Eu(i,s,c,p){if(!rr(i))return i;s=_s(s,i);for(var w=-1,E=s.length,k=E-1,B=i;B!=null&&++w<E;){var N=io(s[w]),te=c;if(N==="__proto__"||N==="constructor"||N==="prototype")return i;if(w!=k){var re=B[N];te=p?p(re,N,B):e,te===e&&(te=rr(re)?re:Do(s[w+1])?[]:{})}xu(B,N,te),B=B[N]}return i}var wg=Wc?function(i,s){return Wc.set(i,s),i}:xn,yE=$c?function(i,s){return $c(i,"toString",{configurable:!0,enumerable:!1,value:dd(s),writable:!0})}:xn;function gE(i){return fl(uf(i))}function ui(i,s,c){var p=-1,w=i.length;s<0&&(s=-s>w?0:w+s),c=c>w?w:c,c<0&&(c+=w),w=s>c?0:c-s>>>0,s>>>=0;for(var E=H(w);++p<w;)E[p]=i[p+s];return E}function wE(i,s){var c;return vs(i,function(p,w,E){return c=s(p,w,E),!c}),!!c}function Qc(i,s,c){var p=0,w=i==null?p:i.length;if(typeof s=="number"&&s===s&&w<=Ot){for(;p<w;){var E=p+w>>>1,k=i[E];k!==null&&!Ln(k)&&(c?k<=s:k<s)?p=E+1:w=E}return w}return Hp(i,s,xn,c)}function Hp(i,s,c,p){var w=0,E=i==null?0:i.length;if(E===0)return 0;s=c(s);for(var k=s!==s,B=s===null,N=Ln(s),te=s===e;w<E;){var re=qc((w+E)/2),se=c(i[re]),ye=se!==e,ze=se===null,Xe=se===se,yt=Ln(se);if(k)var Ze=p||Xe;else te?Ze=Xe&&(p||ye):B?Ze=Xe&&ye&&(p||!ze):N?Ze=Xe&&ye&&!ze&&(p||!yt):ze||yt?Ze=!1:Ze=p?se<=s:se<s;Ze?w=re+1:E=re}return Yr(E,So)}function vg(i,s){for(var c=-1,p=i.length,w=0,E=[];++c<p;){var k=i[c],B=s?s(k):k;if(!c||!Oi(B,N)){var N=B;E[w++]=k===0?0:k}}return E}function xg(i){return typeof i=="number"?i:Ln(i)?hr:+i}function Dn(i){if(typeof i=="string")return i;if(pt(i))return Vt(i,Dn)+"";if(Ln(i))return Z0?Z0.call(i):"";var s=i+"";return s=="0"&&1/i==-kt?"-0":s}function xs(i,s,c){var p=-1,w=Bc,E=i.length,k=!0,B=[],N=B;if(c)k=!1,w=gp;else if(E>=r){var te=s?null:IE(i);if(te)return Lc(te);k=!1,w=du,N=new aa}else N=s?[]:B;e:for(;++p<E;){var re=i[p],se=s?s(re):re;if(re=c||re!==0?re:0,k&&se===se){for(var ye=N.length;ye--;)if(N[ye]===se)continue e;s&&N.push(se),B.push(re)}else w(N,se,c)||(N!==B&&N.push(se),B.push(re))}return B}function $p(i,s){return s=_s(s,i),i=Vg(i,s),i==null||delete i[io(ci(s))]}function _g(i,s,c,p){return Eu(i,s,c(ua(i,s)),p)}function el(i,s,c,p){for(var w=i.length,E=p?w:-1;(p?E--:++E<w)&&s(i[E],E,i););return c?ui(i,p?0:E,p?E+1:w):ui(i,p?E+1:0,p?w:E)}function bg(i,s){var c=i;return c instanceof bt&&(c=c.value()),wp(s,function(p,w){return w.func.apply(w.thisArg,ms([p],w.args))},c)}function jp(i,s,c){var p=i.length;if(p<2)return p?xs(i[0]):[];for(var w=-1,E=H(p);++w<p;)for(var k=i[w],B=-1;++B<p;)B!=w&&(E[w]=_u(E[w]||k,i[B],s,c));return xs(zr(E,1),s,c)}function Ag(i,s,c){for(var p=-1,w=i.length,E=s.length,k={};++p<w;){var B=p<E?s[p]:e;c(k,i[p],B)}return k}function qp(i){return mr(i)?i:[]}function Wp(i){return typeof i=="function"?i:xn}function _s(i,s){return pt(i)?i:td(i,s)?[i]:Zg(Lt(i))}var vE=wt;function bs(i,s,c){var p=i.length;return c=c===e?p:c,!s&&c>=p?i:ui(i,s,c)}var Eg=sA||function(i){return Fr.clearTimeout(i)};function Sg(i,s){if(s)return i.slice();var c=i.length,p=W0?W0(c):new i.constructor(c);return i.copy(p),p}function Gp(i){var s=new i.constructor(i.byteLength);return new zc(s).set(new zc(i)),s}function xE(i,s){var c=s?Gp(i.buffer):i.buffer;return new i.constructor(c,i.byteOffset,i.byteLength)}function _E(i){var s=new i.constructor(i.source,ue.exec(i));return s.lastIndex=i.lastIndex,s}function bE(i){return vu?Rt(vu.call(i)):{}}function Pg(i,s){var c=s?Gp(i.buffer):i.buffer;return new i.constructor(c,i.byteOffset,i.length)}function Cg(i,s){if(i!==s){var c=i!==e,p=i===null,w=i===i,E=Ln(i),k=s!==e,B=s===null,N=s===s,te=Ln(s);if(!B&&!te&&!E&&i>s||E&&k&&N&&!B&&!te||p&&k&&N||!c&&N||!w)return 1;if(!p&&!E&&!te&&i<s||te&&c&&w&&!p&&!E||B&&c&&w||!k&&w||!N)return-1}return 0}function AE(i,s,c){for(var p=-1,w=i.criteria,E=s.criteria,k=w.length,B=c.length;++p<k;){var N=Cg(w[p],E[p]);if(N){if(p>=B)return N;var te=c[p];return N*(te=="desc"?-1:1)}}return i.index-s.index}function kg(i,s,c,p){for(var w=-1,E=i.length,k=c.length,B=-1,N=s.length,te=Pr(E-k,0),re=H(N+te),se=!p;++B<N;)re[B]=s[B];for(;++w<k;)(se||w<E)&&(re[c[w]]=i[w]);for(;te--;)re[B++]=i[w++];return re}function Ig(i,s,c,p){for(var w=-1,E=i.length,k=-1,B=c.length,N=-1,te=s.length,re=Pr(E-B,0),se=H(re+te),ye=!p;++w<re;)se[w]=i[w];for(var ze=w;++N<te;)se[ze+N]=s[N];for(;++k<B;)(ye||w<E)&&(se[ze+c[k]]=i[w++]);return se}function gn(i,s){var c=-1,p=i.length;for(s||(s=H(p));++c<p;)s[c]=i[c];return s}function no(i,s,c,p){var w=!c;c||(c={});for(var E=-1,k=s.length;++E<k;){var B=s[E],N=p?p(c[B],i[B],B,c,i):e;N===e&&(N=i[B]),w?To(c,B,N):xu(c,B,N)}return c}function EE(i,s){return no(i,ed(i),s)}function SE(i,s){return no(i,Hg(i),s)}function tl(i,s){return function(c,p){var w=pt(c)?T6:GA,E=s?s():{};return w(c,i,Ye(p,2),E)}}function of(i){return wt(function(s,c){var p=-1,w=c.length,E=w>1?c[w-1]:e,k=w>2?c[2]:e;for(E=i.length>3&&typeof E=="function"?(w--,E):e,k&&rn(c[0],c[1],k)&&(E=w<3?e:E,w=1),s=Rt(s);++p<w;){var B=c[p];B&&i(s,B,p,E)}return s})}function Tg(i,s){return function(c,p){if(c==null)return c;if(!wn(c))return i(c,p);for(var w=c.length,E=s?w:-1,k=Rt(c);(s?E--:++E<w)&&p(k[E],E,k)!==!1;);return c}}function Fg(i){return function(s,c,p){for(var w=-1,E=Rt(s),k=p(s),B=k.length;B--;){var N=k[i?B:++w];if(c(E[N],N,E)===!1)break}return s}}function PE(i,s,c){var p=s&ee,w=Su(i);function E(){var k=this&&this!==Fr&&this instanceof E?w:i;return k.apply(p?c:this,arguments)}return E}function Bg(i){return function(s){s=Lt(s);var c=Za(s)?Ni(s):e,p=c?c[0]:s.charAt(0),w=c?bs(c,1).join(""):s.slice(1);return p[i]()+w}}function sf(i){return function(s){return wp(Tw(Iw(s).replace(y6,"")),i,"")}}function Su(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var c=nf(i.prototype),p=i.apply(c,s);return rr(p)?p:c}}function CE(i,s,c){var p=Su(i);function w(){for(var E=arguments.length,k=H(E),B=E,N=af(w);B--;)k[B]=arguments[B];var te=E<3&&k[0]!==N&&k[E-1]!==N?[]:ys(k,N);if(E-=te.length,E<c)return Og(i,s,rl,w.placeholder,e,k,te,e,e,c-E);var re=this&&this!==Fr&&this instanceof w?p:i;return Fn(re,this,k)}return w}function Dg(i){return function(s,c,p){var w=Rt(s);if(!wn(s)){var E=Ye(c,3);s=Br(s),c=function(B){return E(w[B],B,w)}}var k=i(s,c,p);return k>-1?w[E?s[k]:k]:e}}function Lg(i){return Bo(function(s){var c=s.length,p=c,w=ai.prototype.thru;for(i&&s.reverse();p--;){var E=s[p];if(typeof E!="function")throw new si(o);if(w&&!k&&sl(E)=="wrapper")var k=new ai([],!0)}for(p=k?p:c;++p<c;){E=s[p];var B=sl(E),N=B=="wrapper"?Zp(E):e;N&&rd(N[0])&&N[1]==(He|ge|ae|ne)&&!N[4].length&&N[9]==1?k=k[sl(N[0])].apply(k,N[3]):k=E.length==1&&rd(E)?k[B]():k.thru(E)}return function(){var te=arguments,re=te[0];if(k&&te.length==1&&pt(re))return k.plant(re).value();for(var se=0,ye=c?s[se].apply(this,te):re;++se<c;)ye=s[se].call(this,ye);return ye}})}function rl(i,s,c,p,w,E,k,B,N,te){var re=s&He,se=s&ee,ye=s&ce,ze=s&(ge|Oe),Xe=s&we,yt=ye?e:Su(i);function Ze(){for(var xt=arguments.length,St=H(xt),Nn=xt;Nn--;)St[Nn]=arguments[Nn];if(ze)var nn=af(Ze),Mn=U6(St,nn);if(p&&(St=kg(St,p,w,ze)),E&&(St=Ig(St,E,k,ze)),xt-=Mn,ze&&xt<te){var yr=ys(St,nn);return Og(i,s,rl,Ze.placeholder,c,St,yr,B,N,te-xt)}var Ri=se?c:this,Mo=ye?Ri[i]:i;return xt=St.length,B?St=GE(St,B):Xe&&xt>1&&St.reverse(),re&&N<xt&&(St.length=N),this&&this!==Fr&&this instanceof Ze&&(Mo=yt||Su(Mo)),Mo.apply(Ri,St)}return Ze}function Ng(i,s){return function(c,p){return tE(c,i,s(p),{})}}function nl(i,s){return function(c,p){var w;if(c===e&&p===e)return s;if(c!==e&&(w=c),p!==e){if(w===e)return p;typeof c=="string"||typeof p=="string"?(c=Dn(c),p=Dn(p)):(c=xg(c),p=xg(p)),w=i(c,p)}return w}}function Vp(i){return Bo(function(s){return s=Vt(s,Bn(Ye())),wt(function(c){var p=this;return i(s,function(w){return Fn(w,p,c)})})})}function il(i,s){s=s===e?" ":Dn(s);var c=s.length;if(c<2)return c?Kp(s,i):s;var p=Kp(s,jc(i/Qa(s)));return Za(s)?bs(Ni(p),0,i).join(""):p.slice(0,i)}function kE(i,s,c,p){var w=s&ee,E=Su(i);function k(){for(var B=-1,N=arguments.length,te=-1,re=p.length,se=H(re+N),ye=this&&this!==Fr&&this instanceof k?E:i;++te<re;)se[te]=p[te];for(;N--;)se[te++]=arguments[++B];return Fn(ye,w?c:this,se)}return k}function Mg(i){return function(s,c,p){return p&&typeof p!="number"&&rn(s,c,p)&&(c=p=e),s=No(s),c===e?(c=s,s=0):c=No(c),p=p===e?s<c?1:-1:No(p),pE(s,c,p,i)}}function ol(i){return function(s,c){return typeof s=="string"&&typeof c=="string"||(s=li(s),c=li(c)),i(s,c)}}function Og(i,s,c,p,w,E,k,B,N,te){var re=s&ge,se=re?k:e,ye=re?e:k,ze=re?E:e,Xe=re?e:E;s|=re?ae:Ue,s&=~(re?Ue:ae),s&De||(s&=~(ee|ce));var yt=[i,s,w,ze,se,Xe,ye,B,N,te],Ze=c.apply(e,yt);return rd(i)&&Yg(Ze,yt),Ze.placeholder=p,Jg(Ze,i,s)}function Yp(i){var s=Sr[i];return function(c,p){if(c=li(c),p=p==null?0:Yr(mt(p),292),p&&J0(c)){var w=(Lt(c)+"e").split("e"),E=s(w[0]+"e"+(+w[1]+p));return w=(Lt(E)+"e").split("e"),+(w[0]+"e"+(+w[1]-p))}return s(c)}}var IE=tf&&1/Lc(new tf([,-0]))[1]==kt?function(i){return new tf(i)}:gd;function Rg(i){return function(s){var c=Jr(s);return c==Er?Sp(s):c==$t?W6(s):R6(s,i(s))}}function Fo(i,s,c,p,w,E,k,B){var N=s&ce;if(!N&&typeof i!="function")throw new si(o);var te=p?p.length:0;if(te||(s&=~(ae|Ue),p=w=e),k=k===e?k:Pr(mt(k),0),B=B===e?B:mt(B),te-=w?w.length:0,s&Ue){var re=p,se=w;p=w=e}var ye=N?e:Zp(i),ze=[i,s,c,p,w,re,se,E,k,B];if(ye&&jE(ze,ye),i=ze[0],s=ze[1],c=ze[2],p=ze[3],w=ze[4],B=ze[9]=ze[9]===e?N?0:i.length:Pr(ze[9]-te,0),!B&&s&(ge|Oe)&&(s&=~(ge|Oe)),!s||s==ee)var Xe=PE(i,s,c);else s==ge||s==Oe?Xe=CE(i,s,B):(s==ae||s==(ee|ae))&&!w.length?Xe=kE(i,s,c,p):Xe=rl.apply(e,ze);var yt=ye?wg:Yg;return Jg(yt(Xe,ze),i,s)}function Ug(i,s,c,p){return i===e||Oi(i,ef[c])&&!Mt.call(p,c)?s:i}function zg(i,s,c,p,w,E){return rr(i)&&rr(s)&&(E.set(s,i),Zc(i,s,e,zg,E),E.delete(s)),i}function TE(i){return ku(i)?e:i}function Kg(i,s,c,p,w,E){var k=c&I,B=i.length,N=s.length;if(B!=N&&!(k&&N>B))return!1;var te=E.get(i),re=E.get(s);if(te&&re)return te==s&&re==i;var se=-1,ye=!0,ze=c&R?new aa:e;for(E.set(i,s),E.set(s,i);++se<B;){var Xe=i[se],yt=s[se];if(p)var Ze=k?p(yt,Xe,se,s,i,E):p(Xe,yt,se,i,s,E);if(Ze!==e){if(Ze)continue;ye=!1;break}if(ze){if(!vp(s,function(xt,St){if(!du(ze,St)&&(Xe===xt||w(Xe,xt,c,p,E)))return ze.push(St)})){ye=!1;break}}else if(!(Xe===yt||w(Xe,yt,c,p,E))){ye=!1;break}}return E.delete(i),E.delete(s),ye}function FE(i,s,c,p,w,E,k){switch(c){case oe:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case q:return!(i.byteLength!=s.byteLength||!E(new zc(i),new zc(s)));case Qn:case ei:case Ti:return Oi(+i,+s);case pr:return i.name==s.name&&i.message==s.message;case Tr:case mn:return i==s+"";case Er:var B=Sp;case $t:var N=p&I;if(B||(B=Lc),i.size!=s.size&&!N)return!1;var te=k.get(i);if(te)return te==s;p|=R,k.set(i,s);var re=Kg(B(i),B(s),p,w,E,k);return k.delete(i),re;case yn:if(vu)return vu.call(i)==vu.call(s)}return!1}function BE(i,s,c,p,w,E){var k=c&I,B=Jp(i),N=B.length,te=Jp(s),re=te.length;if(N!=re&&!k)return!1;for(var se=N;se--;){var ye=B[se];if(!(k?ye in s:Mt.call(s,ye)))return!1}var ze=E.get(i),Xe=E.get(s);if(ze&&Xe)return ze==s&&Xe==i;var yt=!0;E.set(i,s),E.set(s,i);for(var Ze=k;++se<N;){ye=B[se];var xt=i[ye],St=s[ye];if(p)var Nn=k?p(St,xt,ye,s,i,E):p(xt,St,ye,i,s,E);if(!(Nn===e?xt===St||w(xt,St,c,p,E):Nn)){yt=!1;break}Ze||(Ze=ye=="constructor")}if(yt&&!Ze){var nn=i.constructor,Mn=s.constructor;nn!=Mn&&"constructor"in i&&"constructor"in s&&!(typeof nn=="function"&&nn instanceof nn&&typeof Mn=="function"&&Mn instanceof Mn)&&(yt=!1)}return E.delete(i),E.delete(s),yt}function Bo(i){return id(Gg(i,e,rw),i+"")}function Jp(i){return ag(i,Br,ed)}function Xp(i){return ag(i,vn,Hg)}var Zp=Wc?function(i){return Wc.get(i)}:gd;function sl(i){for(var s=i.name+"",c=rf[s],p=Mt.call(rf,s)?c.length:0;p--;){var w=c[p],E=w.func;if(E==null||E==i)return w.name}return s}function af(i){var s=Mt.call(b,"placeholder")?b:i;return s.placeholder}function Ye(){var i=b.iteratee||md;return i=i===md?cg:i,arguments.length?i(arguments[0],arguments[1]):i}function al(i,s){var c=i.__data__;return zE(s)?c[typeof s=="string"?"string":"hash"]:c.map}function Qp(i){for(var s=Br(i),c=s.length;c--;){var p=s[c],w=i[p];s[c]=[p,w,qg(w)]}return s}function ca(i,s){var c=$6(i,s);return ug(c)?c:e}function DE(i){var s=Mt.call(i,oa),c=i[oa];try{i[oa]=e;var p=!0}catch{}var w=Rc.call(i);return p&&(s?i[oa]=c:delete i[oa]),w}var ed=Cp?function(i){return i==null?[]:(i=Rt(i),ds(Cp(i),function(s){return V0.call(i,s)}))}:wd,Hg=Cp?function(i){for(var s=[];i;)ms(s,ed(i)),i=Kc(i);return s}:wd,Jr=tn;(kp&&Jr(new kp(new ArrayBuffer(1)))!=oe||yu&&Jr(new yu)!=Er||Ip&&Jr(Ip.resolve())!=Vr||tf&&Jr(new tf)!=$t||gu&&Jr(new gu)!=Rr)&&(Jr=function(i){var s=tn(i),c=s==en?i.constructor:e,p=c?la(c):"";if(p)switch(p){case mA:return oe;case yA:return Er;case gA:return Vr;case wA:return $t;case vA:return Rr}return s});function LE(i,s,c){for(var p=-1,w=c.length;++p<w;){var E=c[p],k=E.size;switch(E.type){case"drop":i+=k;break;case"dropRight":s-=k;break;case"take":s=Yr(s,i+k);break;case"takeRight":i=Pr(i,s-k);break}}return{start:i,end:s}}function NE(i){var s=i.match(x);return s?s[1].split(l):[]}function $g(i,s,c){s=_s(s,i);for(var p=-1,w=s.length,E=!1;++p<w;){var k=io(s[p]);if(!(E=i!=null&&c(i,k)))break;i=i[k]}return E||++p!=w?E:(w=i==null?0:i.length,!!w&&dl(w)&&Do(k,w)&&(pt(i)||ha(i)))}function ME(i){var s=i.length,c=new i.constructor(s);return s&&typeof i[0]=="string"&&Mt.call(i,"index")&&(c.index=i.index,c.input=i.input),c}function jg(i){return typeof i.constructor=="function"&&!Pu(i)?nf(Kc(i)):{}}function OE(i,s,c){var p=i.constructor;switch(s){case q:return Gp(i);case Qn:case ei:return new p(+i);case oe:return xE(i,c);case le:case Ie:case Kt:case We:case et:case Le:case ut:case st:case nr:return Pg(i,c);case Er:return new p;case Ti:case mn:return new p(i);case Tr:return _E(i);case $t:return new p;case yn:return bE(i)}}function RE(i,s){var c=s.length;if(!c)return i;var p=c-1;return s[p]=(c>1?"& ":"")+s[p],s=s.join(c>2?", ":" "),i.replace(_,`{
/* [wrapped with `+s+`] */
`)}function UE(i){return pt(i)||ha(i)||!!(Y0&&i&&i[Y0])}function Do(i,s){var c=typeof i;return s=s??wr,!!s&&(c=="number"||c!="symbol"&&Ge.test(i))&&i>-1&&i%1==0&&i<s}function rn(i,s,c){if(!rr(c))return!1;var p=typeof s;return(p=="number"?wn(c)&&Do(s,c.length):p=="string"&&s in c)?Oi(c[s],i):!1}function td(i,s){if(pt(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||Ln(i)?!0:ra.test(i)||!ta.test(i)||s!=null&&i in Rt(s)}function zE(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function rd(i){var s=sl(i),c=b[s];if(typeof c!="function"||!(s in bt.prototype))return!1;if(i===c)return!0;var p=Zp(c);return!!p&&i===p[0]}function KE(i){return!!q0&&q0 in i}var HE=Mc?Lo:vd;function Pu(i){var s=i&&i.constructor,c=typeof s=="function"&&s.prototype||ef;return i===c}function qg(i){return i===i&&!rr(i)}function Wg(i,s){return function(c){return c==null?!1:c[i]===s&&(s!==e||i in Rt(c))}}function $E(i){var s=hl(i,function(p){return c.size===u&&c.clear(),p}),c=s.cache;return s}function jE(i,s){var c=i[1],p=s[1],w=c|p,E=w<(ee|ce|He),k=p==He&&c==ge||p==He&&c==ne&&i[7].length<=s[8]||p==(He|ne)&&s[7].length<=s[8]&&c==ge;if(!(E||k))return i;p&ee&&(i[2]=s[2],w|=c&ee?0:De);var B=s[3];if(B){var N=i[3];i[3]=N?kg(N,B,s[4]):B,i[4]=N?ys(i[3],h):s[4]}return B=s[5],B&&(N=i[5],i[5]=N?Ig(N,B,s[6]):B,i[6]=N?ys(i[5],h):s[6]),B=s[7],B&&(i[7]=B),p&He&&(i[8]=i[8]==null?s[8]:Yr(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=w,i}function qE(i){var s=[];if(i!=null)for(var c in Rt(i))s.push(c);return s}function WE(i){return Rc.call(i)}function Gg(i,s,c){return s=Pr(s===e?i.length-1:s,0),function(){for(var p=arguments,w=-1,E=Pr(p.length-s,0),k=H(E);++w<E;)k[w]=p[s+w];w=-1;for(var B=H(s+1);++w<s;)B[w]=p[w];return B[s]=c(k),Fn(i,this,B)}}function Vg(i,s){return s.length<2?i:ua(i,ui(s,0,-1))}function GE(i,s){for(var c=i.length,p=Yr(s.length,c),w=gn(i);p--;){var E=s[p];i[p]=Do(E,c)?w[E]:e}return i}function nd(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var Yg=Xg(wg),Cu=fA||function(i,s){return Fr.setTimeout(i,s)},id=Xg(yE);function Jg(i,s,c){var p=s+"";return id(i,RE(p,VE(NE(p),c)))}function Xg(i){var s=0,c=0;return function(){var p=hA(),w=Tt-(p-c);if(c=p,w>0){if(++s>=gt)return arguments[0]}else s=0;return i.apply(e,arguments)}}function fl(i,s){var c=-1,p=i.length,w=p-1;for(s=s===e?p:s;++c<s;){var E=zp(c,w),k=i[E];i[E]=i[c],i[c]=k}return i.length=s,i}var Zg=$E(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(Ja,function(c,p,w,E){s.push(w?E.replace(M,"$1"):p||c)}),s});function io(i){if(typeof i=="string"||Ln(i))return i;var s=i+"";return s=="0"&&1/i==-kt?"-0":s}function la(i){if(i!=null){try{return Oc.call(i)}catch{}try{return i+""}catch{}}return""}function VE(i,s){return oi(Dt,function(c){var p="_."+c[0];s&c[1]&&!Bc(i,p)&&i.push(p)}),i.sort()}function Qg(i){if(i instanceof bt)return i.clone();var s=new ai(i.__wrapped__,i.__chain__);return s.__actions__=gn(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function YE(i,s,c){(c?rn(i,s,c):s===e)?s=1:s=Pr(mt(s),0);var p=i==null?0:i.length;if(!p||s<1)return[];for(var w=0,E=0,k=H(jc(p/s));w<p;)k[E++]=ui(i,w,w+=s);return k}function JE(i){for(var s=-1,c=i==null?0:i.length,p=0,w=[];++s<c;){var E=i[s];E&&(w[p++]=E)}return w}function XE(){var i=arguments.length;if(!i)return[];for(var s=H(i-1),c=arguments[0],p=i;p--;)s[p-1]=arguments[p];return ms(pt(c)?gn(c):[c],zr(s,1))}var ZE=wt(function(i,s){return mr(i)?_u(i,zr(s,1,mr,!0)):[]}),QE=wt(function(i,s){var c=ci(s);return mr(c)&&(c=e),mr(i)?_u(i,zr(s,1,mr,!0),Ye(c,2)):[]}),eS=wt(function(i,s){var c=ci(s);return mr(c)&&(c=e),mr(i)?_u(i,zr(s,1,mr,!0),e,c):[]});function tS(i,s,c){var p=i==null?0:i.length;return p?(s=c||s===e?1:mt(s),ui(i,s<0?0:s,p)):[]}function rS(i,s,c){var p=i==null?0:i.length;return p?(s=c||s===e?1:mt(s),s=p-s,ui(i,0,s<0?0:s)):[]}function nS(i,s){return i&&i.length?el(i,Ye(s,3),!0,!0):[]}function iS(i,s){return i&&i.length?el(i,Ye(s,3),!0):[]}function oS(i,s,c,p){var w=i==null?0:i.length;return w?(c&&typeof c!="number"&&rn(i,s,c)&&(c=0,p=w),XA(i,s,c,p)):[]}function ew(i,s,c){var p=i==null?0:i.length;if(!p)return-1;var w=c==null?0:mt(c);return w<0&&(w=Pr(p+w,0)),Dc(i,Ye(s,3),w)}function tw(i,s,c){var p=i==null?0:i.length;if(!p)return-1;var w=p-1;return c!==e&&(w=mt(c),w=c<0?Pr(p+w,0):Yr(w,p-1)),Dc(i,Ye(s,3),w,!0)}function rw(i){var s=i==null?0:i.length;return s?zr(i,1):[]}function sS(i){var s=i==null?0:i.length;return s?zr(i,kt):[]}function aS(i,s){var c=i==null?0:i.length;return c?(s=s===e?1:mt(s),zr(i,s)):[]}function fS(i){for(var s=-1,c=i==null?0:i.length,p={};++s<c;){var w=i[s];p[w[0]]=w[1]}return p}function nw(i){return i&&i.length?i[0]:e}function uS(i,s,c){var p=i==null?0:i.length;if(!p)return-1;var w=c==null?0:mt(c);return w<0&&(w=Pr(p+w,0)),Xa(i,s,w)}function cS(i){var s=i==null?0:i.length;return s?ui(i,0,-1):[]}var lS=wt(function(i){var s=Vt(i,qp);return s.length&&s[0]===i[0]?Np(s):[]}),hS=wt(function(i){var s=ci(i),c=Vt(i,qp);return s===ci(c)?s=e:c.pop(),c.length&&c[0]===i[0]?Np(c,Ye(s,2)):[]}),pS=wt(function(i){var s=ci(i),c=Vt(i,qp);return s=typeof s=="function"?s:e,s&&c.pop(),c.length&&c[0]===i[0]?Np(c,e,s):[]});function dS(i,s){return i==null?"":cA.call(i,s)}function ci(i){var s=i==null?0:i.length;return s?i[s-1]:e}function mS(i,s,c){var p=i==null?0:i.length;if(!p)return-1;var w=p;return c!==e&&(w=mt(c),w=w<0?Pr(p+w,0):Yr(w,p-1)),s===s?V6(i,s,w):Dc(i,O0,w,!0)}function yS(i,s){return i&&i.length?dg(i,mt(s)):e}var gS=wt(iw);function iw(i,s){return i&&i.length&&s&&s.length?Up(i,s):i}function wS(i,s,c){return i&&i.length&&s&&s.length?Up(i,s,Ye(c,2)):i}function vS(i,s,c){return i&&i.length&&s&&s.length?Up(i,s,e,c):i}var xS=Bo(function(i,s){var c=i==null?0:i.length,p=Fp(i,s);return gg(i,Vt(s,function(w){return Do(w,c)?+w:w}).sort(Cg)),p});function _S(i,s){var c=[];if(!(i&&i.length))return c;var p=-1,w=[],E=i.length;for(s=Ye(s,3);++p<E;){var k=i[p];s(k,p,i)&&(c.push(k),w.push(p))}return gg(i,w),c}function od(i){return i==null?i:dA.call(i)}function bS(i,s,c){var p=i==null?0:i.length;return p?(c&&typeof c!="number"&&rn(i,s,c)?(s=0,c=p):(s=s==null?0:mt(s),c=c===e?p:mt(c)),ui(i,s,c)):[]}function AS(i,s){return Qc(i,s)}function ES(i,s,c){return Hp(i,s,Ye(c,2))}function SS(i,s){var c=i==null?0:i.length;if(c){var p=Qc(i,s);if(p<c&&Oi(i[p],s))return p}return-1}function PS(i,s){return Qc(i,s,!0)}function CS(i,s,c){return Hp(i,s,Ye(c,2),!0)}function kS(i,s){var c=i==null?0:i.length;if(c){var p=Qc(i,s,!0)-1;if(Oi(i[p],s))return p}return-1}function IS(i){return i&&i.length?vg(i):[]}function TS(i,s){return i&&i.length?vg(i,Ye(s,2)):[]}function FS(i){var s=i==null?0:i.length;return s?ui(i,1,s):[]}function BS(i,s,c){return i&&i.length?(s=c||s===e?1:mt(s),ui(i,0,s<0?0:s)):[]}function DS(i,s,c){var p=i==null?0:i.length;return p?(s=c||s===e?1:mt(s),s=p-s,ui(i,s<0?0:s,p)):[]}function LS(i,s){return i&&i.length?el(i,Ye(s,3),!1,!0):[]}function NS(i,s){return i&&i.length?el(i,Ye(s,3)):[]}var MS=wt(function(i){return xs(zr(i,1,mr,!0))}),OS=wt(function(i){var s=ci(i);return mr(s)&&(s=e),xs(zr(i,1,mr,!0),Ye(s,2))}),RS=wt(function(i){var s=ci(i);return s=typeof s=="function"?s:e,xs(zr(i,1,mr,!0),e,s)});function US(i){return i&&i.length?xs(i):[]}function zS(i,s){return i&&i.length?xs(i,Ye(s,2)):[]}function KS(i,s){return s=typeof s=="function"?s:e,i&&i.length?xs(i,e,s):[]}function sd(i){if(!(i&&i.length))return[];var s=0;return i=ds(i,function(c){if(mr(c))return s=Pr(c.length,s),!0}),Ap(s,function(c){return Vt(i,xp(c))})}function ow(i,s){if(!(i&&i.length))return[];var c=sd(i);return s==null?c:Vt(c,function(p){return Fn(s,e,p)})}var HS=wt(function(i,s){return mr(i)?_u(i,s):[]}),$S=wt(function(i){return jp(ds(i,mr))}),jS=wt(function(i){var s=ci(i);return mr(s)&&(s=e),jp(ds(i,mr),Ye(s,2))}),qS=wt(function(i){var s=ci(i);return s=typeof s=="function"?s:e,jp(ds(i,mr),e,s)}),WS=wt(sd);function GS(i,s){return Ag(i||[],s||[],xu)}function VS(i,s){return Ag(i||[],s||[],Eu)}var YS=wt(function(i){var s=i.length,c=s>1?i[s-1]:e;return c=typeof c=="function"?(i.pop(),c):e,ow(i,c)});function sw(i){var s=b(i);return s.__chain__=!0,s}function JS(i,s){return s(i),i}function ul(i,s){return s(i)}var XS=Bo(function(i){var s=i.length,c=s?i[0]:0,p=this.__wrapped__,w=function(E){return Fp(E,i)};return s>1||this.__actions__.length||!(p instanceof bt)||!Do(c)?this.thru(w):(p=p.slice(c,+c+(s?1:0)),p.__actions__.push({func:ul,args:[w],thisArg:e}),new ai(p,this.__chain__).thru(function(E){return s&&!E.length&&E.push(e),E}))});function ZS(){return sw(this)}function QS(){return new ai(this.value(),this.__chain__)}function e8(){this.__values__===e&&(this.__values__=xw(this.value()));var i=this.__index__>=this.__values__.length,s=i?e:this.__values__[this.__index__++];return{done:i,value:s}}function t8(){return this}function r8(i){for(var s,c=this;c instanceof Vc;){var p=Qg(c);p.__index__=0,p.__values__=e,s?w.__wrapped__=p:s=p;var w=p;c=c.__wrapped__}return w.__wrapped__=i,s}function n8(){var i=this.__wrapped__;if(i instanceof bt){var s=i;return this.__actions__.length&&(s=new bt(this)),s=s.reverse(),s.__actions__.push({func:ul,args:[od],thisArg:e}),new ai(s,this.__chain__)}return this.thru(od)}function i8(){return bg(this.__wrapped__,this.__actions__)}var o8=tl(function(i,s,c){Mt.call(i,c)?++i[c]:To(i,c,1)});function s8(i,s,c){var p=pt(i)?N0:JA;return c&&rn(i,s,c)&&(s=e),p(i,Ye(s,3))}function a8(i,s){var c=pt(i)?ds:og;return c(i,Ye(s,3))}var f8=Dg(ew),u8=Dg(tw);function c8(i,s){return zr(cl(i,s),1)}function l8(i,s){return zr(cl(i,s),kt)}function h8(i,s,c){return c=c===e?1:mt(c),zr(cl(i,s),c)}function aw(i,s){var c=pt(i)?oi:vs;return c(i,Ye(s,3))}function fw(i,s){var c=pt(i)?F6:ig;return c(i,Ye(s,3))}var p8=tl(function(i,s,c){Mt.call(i,c)?i[c].push(s):To(i,c,[s])});function d8(i,s,c,p){i=wn(i)?i:uf(i),c=c&&!p?mt(c):0;var w=i.length;return c<0&&(c=Pr(w+c,0)),ml(i)?c<=w&&i.indexOf(s,c)>-1:!!w&&Xa(i,s,c)>-1}var m8=wt(function(i,s,c){var p=-1,w=typeof s=="function",E=wn(i)?H(i.length):[];return vs(i,function(k){E[++p]=w?Fn(s,k,c):bu(k,s,c)}),E}),y8=tl(function(i,s,c){To(i,c,s)});function cl(i,s){var c=pt(i)?Vt:lg;return c(i,Ye(s,3))}function g8(i,s,c,p){return i==null?[]:(pt(s)||(s=s==null?[]:[s]),c=p?e:c,pt(c)||(c=c==null?[]:[c]),mg(i,s,c))}var w8=tl(function(i,s,c){i[c?0:1].push(s)},function(){return[[],[]]});function v8(i,s,c){var p=pt(i)?wp:U0,w=arguments.length<3;return p(i,Ye(s,4),c,w,vs)}function x8(i,s,c){var p=pt(i)?B6:U0,w=arguments.length<3;return p(i,Ye(s,4),c,w,ig)}function _8(i,s){var c=pt(i)?ds:og;return c(i,pl(Ye(s,3)))}function b8(i){var s=pt(i)?eg:dE;return s(i)}function A8(i,s,c){(c?rn(i,s,c):s===e)?s=1:s=mt(s);var p=pt(i)?qA:mE;return p(i,s)}function E8(i){var s=pt(i)?WA:gE;return s(i)}function S8(i){if(i==null)return 0;if(wn(i))return ml(i)?Qa(i):i.length;var s=Jr(i);return s==Er||s==$t?i.size:Op(i).length}function P8(i,s,c){var p=pt(i)?vp:wE;return c&&rn(i,s,c)&&(s=e),p(i,Ye(s,3))}var C8=wt(function(i,s){if(i==null)return[];var c=s.length;return c>1&&rn(i,s[0],s[1])?s=[]:c>2&&rn(s[0],s[1],s[2])&&(s=[s[0]]),mg(i,zr(s,1),[])}),ll=aA||function(){return Fr.Date.now()};function k8(i,s){if(typeof s!="function")throw new si(o);return i=mt(i),function(){if(--i<1)return s.apply(this,arguments)}}function uw(i,s,c){return s=c?e:s,s=i&&s==null?i.length:s,Fo(i,He,e,e,e,e,s)}function cw(i,s){var c;if(typeof s!="function")throw new si(o);return i=mt(i),function(){return--i>0&&(c=s.apply(this,arguments)),i<=1&&(s=e),c}}var ad=wt(function(i,s,c){var p=ee;if(c.length){var w=ys(c,af(ad));p|=ae}return Fo(i,p,s,c,w)}),lw=wt(function(i,s,c){var p=ee|ce;if(c.length){var w=ys(c,af(lw));p|=ae}return Fo(s,p,i,c,w)});function hw(i,s,c){s=c?e:s;var p=Fo(i,ge,e,e,e,e,e,s);return p.placeholder=hw.placeholder,p}function pw(i,s,c){s=c?e:s;var p=Fo(i,Oe,e,e,e,e,e,s);return p.placeholder=pw.placeholder,p}function dw(i,s,c){var p,w,E,k,B,N,te=0,re=!1,se=!1,ye=!0;if(typeof i!="function")throw new si(o);s=li(s)||0,rr(c)&&(re=!!c.leading,se="maxWait"in c,E=se?Pr(li(c.maxWait)||0,s):E,ye="trailing"in c?!!c.trailing:ye);function ze(yr){var Ri=p,Mo=w;return p=w=e,te=yr,k=i.apply(Mo,Ri),k}function Xe(yr){return te=yr,B=Cu(xt,s),re?ze(yr):k}function yt(yr){var Ri=yr-N,Mo=yr-te,Dw=s-Ri;return se?Yr(Dw,E-Mo):Dw}function Ze(yr){var Ri=yr-N,Mo=yr-te;return N===e||Ri>=s||Ri<0||se&&Mo>=E}function xt(){var yr=ll();if(Ze(yr))return St(yr);B=Cu(xt,yt(yr))}function St(yr){return B=e,ye&&p?ze(yr):(p=w=e,k)}function Nn(){B!==e&&Eg(B),te=0,p=N=w=B=e}function nn(){return B===e?k:St(ll())}function Mn(){var yr=ll(),Ri=Ze(yr);if(p=arguments,w=this,N=yr,Ri){if(B===e)return Xe(N);if(se)return Eg(B),B=Cu(xt,s),ze(N)}return B===e&&(B=Cu(xt,s)),k}return Mn.cancel=Nn,Mn.flush=nn,Mn}var I8=wt(function(i,s){return ng(i,1,s)}),T8=wt(function(i,s,c){return ng(i,li(s)||0,c)});function F8(i){return Fo(i,we)}function hl(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new si(o);var c=function(){var p=arguments,w=s?s.apply(this,p):p[0],E=c.cache;if(E.has(w))return E.get(w);var k=i.apply(this,p);return c.cache=E.set(w,k)||E,k};return c.cache=new(hl.Cache||Io),c}hl.Cache=Io;function pl(i){if(typeof i!="function")throw new si(o);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function B8(i){return cw(2,i)}var D8=vE(function(i,s){s=s.length==1&&pt(s[0])?Vt(s[0],Bn(Ye())):Vt(zr(s,1),Bn(Ye()));var c=s.length;return wt(function(p){for(var w=-1,E=Yr(p.length,c);++w<E;)p[w]=s[w].call(this,p[w]);return Fn(i,this,p)})}),fd=wt(function(i,s){var c=ys(s,af(fd));return Fo(i,ae,e,s,c)}),mw=wt(function(i,s){var c=ys(s,af(mw));return Fo(i,Ue,e,s,c)}),L8=Bo(function(i,s){return Fo(i,ne,e,e,e,s)});function N8(i,s){if(typeof i!="function")throw new si(o);return s=s===e?s:mt(s),wt(i,s)}function M8(i,s){if(typeof i!="function")throw new si(o);return s=s==null?0:Pr(mt(s),0),wt(function(c){var p=c[s],w=bs(c,0,s);return p&&ms(w,p),Fn(i,this,w)})}function O8(i,s,c){var p=!0,w=!0;if(typeof i!="function")throw new si(o);return rr(c)&&(p="leading"in c?!!c.leading:p,w="trailing"in c?!!c.trailing:w),dw(i,s,{leading:p,maxWait:s,trailing:w})}function R8(i){return uw(i,1)}function U8(i,s){return fd(Wp(s),i)}function z8(){if(!arguments.length)return[];var i=arguments[0];return pt(i)?i:[i]}function K8(i){return fi(i,P)}function H8(i,s){return s=typeof s=="function"?s:e,fi(i,P,s)}function $8(i){return fi(i,d|P)}function j8(i,s){return s=typeof s=="function"?s:e,fi(i,d|P,s)}function q8(i,s){return s==null||rg(i,s,Br(s))}function Oi(i,s){return i===s||i!==i&&s!==s}var W8=ol(Lp),G8=ol(function(i,s){return i>=s}),ha=fg(function(){return arguments}())?fg:function(i){return ir(i)&&Mt.call(i,"callee")&&!V0.call(i,"callee")},pt=H.isArray,V8=I0?Bn(I0):rE;function wn(i){return i!=null&&dl(i.length)&&!Lo(i)}function mr(i){return ir(i)&&wn(i)}function Y8(i){return i===!0||i===!1||ir(i)&&tn(i)==Qn}var As=uA||vd,J8=T0?Bn(T0):nE;function X8(i){return ir(i)&&i.nodeType===1&&!ku(i)}function Z8(i){if(i==null)return!0;if(wn(i)&&(pt(i)||typeof i=="string"||typeof i.splice=="function"||As(i)||ff(i)||ha(i)))return!i.length;var s=Jr(i);if(s==Er||s==$t)return!i.size;if(Pu(i))return!Op(i).length;for(var c in i)if(Mt.call(i,c))return!1;return!0}function Q8(i,s){return Au(i,s)}function eP(i,s,c){c=typeof c=="function"?c:e;var p=c?c(i,s):e;return p===e?Au(i,s,e,c):!!p}function ud(i){if(!ir(i))return!1;var s=tn(i);return s==pr||s==to||typeof i.message=="string"&&typeof i.name=="string"&&!ku(i)}function tP(i){return typeof i=="number"&&J0(i)}function Lo(i){if(!rr(i))return!1;var s=tn(i);return s==ti||s==Gr||s==Ir||s==hs}function yw(i){return typeof i=="number"&&i==mt(i)}function dl(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=wr}function rr(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function ir(i){return i!=null&&typeof i=="object"}var gw=F0?Bn(F0):oE;function rP(i,s){return i===s||Mp(i,s,Qp(s))}function nP(i,s,c){return c=typeof c=="function"?c:e,Mp(i,s,Qp(s),c)}function iP(i){return ww(i)&&i!=+i}function oP(i){if(HE(i))throw new lt(n);return ug(i)}function sP(i){return i===null}function aP(i){return i==null}function ww(i){return typeof i=="number"||ir(i)&&tn(i)==Ti}function ku(i){if(!ir(i)||tn(i)!=en)return!1;var s=Kc(i);if(s===null)return!0;var c=Mt.call(s,"constructor")&&s.constructor;return typeof c=="function"&&c instanceof c&&Oc.call(c)==nA}var cd=B0?Bn(B0):sE;function fP(i){return yw(i)&&i>=-wr&&i<=wr}var vw=D0?Bn(D0):aE;function ml(i){return typeof i=="string"||!pt(i)&&ir(i)&&tn(i)==mn}function Ln(i){return typeof i=="symbol"||ir(i)&&tn(i)==yn}var ff=L0?Bn(L0):fE;function uP(i){return i===e}function cP(i){return ir(i)&&Jr(i)==Rr}function lP(i){return ir(i)&&tn(i)==O}var hP=ol(Rp),pP=ol(function(i,s){return i<=s});function xw(i){if(!i)return[];if(wn(i))return ml(i)?Ni(i):gn(i);if(mu&&i[mu])return q6(i[mu]());var s=Jr(i),c=s==Er?Sp:s==$t?Lc:uf;return c(i)}function No(i){if(!i)return i===0?i:0;if(i=li(i),i===kt||i===-kt){var s=i<0?-1:1;return s*Qr}return i===i?i:0}function mt(i){var s=No(i),c=s%1;return s===s?c?s-c:s:0}function _w(i){return i?fa(mt(i),0,Ar):0}function li(i){if(typeof i=="number")return i;if(Ln(i))return hr;if(rr(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=rr(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=z0(i);var c=me.test(i);return c||_e.test(i)?k6(i.slice(2),c?2:8):ke.test(i)?hr:+i}function bw(i){return no(i,vn(i))}function dP(i){return i?fa(mt(i),-wr,wr):i===0?i:0}function Lt(i){return i==null?"":Dn(i)}var mP=of(function(i,s){if(Pu(s)||wn(s)){no(s,Br(s),i);return}for(var c in s)Mt.call(s,c)&&xu(i,c,s[c])}),Aw=of(function(i,s){no(s,vn(s),i)}),yl=of(function(i,s,c,p){no(s,vn(s),i,p)}),yP=of(function(i,s,c,p){no(s,Br(s),i,p)}),gP=Bo(Fp);function wP(i,s){var c=nf(i);return s==null?c:tg(c,s)}var vP=wt(function(i,s){i=Rt(i);var c=-1,p=s.length,w=p>2?s[2]:e;for(w&&rn(s[0],s[1],w)&&(p=1);++c<p;)for(var E=s[c],k=vn(E),B=-1,N=k.length;++B<N;){var te=k[B],re=i[te];(re===e||Oi(re,ef[te])&&!Mt.call(i,te))&&(i[te]=E[te])}return i}),xP=wt(function(i){return i.push(e,zg),Fn(Ew,e,i)});function _P(i,s){return M0(i,Ye(s,3),ro)}function bP(i,s){return M0(i,Ye(s,3),Dp)}function AP(i,s){return i==null?i:Bp(i,Ye(s,3),vn)}function EP(i,s){return i==null?i:sg(i,Ye(s,3),vn)}function SP(i,s){return i&&ro(i,Ye(s,3))}function PP(i,s){return i&&Dp(i,Ye(s,3))}function CP(i){return i==null?[]:Xc(i,Br(i))}function kP(i){return i==null?[]:Xc(i,vn(i))}function ld(i,s,c){var p=i==null?e:ua(i,s);return p===e?c:p}function IP(i,s){return i!=null&&$g(i,s,ZA)}function hd(i,s){return i!=null&&$g(i,s,QA)}var TP=Ng(function(i,s,c){s!=null&&typeof s.toString!="function"&&(s=Rc.call(s)),i[s]=c},dd(xn)),FP=Ng(function(i,s,c){s!=null&&typeof s.toString!="function"&&(s=Rc.call(s)),Mt.call(i,s)?i[s].push(c):i[s]=[c]},Ye),BP=wt(bu);function Br(i){return wn(i)?Q0(i):Op(i)}function vn(i){return wn(i)?Q0(i,!0):uE(i)}function DP(i,s){var c={};return s=Ye(s,3),ro(i,function(p,w,E){To(c,s(p,w,E),p)}),c}function LP(i,s){var c={};return s=Ye(s,3),ro(i,function(p,w,E){To(c,w,s(p,w,E))}),c}var NP=of(function(i,s,c){Zc(i,s,c)}),Ew=of(function(i,s,c,p){Zc(i,s,c,p)}),MP=Bo(function(i,s){var c={};if(i==null)return c;var p=!1;s=Vt(s,function(E){return E=_s(E,i),p||(p=E.length>1),E}),no(i,Xp(i),c),p&&(c=fi(c,d|v|P,TE));for(var w=s.length;w--;)$p(c,s[w]);return c});function OP(i,s){return Sw(i,pl(Ye(s)))}var RP=Bo(function(i,s){return i==null?{}:lE(i,s)});function Sw(i,s){if(i==null)return{};var c=Vt(Xp(i),function(p){return[p]});return s=Ye(s),yg(i,c,function(p,w){return s(p,w[0])})}function UP(i,s,c){s=_s(s,i);var p=-1,w=s.length;for(w||(w=1,i=e);++p<w;){var E=i==null?e:i[io(s[p])];E===e&&(p=w,E=c),i=Lo(E)?E.call(i):E}return i}function zP(i,s,c){return i==null?i:Eu(i,s,c)}function KP(i,s,c,p){return p=typeof p=="function"?p:e,i==null?i:Eu(i,s,c,p)}var Pw=Rg(Br),Cw=Rg(vn);function HP(i,s,c){var p=pt(i),w=p||As(i)||ff(i);if(s=Ye(s,4),c==null){var E=i&&i.constructor;w?c=p?new E:[]:rr(i)?c=Lo(E)?nf(Kc(i)):{}:c={}}return(w?oi:ro)(i,function(k,B,N){return s(c,k,B,N)}),c}function $P(i,s){return i==null?!0:$p(i,s)}function jP(i,s,c){return i==null?i:_g(i,s,Wp(c))}function qP(i,s,c,p){return p=typeof p=="function"?p:e,i==null?i:_g(i,s,Wp(c),p)}function uf(i){return i==null?[]:Ep(i,Br(i))}function WP(i){return i==null?[]:Ep(i,vn(i))}function GP(i,s,c){return c===e&&(c=s,s=e),c!==e&&(c=li(c),c=c===c?c:0),s!==e&&(s=li(s),s=s===s?s:0),fa(li(i),s,c)}function VP(i,s,c){return s=No(s),c===e?(c=s,s=0):c=No(c),i=li(i),eE(i,s,c)}function YP(i,s,c){if(c&&typeof c!="boolean"&&rn(i,s,c)&&(s=c=e),c===e&&(typeof s=="boolean"?(c=s,s=e):typeof i=="boolean"&&(c=i,i=e)),i===e&&s===e?(i=0,s=1):(i=No(i),s===e?(s=i,i=0):s=No(s)),i>s){var p=i;i=s,s=p}if(c||i%1||s%1){var w=X0();return Yr(i+w*(s-i+C6("1e-"+((w+"").length-1))),s)}return zp(i,s)}var JP=sf(function(i,s,c){return s=s.toLowerCase(),i+(c?kw(s):s)});function kw(i){return pd(Lt(i).toLowerCase())}function Iw(i){return i=Lt(i),i&&i.replace(Je,z6).replace(g6,"")}function XP(i,s,c){i=Lt(i),s=Dn(s);var p=i.length;c=c===e?p:fa(mt(c),0,p);var w=c;return c-=s.length,c>=0&&i.slice(c,w)==s}function ZP(i){return i=Lt(i),i&&hu.test(i)?i.replace(ea,K6):i}function QP(i){return i=Lt(i),i&&Ur.test(i)?i.replace(na,"\\$&"):i}var e3=sf(function(i,s,c){return i+(c?"-":"")+s.toLowerCase()}),t3=sf(function(i,s,c){return i+(c?" ":"")+s.toLowerCase()}),r3=Bg("toLowerCase");function n3(i,s,c){i=Lt(i),s=mt(s);var p=s?Qa(i):0;if(!s||p>=s)return i;var w=(s-p)/2;return il(qc(w),c)+i+il(jc(w),c)}function i3(i,s,c){i=Lt(i),s=mt(s);var p=s?Qa(i):0;return s&&p<s?i+il(s-p,c):i}function o3(i,s,c){i=Lt(i),s=mt(s);var p=s?Qa(i):0;return s&&p<s?il(s-p,c)+i:i}function s3(i,s,c){return c||s==null?s=0:s&&(s=+s),pA(Lt(i).replace(ps,""),s||0)}function a3(i,s,c){return(c?rn(i,s,c):s===e)?s=1:s=mt(s),Kp(Lt(i),s)}function f3(){var i=arguments,s=Lt(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var u3=sf(function(i,s,c){return i+(c?"_":"")+s.toLowerCase()});function c3(i,s,c){return c&&typeof c!="number"&&rn(i,s,c)&&(s=c=e),c=c===e?Ar:c>>>0,c?(i=Lt(i),i&&(typeof s=="string"||s!=null&&!cd(s))&&(s=Dn(s),!s&&Za(i))?bs(Ni(i),0,c):i.split(s,c)):[]}var l3=sf(function(i,s,c){return i+(c?" ":"")+pd(s)});function h3(i,s,c){return i=Lt(i),c=c==null?0:fa(mt(c),0,i.length),s=Dn(s),i.slice(c,c+s.length)==s}function p3(i,s,c){var p=b.templateSettings;c&&rn(i,s,c)&&(s=e),i=Lt(i),s=yl({},s,p,Ug);var w=yl({},s.imports,p.imports,Ug),E=Br(w),k=Ep(w,E),B,N,te=0,re=s.interpolate||tt,se="__p += '",ye=Pp((s.escape||tt).source+"|"+re.source+"|"+(re===Li?Q:tt).source+"|"+(s.evaluate||tt).source+"|$","g"),ze="//# sourceURL="+(Mt.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++b6+"]")+`
`;i.replace(ye,function(Ze,xt,St,Nn,nn,Mn){return St||(St=Nn),se+=i.slice(te,Mn).replace(it,H6),xt&&(B=!0,se+=`' +
__e(`+xt+`) +
'`),nn&&(N=!0,se+=`';
`+nn+`;
__p += '`),St&&(se+=`' +
((__t = (`+St+`)) == null ? '' : __t) +
'`),te=Mn+Ze.length,Ze}),se+=`';
`;var Xe=Mt.call(s,"variable")&&s.variable;if(!Xe)se=`with (obj) {
`+se+`
}
`;else if(L.test(Xe))throw new lt(a);se=(N?se.replace(Bi,""):se).replace(Po,"$1").replace(Di,"$1;"),se="function("+(Xe||"obj")+`) {
`+(Xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(B?", __e = _.escape":"")+(N?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+se+`return __p
}`;var yt=Fw(function(){return Ft(E,ze+"return "+se).apply(e,k)});if(yt.source=se,ud(yt))throw yt;return yt}function d3(i){return Lt(i).toLowerCase()}function m3(i){return Lt(i).toUpperCase()}function y3(i,s,c){if(i=Lt(i),i&&(c||s===e))return z0(i);if(!i||!(s=Dn(s)))return i;var p=Ni(i),w=Ni(s),E=K0(p,w),k=H0(p,w)+1;return bs(p,E,k).join("")}function g3(i,s,c){if(i=Lt(i),i&&(c||s===e))return i.slice(0,j0(i)+1);if(!i||!(s=Dn(s)))return i;var p=Ni(i),w=H0(p,Ni(s))+1;return bs(p,0,w).join("")}function w3(i,s,c){if(i=Lt(i),i&&(c||s===e))return i.replace(ps,"");if(!i||!(s=Dn(s)))return i;var p=Ni(i),w=K0(p,Ni(s));return bs(p,w).join("")}function v3(i,s){var c=be,p=je;if(rr(s)){var w="separator"in s?s.separator:w;c="length"in s?mt(s.length):c,p="omission"in s?Dn(s.omission):p}i=Lt(i);var E=i.length;if(Za(i)){var k=Ni(i);E=k.length}if(c>=E)return i;var B=c-Qa(p);if(B<1)return p;var N=k?bs(k,0,B).join(""):i.slice(0,B);if(w===e)return N+p;if(k&&(B+=N.length-B),cd(w)){if(i.slice(B).search(w)){var te,re=N;for(w.global||(w=Pp(w.source,Lt(ue.exec(w))+"g")),w.lastIndex=0;te=w.exec(re);)var se=te.index;N=N.slice(0,se===e?B:se)}}else if(i.indexOf(Dn(w),B)!=B){var ye=N.lastIndexOf(w);ye>-1&&(N=N.slice(0,ye))}return N+p}function x3(i){return i=Lt(i),i&&ri.test(i)?i.replace(Co,Y6):i}var _3=sf(function(i,s,c){return i+(c?" ":"")+s.toUpperCase()}),pd=Bg("toUpperCase");function Tw(i,s,c){return i=Lt(i),s=c?e:s,s===e?j6(i)?Z6(i):N6(i):i.match(s)||[]}var Fw=wt(function(i,s){try{return Fn(i,e,s)}catch(c){return ud(c)?c:new lt(c)}}),b3=Bo(function(i,s){return oi(s,function(c){c=io(c),To(i,c,ad(i[c],i))}),i});function A3(i){var s=i==null?0:i.length,c=Ye();return i=s?Vt(i,function(p){if(typeof p[1]!="function")throw new si(o);return[c(p[0]),p[1]]}):[],wt(function(p){for(var w=-1;++w<s;){var E=i[w];if(Fn(E[0],this,p))return Fn(E[1],this,p)}})}function E3(i){return YA(fi(i,d))}function dd(i){return function(){return i}}function S3(i,s){return i==null||i!==i?s:i}var P3=Lg(),C3=Lg(!0);function xn(i){return i}function md(i){return cg(typeof i=="function"?i:fi(i,d))}function k3(i){return hg(fi(i,d))}function I3(i,s){return pg(i,fi(s,d))}var T3=wt(function(i,s){return function(c){return bu(c,i,s)}}),F3=wt(function(i,s){return function(c){return bu(i,c,s)}});function yd(i,s,c){var p=Br(s),w=Xc(s,p);c==null&&!(rr(s)&&(w.length||!p.length))&&(c=s,s=i,i=this,w=Xc(s,Br(s)));var E=!(rr(c)&&"chain"in c)||!!c.chain,k=Lo(i);return oi(w,function(B){var N=s[B];i[B]=N,k&&(i.prototype[B]=function(){var te=this.__chain__;if(E||te){var re=i(this.__wrapped__),se=re.__actions__=gn(this.__actions__);return se.push({func:N,args:arguments,thisArg:i}),re.__chain__=te,re}return N.apply(i,ms([this.value()],arguments))})}),i}function B3(){return Fr._===this&&(Fr._=iA),this}function gd(){}function D3(i){return i=mt(i),wt(function(s){return dg(s,i)})}var L3=Vp(Vt),N3=Vp(N0),M3=Vp(vp);function Bw(i){return td(i)?xp(io(i)):hE(i)}function O3(i){return function(s){return i==null?e:ua(i,s)}}var R3=Mg(),U3=Mg(!0);function wd(){return[]}function vd(){return!1}function z3(){return{}}function K3(){return""}function H3(){return!0}function $3(i,s){if(i=mt(i),i<1||i>wr)return[];var c=Ar,p=Yr(i,Ar);s=Ye(s),i-=Ar;for(var w=Ap(p,s);++c<i;)s(c);return w}function j3(i){return pt(i)?Vt(i,io):Ln(i)?[i]:gn(Zg(Lt(i)))}function q3(i){var s=++rA;return Lt(i)+s}var W3=nl(function(i,s){return i+s},0),G3=Yp("ceil"),V3=nl(function(i,s){return i/s},1),Y3=Yp("floor");function J3(i){return i&&i.length?Jc(i,xn,Lp):e}function X3(i,s){return i&&i.length?Jc(i,Ye(s,2),Lp):e}function Z3(i){return R0(i,xn)}function Q3(i,s){return R0(i,Ye(s,2))}function eC(i){return i&&i.length?Jc(i,xn,Rp):e}function tC(i,s){return i&&i.length?Jc(i,Ye(s,2),Rp):e}var rC=nl(function(i,s){return i*s},1),nC=Yp("round"),iC=nl(function(i,s){return i-s},0);function oC(i){return i&&i.length?bp(i,xn):0}function sC(i,s){return i&&i.length?bp(i,Ye(s,2)):0}return b.after=k8,b.ary=uw,b.assign=mP,b.assignIn=Aw,b.assignInWith=yl,b.assignWith=yP,b.at=gP,b.before=cw,b.bind=ad,b.bindAll=b3,b.bindKey=lw,b.castArray=z8,b.chain=sw,b.chunk=YE,b.compact=JE,b.concat=XE,b.cond=A3,b.conforms=E3,b.constant=dd,b.countBy=o8,b.create=wP,b.curry=hw,b.curryRight=pw,b.debounce=dw,b.defaults=vP,b.defaultsDeep=xP,b.defer=I8,b.delay=T8,b.difference=ZE,b.differenceBy=QE,b.differenceWith=eS,b.drop=tS,b.dropRight=rS,b.dropRightWhile=nS,b.dropWhile=iS,b.fill=oS,b.filter=a8,b.flatMap=c8,b.flatMapDeep=l8,b.flatMapDepth=h8,b.flatten=rw,b.flattenDeep=sS,b.flattenDepth=aS,b.flip=F8,b.flow=P3,b.flowRight=C3,b.fromPairs=fS,b.functions=CP,b.functionsIn=kP,b.groupBy=p8,b.initial=cS,b.intersection=lS,b.intersectionBy=hS,b.intersectionWith=pS,b.invert=TP,b.invertBy=FP,b.invokeMap=m8,b.iteratee=md,b.keyBy=y8,b.keys=Br,b.keysIn=vn,b.map=cl,b.mapKeys=DP,b.mapValues=LP,b.matches=k3,b.matchesProperty=I3,b.memoize=hl,b.merge=NP,b.mergeWith=Ew,b.method=T3,b.methodOf=F3,b.mixin=yd,b.negate=pl,b.nthArg=D3,b.omit=MP,b.omitBy=OP,b.once=B8,b.orderBy=g8,b.over=L3,b.overArgs=D8,b.overEvery=N3,b.overSome=M3,b.partial=fd,b.partialRight=mw,b.partition=w8,b.pick=RP,b.pickBy=Sw,b.property=Bw,b.propertyOf=O3,b.pull=gS,b.pullAll=iw,b.pullAllBy=wS,b.pullAllWith=vS,b.pullAt=xS,b.range=R3,b.rangeRight=U3,b.rearg=L8,b.reject=_8,b.remove=_S,b.rest=N8,b.reverse=od,b.sampleSize=A8,b.set=zP,b.setWith=KP,b.shuffle=E8,b.slice=bS,b.sortBy=C8,b.sortedUniq=IS,b.sortedUniqBy=TS,b.split=c3,b.spread=M8,b.tail=FS,b.take=BS,b.takeRight=DS,b.takeRightWhile=LS,b.takeWhile=NS,b.tap=JS,b.throttle=O8,b.thru=ul,b.toArray=xw,b.toPairs=Pw,b.toPairsIn=Cw,b.toPath=j3,b.toPlainObject=bw,b.transform=HP,b.unary=R8,b.union=MS,b.unionBy=OS,b.unionWith=RS,b.uniq=US,b.uniqBy=zS,b.uniqWith=KS,b.unset=$P,b.unzip=sd,b.unzipWith=ow,b.update=jP,b.updateWith=qP,b.values=uf,b.valuesIn=WP,b.without=HS,b.words=Tw,b.wrap=U8,b.xor=$S,b.xorBy=jS,b.xorWith=qS,b.zip=WS,b.zipObject=GS,b.zipObjectDeep=VS,b.zipWith=YS,b.entries=Pw,b.entriesIn=Cw,b.extend=Aw,b.extendWith=yl,yd(b,b),b.add=W3,b.attempt=Fw,b.camelCase=JP,b.capitalize=kw,b.ceil=G3,b.clamp=GP,b.clone=K8,b.cloneDeep=$8,b.cloneDeepWith=j8,b.cloneWith=H8,b.conformsTo=q8,b.deburr=Iw,b.defaultTo=S3,b.divide=V3,b.endsWith=XP,b.eq=Oi,b.escape=ZP,b.escapeRegExp=QP,b.every=s8,b.find=f8,b.findIndex=ew,b.findKey=_P,b.findLast=u8,b.findLastIndex=tw,b.findLastKey=bP,b.floor=Y3,b.forEach=aw,b.forEachRight=fw,b.forIn=AP,b.forInRight=EP,b.forOwn=SP,b.forOwnRight=PP,b.get=ld,b.gt=W8,b.gte=G8,b.has=IP,b.hasIn=hd,b.head=nw,b.identity=xn,b.includes=d8,b.indexOf=uS,b.inRange=VP,b.invoke=BP,b.isArguments=ha,b.isArray=pt,b.isArrayBuffer=V8,b.isArrayLike=wn,b.isArrayLikeObject=mr,b.isBoolean=Y8,b.isBuffer=As,b.isDate=J8,b.isElement=X8,b.isEmpty=Z8,b.isEqual=Q8,b.isEqualWith=eP,b.isError=ud,b.isFinite=tP,b.isFunction=Lo,b.isInteger=yw,b.isLength=dl,b.isMap=gw,b.isMatch=rP,b.isMatchWith=nP,b.isNaN=iP,b.isNative=oP,b.isNil=aP,b.isNull=sP,b.isNumber=ww,b.isObject=rr,b.isObjectLike=ir,b.isPlainObject=ku,b.isRegExp=cd,b.isSafeInteger=fP,b.isSet=vw,b.isString=ml,b.isSymbol=Ln,b.isTypedArray=ff,b.isUndefined=uP,b.isWeakMap=cP,b.isWeakSet=lP,b.join=dS,b.kebabCase=e3,b.last=ci,b.lastIndexOf=mS,b.lowerCase=t3,b.lowerFirst=r3,b.lt=hP,b.lte=pP,b.max=J3,b.maxBy=X3,b.mean=Z3,b.meanBy=Q3,b.min=eC,b.minBy=tC,b.stubArray=wd,b.stubFalse=vd,b.stubObject=z3,b.stubString=K3,b.stubTrue=H3,b.multiply=rC,b.nth=yS,b.noConflict=B3,b.noop=gd,b.now=ll,b.pad=n3,b.padEnd=i3,b.padStart=o3,b.parseInt=s3,b.random=YP,b.reduce=v8,b.reduceRight=x8,b.repeat=a3,b.replace=f3,b.result=UP,b.round=nC,b.runInContext=D,b.sample=b8,b.size=S8,b.snakeCase=u3,b.some=P8,b.sortedIndex=AS,b.sortedIndexBy=ES,b.sortedIndexOf=SS,b.sortedLastIndex=PS,b.sortedLastIndexBy=CS,b.sortedLastIndexOf=kS,b.startCase=l3,b.startsWith=h3,b.subtract=iC,b.sum=oC,b.sumBy=sC,b.template=p3,b.times=$3,b.toFinite=No,b.toInteger=mt,b.toLength=_w,b.toLower=d3,b.toNumber=li,b.toSafeInteger=dP,b.toString=Lt,b.toUpper=m3,b.trim=y3,b.trimEnd=g3,b.trimStart=w3,b.truncate=v3,b.unescape=x3,b.uniqueId=q3,b.upperCase=_3,b.upperFirst=pd,b.each=aw,b.eachRight=fw,b.first=nw,yd(b,function(){var i={};return ro(b,function(s,c){Mt.call(b.prototype,c)||(i[c]=s)}),i}(),{chain:!1}),b.VERSION=t,oi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){b[i].placeholder=b}),oi(["drop","take"],function(i,s){bt.prototype[i]=function(c){c=c===e?1:Pr(mt(c),0);var p=this.__filtered__&&!s?new bt(this):this.clone();return p.__filtered__?p.__takeCount__=Yr(c,p.__takeCount__):p.__views__.push({size:Yr(c,Ar),type:i+(p.__dir__<0?"Right":"")}),p},bt.prototype[i+"Right"]=function(c){return this.reverse()[i](c).reverse()}}),oi(["filter","map","takeWhile"],function(i,s){var c=s+1,p=c==At||c==Gt;bt.prototype[i]=function(w){var E=this.clone();return E.__iteratees__.push({iteratee:Ye(w,3),type:c}),E.__filtered__=E.__filtered__||p,E}}),oi(["head","last"],function(i,s){var c="take"+(s?"Right":"");bt.prototype[i]=function(){return this[c](1).value()[0]}}),oi(["initial","tail"],function(i,s){var c="drop"+(s?"":"Right");bt.prototype[i]=function(){return this.__filtered__?new bt(this):this[c](1)}}),bt.prototype.compact=function(){return this.filter(xn)},bt.prototype.find=function(i){return this.filter(i).head()},bt.prototype.findLast=function(i){return this.reverse().find(i)},bt.prototype.invokeMap=wt(function(i,s){return typeof i=="function"?new bt(this):this.map(function(c){return bu(c,i,s)})}),bt.prototype.reject=function(i){return this.filter(pl(Ye(i)))},bt.prototype.slice=function(i,s){i=mt(i);var c=this;return c.__filtered__&&(i>0||s<0)?new bt(c):(i<0?c=c.takeRight(-i):i&&(c=c.drop(i)),s!==e&&(s=mt(s),c=s<0?c.dropRight(-s):c.take(s-i)),c)},bt.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},bt.prototype.toArray=function(){return this.take(Ar)},ro(bt.prototype,function(i,s){var c=/^(?:filter|find|map|reject)|While$/.test(s),p=/^(?:head|last)$/.test(s),w=b[p?"take"+(s=="last"?"Right":""):s],E=p||/^find/.test(s);!w||(b.prototype[s]=function(){var k=this.__wrapped__,B=p?[1]:arguments,N=k instanceof bt,te=B[0],re=N||pt(k),se=function(xt){var St=w.apply(b,ms([xt],B));return p&&ye?St[0]:St};re&&c&&typeof te=="function"&&te.length!=1&&(N=re=!1);var ye=this.__chain__,ze=!!this.__actions__.length,Xe=E&&!ye,yt=N&&!ze;if(!E&&re){k=yt?k:new bt(this);var Ze=i.apply(k,B);return Ze.__actions__.push({func:ul,args:[se],thisArg:e}),new ai(Ze,ye)}return Xe&&yt?i.apply(this,B):(Ze=this.thru(se),Xe?p?Ze.value()[0]:Ze.value():Ze)})}),oi(["pop","push","shift","sort","splice","unshift"],function(i){var s=Nc[i],c=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",p=/^(?:pop|shift)$/.test(i);b.prototype[i]=function(){var w=arguments;if(p&&!this.__chain__){var E=this.value();return s.apply(pt(E)?E:[],w)}return this[c](function(k){return s.apply(pt(k)?k:[],w)})}}),ro(bt.prototype,function(i,s){var c=b[s];if(c){var p=c.name+"";Mt.call(rf,p)||(rf[p]=[]),rf[p].push({name:s,func:c})}}),rf[rl(e,ce).name]=[{name:"wrapper",func:e}],bt.prototype.clone=xA,bt.prototype.reverse=_A,bt.prototype.value=bA,b.prototype.at=XS,b.prototype.chain=ZS,b.prototype.commit=QS,b.prototype.next=e8,b.prototype.plant=r8,b.prototype.reverse=n8,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=i8,b.prototype.first=b.prototype.head,mu&&(b.prototype[mu]=t8),b},gs=Q6();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Fr._=gs,define(function(){return gs})):ia?((ia.exports=gs)._=gs,mp._=gs):Fr._=gs}).call(Wf)});var Qb=Ne(cn=>{"use strict";var mB=cn&&cn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gf=cn&&cn.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Vf=cn&&cn.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},zy=cn&&cn.__param||function(e,t){return function(r,n){t(r,n,e)}},yB=cn&&cn.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,f;return f={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(d){return function(v){return h([d,v])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(v){d=[6,v],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Zb=cn&&cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cn,"__esModule",{value:!0});var gB=Zb(Ji()),Ky=Zb(Ry()),es=qn(),wB=Kh(),Hy=function(){function e(){this._content=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=t},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._content[t]},e.prototype.add=function(t){var r=wB.sortedIndexBy(this._content,t,function(n){return n.frequency});this._content.splice(r,0,t)},e.prototype.remove=function(t){this._content.splice(t,1)},e.prototype.popMin=function(){return this._content.shift()},e.prototype.indexOf=function(t){return this._content.findIndex(function(r){return r.value===t})},e.prototype.clear=function(){this._content=[]},e}(),vB=function(e){mB(t,e);function t(r,n,o){var a=e.call(this)||this;return a._k=r,a._errorRate=n,a._accuracy=o,a._sketch=Ky.default.create(n,o),a._heap=new Hy,a}return t.prototype.add=function(r){this._sketch.update(r);var n=this._sketch.count(r);if(this._heap.length<this._k||n>=this._heap.get(0).frequency){var o=this._heap.indexOf(r);o>-1&&this._heap.remove(o),this._heap.add({value:r,frequency:n}),this._heap.length>this._k&&this._heap.popMin()}},t.prototype.clear=function(){this._sketch=Ky.default.create(this._errorRate,this._accuracy),this._heap.clear()},t.prototype.values=function(){for(var r=[],n=this._heap.length-1;n>=0;n--){var o=this._heap.get(n);r.push({value:o.value,frequency:o.frequency,rank:this._heap.length-n})}return r},t.prototype.iterator=function(){var r=this._heap;return function(){var n,o;return yB(this,function(a){switch(a.label){case 0:n=r.length-1,a.label=1;case 1:return n>=0?(o=r.get(n),[4,{value:o.value,frequency:o.frequency,rank:r.length-n}]):[3,4];case 2:a.sent(),a.label=3;case 3:return n--,[3,1];case 4:return[2]}})}()},Gf([es.Field(),Vf("design:type",Number)],t.prototype,"_k",void 0),Gf([es.Field(),Vf("design:type",Number)],t.prototype,"_errorRate",void 0),Gf([es.Field(),Vf("design:type",Number)],t.prototype,"_accuracy",void 0),Gf([es.Field(),Vf("design:type",Ky.default)],t.prototype,"_sketch",void 0),Gf([es.Field(function(r){return r.content},function(r){var n=new Hy;return n.content=r,n}),Vf("design:type",Hy)],t.prototype,"_heap",void 0),t=Gf([es.AutoExportable("TopK",["_seed"]),zy(0,es.Parameter("_k")),zy(1,es.Parameter("_errorRate")),zy(2,es.Parameter("_accuracy")),Vf("design:paramtypes",[Number,Number,Number])],t),t}(gB.default);cn.default=vB});var $y=Ne(Wr=>{"use strict";var r2=Wr&&Wr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hh=Wr&&Wr.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},$h=Wr&&Wr.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},e2=Wr&&Wr.__param||function(e,t){return function(r,n){t(r,n,e)}},xB=Wr&&Wr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,a=[],f;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(u){f={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(f)throw f.error}}return a},_B=Wr&&Wr.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(xB(arguments[t]));return e},bB=Wr&&Wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wr,"__esModule",{value:!0});var AB=bB(Ji()),Yf=qn(),EB=Ai(),SB=Kh(),PB=function(e){r2(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Error);function t2(e,t){return(t.a*e+t.b)%t.c}var CB=function(e){r2(t,e);function t(r,n){var o=e.call(this)||this;return o._nbHashes=r,o._hashFunctions=n,o._signature=EB.allocateArray(o._nbHashes,1/0),o}return Object.defineProperty(t.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this._signature[0]===1/0},t.prototype.add=function(r){for(var n=0;n<this._nbHashes;n++)this._signature[n]=Math.min(this._signature[n],t2(r,this._hashFunctions[n]))},t.prototype.bulkLoad=function(r){for(var n=this,o=function(u){var h=r.map(function(d){return t2(d,n._hashFunctions[u])});a._signature[u]=Math.min.apply(Math,_B([a._signature[u]],h))},a=this,f=0;f<this._nbHashes;f++)o(f)},t.prototype.compareWith=function(r){if(this.isEmpty()||r.isEmpty())throw new PB("Cannot compute a Jaccard similairty with a MinHash that contains no values");return SB.intersection(this._signature,r._signature).length/this._nbHashes},Hh([Yf.Field(),$h("design:type",Number)],t.prototype,"_nbHashes",void 0),Hh([Yf.Field(),$h("design:type",Array)],t.prototype,"_hashFunctions",void 0),Hh([Yf.Field(),$h("design:type",Array)],t.prototype,"_signature",void 0),t=Hh([Yf.AutoExportable("MinHash",["_seed"]),e2(0,Yf.Parameter("_nbHashes")),e2(1,Yf.Parameter("_hashFunctions")),$h("design:paramtypes",[Number,Array])],t),t}(AB.default);Wr.MinHash=CB});var i2=Ne(jy=>{"use strict";Object.defineProperty(jy,"__esModule",{value:!0});var kB=$y(),n2=Kh();function IB(e){if(e!==2&&e%2===0)return!1;for(var t=2;t<Math.sqrt(e);t++)if(e%t===0)return!1;return!0}function TB(e){for(var t=0;;){if(IB(e+t))return e+t;t++}}var FB=function(){function e(t,r){this._nbHashes=t,this._maxValue=r,this._hashFunctions=[];for(var n=TB(this._maxValue),o=0;o<this._nbHashes;o++){var a=n2.random(0,this._maxValue,!1),f=n2.random(0,this._maxValue,!1);this._hashFunctions.push({a,b:f,c:n})}}return e.prototype.create=function(){return new kB.MinHash(this._nbHashes,this._hashFunctions)},e}();jy.default=FB});var s2=Ne((zU,o2)=>{function BB(e,t){return e===t||e!==e&&t!==t}o2.exports=BB});var l2=Ne((KU,c2)=>{var a2=1/0,DB=17976931348623157e292,f2=0/0,LB="[object Symbol]",NB=/^\s+|\s+$/g,MB=/^[-+]0x[0-9a-f]+$/i,OB=/^0b[01]+$/i,RB=/^0o[0-7]+$/i,UB=parseInt;function zB(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}function KB(e,t,r){if(t!==t)return zB(e,HB,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function HB(e){return e!==e}var $B=Object.prototype,jB=$B.toString,qB=Math.max;function WB(e,t,r){var n=e?e.length:0;if(!n)return-1;var o=r==null?0:JB(r);return o<0&&(o=qB(n+o,0)),KB(e,t,o)}function u2(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function GB(e){return!!e&&typeof e=="object"}function VB(e){return typeof e=="symbol"||GB(e)&&jB.call(e)==LB}function YB(e){if(!e)return e===0?e:0;if(e=XB(e),e===a2||e===-a2){var t=e<0?-1:1;return t*DB}return e===e?e:0}function JB(e){var t=YB(e),r=t%1;return t===t?r?t-r:t:0}function XB(e){if(typeof e=="number")return e;if(VB(e))return f2;if(u2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=u2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(NB,"");var r=OB.test(e);return r||RB.test(e)?UB(e.slice(2),r?2:8):MB.test(e)?f2:+e}c2.exports=WB});var d2=Ne(Xi=>{"use strict";var ZB=Xi&&Xi.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},QB=Xi&&Xi.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},p2=Xi&&Xi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},e4=Xi&&Xi.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Xi,"__esModule",{value:!0});var t4=p2(s2()),qy=p2(l2()),h2=e4(Ai()),r4=qn(),n4=qn(),i4=function(){function e(r){this._elements=h2.allocateArray(r,null),this._size=r,this._length=0}t=e,Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.isFree=function(){return this._length<this._size},e.prototype.nextEmptySlot=function(){return qy.default(this._elements,null)},e.prototype.at=function(r){return this._elements[r]},e.prototype.add=function(r){return r===null||!this.isFree()?!1:(this.set(this.nextEmptySlot(),r),this._length++,!0)},e.prototype.remove=function(r){var n=qy.default(this._elements,r);return n<=-1?!1:(this.unset(n),!0)},e.prototype.has=function(r){return qy.default(this._elements,r)>-1},e.prototype.set=function(r,n){this._elements[r]=n},e.prototype.unset=function(r){this._elements[r]=null,this._length--},e.prototype.swapRandom=function(r,n){n===void 0&&(n=Math.random);var o=h2.randomInt(0,this._length-1,n),a=this._elements[o];return this._elements[o]=r,a},e.prototype.swap=function(r,n){var o=this._elements[r];return this._elements[r]=n,o},e.prototype.equals=function(r){return this._size!==r.size||this._length!==r.length?!1:this._elements.every(function(n,o){return t4.default(r.at(o),n)})};var t;return e=t=ZB([r4.Exportable({export:n4.cloneObject("Bucket","_size","_elements"),import:function(r){if(r.type!=="Bucket"||"_size"in r,!("_elements"in r))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var n=new t(r._size);return r._elements.forEach(function(o,a){o!==null&&(n._elements[a]=o,n._length++)}),n}}),QB("design:paramtypes",[Number])],e),e}();Xi.default=i4});var w2=Ne(Zi=>{"use strict";var o4=Zi&&Zi.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s4=Zi&&Zi.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a4=Zi&&Zi.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},g2=Zi&&Zi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zi,"__esModule",{value:!0});var f4=g2(Ji()),m2=g2(d2()),y2=qn(),Ac=Ai();function u4(e,t){var r=Math.ceil(Math.log2(1/t)+Math.log2(2*e));return Math.ceil(r/4)}var c4=function(e){o4(t,e);function t(n,o,a,f){f===void 0&&(f=500);var u=e.call(this)||this;return u._filter=Ac.allocateArray(n,function(){return new m2.default(a)}),u._size=n,u._bucketSize=a,u._fingerprintLength=o,u._length=0,u._maxKicks=f,u}r=t,t.create=function(n,o,a,f){a===void 0&&(a=4),f===void 0&&(f=500);var u=u4(a,o),h=Math.ceil(n/a/.955);return new r(h,u,a,f)},t.from=function(n,o,a,f){a===void 0&&(a=4),f===void 0&&(f=500);var u=Array.from(n),h=r.create(u.length,o,a,f);return u.forEach(function(d){return h.add(d)}),h},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),t.prototype.add=function(n,o,a){o===void 0&&(o=!1),a===void 0&&(a=!1);var f=this._locations(n);if(this._filter[f.firstIndex].isFree())this._filter[f.firstIndex].add(f.fingerprint);else if(this._filter[f.secondIndex].isFree())this._filter[f.secondIndex].add(f.fingerprint);else{for(var u=this.random()<.5?f.firstIndex:f.secondIndex,h=f.fingerprint,d=[],v=0;v<this._maxKicks;v++){var P=Ac.randomInt(0,this._filter[u].length-1,this.random),I=this._filter[u].at(P);d.push([u,P,I]),this._filter[u].set(P,h),h=I;var R=Ac.hashAsInt(h,this.seed,64);if(u=Math.abs(u^Math.abs(R))%this._filter.length,this._filter[u].isFree())return this._filter[u].add(h),this._length++,!0}if(!a)for(var ee=d.length-1;ee>=0;ee--){var ce=d[ee];this._filter[ce[0]].set(ce[1],ce[2])}if(o)throw new Error('The Cuckoo Filter is full, cannot insert element "'+n+'"');return!1}return this._length++,!0},t.prototype.remove=function(n){var o=this._locations(n);return this._filter[o.firstIndex].has(o.fingerprint)?(this._filter[o.firstIndex].remove(o.fingerprint),this._length--,!0):this._filter[o.secondIndex].has(o.fingerprint)?(this._filter[o.secondIndex].remove(o.fingerprint),this._length--,!0):!1},t.prototype.has=function(n){var o=this._locations(n);return this._filter[o.firstIndex].has(o.fingerprint)||this._filter[o.secondIndex].has(o.fingerprint)},t.prototype.rate=function(){var n=this._computeHashTableLoad(),o=this._fingerprintLength/n.load;return Math.pow(2,Math.log2(2*this._bucketSize)-n.load*o)},t.prototype._computeHashTableLoad=function(){var n=this._filter.length*this._bucketSize,o=this._filter.reduce(function(a,f){return a+f.length},0);return{used:o,free:n-o,size:n,load:o/n}},t.prototype._locations=function(n){var o=Ac.hashIntAndString(n,this.seed,16,64),a=o.int;if(this._fingerprintLength>o.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+o.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var f=o.string.substring(0,this._fingerprintLength),u=Math.abs(a),h=Math.abs(Ac.hashAsInt(f,this.seed,64)),d=Math.abs(u^h),v={fingerprint:f,firstIndex:u%this._size,secondIndex:d%this._size};return v},t.prototype.equals=function(n){for(var o=0,a=!0;a&&o<this._filter.length;){var f=this._filter[o];n._filter[o].equals(f)||(a=!1),o++}return a};var r;return t=r=s4([y2.Exportable({export:y2.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(n){if(n.type!=="CuckooFilter"||!("_size"in n)||!("_fingerprintLength"in n)||!("_length"in n)||!("_maxKicks"in n)||!("_filter"in n)||!("_seed"in n))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var o=new r(n._size,n._fingerprintLength,n._bucketSize,n._maxKicks);return o._length=n._length,o._filter=n._filter.map(function(a){var f=new m2.default(a._size);return a._elements.forEach(function(u,h){u!==null&&(f._elements[h]=u,f._length++)}),f}),o.seed=n.seed,o}}),a4("design:paramtypes",[Number,Number,Number,Number])],t),t}(f4.default);Zi.default=c4});var Gy=Ne(Jn=>{"use strict";var l4=Jn&&Jn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jh=Jn&&Jn.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},qh=Jn&&Jn.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},Wy=Jn&&Jn.__param||function(e,t){return function(r,n){t(r,n,e)}},h4=Jn&&Jn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jn,"__esModule",{value:!0});var Ha=Dh(),Ec=Ai(),$a=qn(),p4=h4(Ji()),d4=Symbol.for("nodejs.util.inspect.custom"),m4=function(e){l4(t,e);function t(n,o,a){var f=e.call(this)||this;return f._idSum=n,f._hashSum=o,f._count=a,f}r=t,t.empty=function(){return new r(Ha.Buffer.allocUnsafe(0).fill(0),Ha.Buffer.allocUnsafe(0).fill(0),0)},t.prototype[d4]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(t.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.add=function(n,o){this._idSum=Ec.xorBuffer(this._idSum,n),this._hashSum=Ec.xorBuffer(this._hashSum,o),this._count++},t.prototype.xorm=function(n){return new r(Ec.xorBuffer(this._idSum,n.idSum),Ec.xorBuffer(this._hashSum,n.hashSum),this._count-n.count)},t.prototype.isEmpty=function(){return this._idSum.equals(Ha.Buffer.from(""))&&this._hashSum.equals(Ha.Buffer.from(""))&&this._count===0},t.prototype.equals=function(n){return this._count===n.count&&this._idSum.equals(n.idSum)&&this._hashSum.equals(n.hashSum)},t.prototype.isPure=function(){if(this.isEmpty()||this._count!==1&&this._count!==-1)return!1;var n=Ec.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(Ha.Buffer.from(n.first))};var r;return jh([$a.Field(function(n){return n.toString()},Ha.Buffer.from),qh("design:type",Object)],t.prototype,"_idSum",void 0),jh([$a.Field(function(n){return n.toString()},Ha.Buffer.from),qh("design:type",Object)],t.prototype,"_hashSum",void 0),jh([$a.Field(),qh("design:type",Number)],t.prototype,"_count",void 0),t=r=jh([$a.AutoExportable("Cell",["_seed"]),Wy(0,$a.Parameter("_idSum")),Wy(1,$a.Parameter("_hashSum")),Wy(2,$a.Parameter("_count")),qh("design:paramtypes",[Object,Object,Number])],t),t}(p4.default);Jn.default=m4});var A2=Ne(ln=>{"use strict";var y4=ln&&ln.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wh=ln&&ln.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(f=e[u])&&(a=(o<3?f(a):o>3?f(t,r,a):f(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Gh=ln&&ln.__metadata||function(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)},v2=ln&&ln.__param||function(e,t){return function(r,n){t(r,n,e)}},x2=ln&&ln.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,f;return f={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(d){return function(v){return h([d,v])}}function h(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=d[0]&2?o.return:d[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,d[1])).done)return a;switch(o=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(v){d=[6,v],o=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},b2=ln&&ln.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ln,"__esModule",{value:!0});var ja=Dh(),g4=b2(Ji()),Vh=b2(Gy()),Jf=qn(),ts=Ai(),_2=Mh(),w4=function(e){y4(t,e);function t(n,o){o===void 0&&(o=3);var a=e.call(this)||this;if(ja.Buffer===void 0)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(o<=0)throw new Error("The hashCount must be a non-zero, positive integer");return a._size=n,a._hashCount=o,a._elements=ts.allocateArray(a._size,function(){return Vh.default.empty()}),a}r=t,t.create=function(n,o){var a=_2.optimalFilterSize(n,o),f=_2.optimalHashes(a,n);return new r(a,f)},t.from=function(n,o){var a=Array.from(n),f=r.create(a.length,o);return a.forEach(function(u){return f.add(u)}),f},Object.defineProperty(t.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._elements.reduce(function(n,o){return n+o.count},0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),t.prototype.add=function(n){for(var o=ts.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),a=ts.getDistinctIndices(o.string.first,this._size,this._hashCount,this.seed),f=0;f<this._hashCount;++f)this._elements[a[f]].add(n,ja.Buffer.from(o.string.first))},t.prototype.remove=function(n){for(var o=ts.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),a=ts.getDistinctIndices(o.string.first,this.size,this._hashCount,this.seed),f=0;f<this._hashCount;++f)this._elements[a[f]]=this._elements[a[f]].xorm(new Vh.default(ja.Buffer.from(n),ja.Buffer.from(o.string.first),1));return!0},t.prototype.has=function(n){for(var o=ts.allInOneHashTwice(JSON.stringify(n.toJSON()),this.seed),a=ts.getDistinctIndices(o.string.first,this.size,this._hashCount,this.seed),f=0;f<this._hashCount;++f){if(this._elements[a[f]].count===0)return!1;if(this._elements[a[f]].count===1)return!!this._elements[a[f]].idSum.equals(n)}return!0},t.prototype.listEntries=function(){var n=this,o=[];return function(){var a,f,u;return x2(this,function(h){switch(h.label){case 0:a=function(d){var v;return x2(this,function(P){switch(P.label){case 0:return v=n._elements[d],v.count>0&&o.findIndex(function(I){return I.equals(v.idSum)})===-1?n.has(v.idSum)?(o.push(v.idSum),[4,v.idSum]):[3,2]:[3,3];case 1:return P.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}})},f=0,h.label=1;case 1:return f<n._elements.length-1?[5,a(f)]:[3,4];case 2:if(u=h.sent(),typeof u=="object")return[2,u.value];h.label=3;case 3:return f++,[3,1];case 4:return[2,!0]}})}()},t.prototype.substract=function(n){if(this.size!==n.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var o=new r(n._size,n._hashCount);o.seed=this.seed;for(var a=0;a<this.size;++a)o._elements[a]=this._elements[a].xorm(n._elements[a]);return o},t.prototype.equals=function(n){if(n._size!==this._size||n._hashCount!==this._hashCount||n.seed!==this.seed)return!1;for(var o=0;o<n._elements.length;++o)if(!n._elements[o].equals(this._elements[o]))return!1;return!0},t.prototype.decode=function(n,o){n===void 0&&(n=[]),o===void 0&&(o=[]);for(var a=[],f=null,u=0;u<this._elements.length;++u)f=this._elements[u],f.isPure()&&a.push(u);for(;a.length!==0;){f=this._elements[a.pop()];var h=f.idSum,d=f.count;if(f.isPure()){if(d===1)n.push(h);else if(d===-1)o.push(h);else throw new Error("Please report, not possible");for(var v=ts.allInOneHashTwice(JSON.stringify(h.toJSON()),this.seed),P=ts.getDistinctIndices(v.string.first,this._size,this._hashCount,this.seed),u=0;u<P.length;++u)this._elements[P[u]]=this._elements[P[u]].xorm(new Vh.default(h,ja.Buffer.from(v.string.first),d)),this._elements[P[u]].isPure()&&a.push(P[u])}}return this._elements.findIndex(function(I){return!I.isEmpty()})>-1?{success:!1,reason:{cell:f,iblt:this},additional:n,missing:o}:{success:!0,additional:n,missing:o}};var r;return Wh([Jf.Field(),Gh("design:type",Number)],t.prototype,"_size",void 0),Wh([Jf.Field(),Gh("design:type",Number)],t.prototype,"_hashCount",void 0),Wh([Jf.Field(void 0,function(n){return n.map(function(o){var a=new Vh.default(ja.Buffer.from(o._idSum),ja.Buffer.from(o._hashSum),o._count);return a.seed=o._seed,a})}),Gh("design:type",Array)],t.prototype,"_elements",void 0),t=r=Wh([Jf.AutoExportable("InvertibleBloomFilter",["_seed"]),v2(0,Jf.Parameter("_size")),v2(1,Jf.Parameter("_hashCount")),Gh("design:paramtypes",[Number,Number])],t),t}(g4.default);ln.default=w4});var E2=Ne(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});var v4=jb();Xn.BloomFilter=v4.default;var x4=Gb();Xn.CountingBloomFilter=x4.default;var _4=Vb();Xn.PartitionedBloomFilter=_4.default;var b4=Ry();Xn.CountMinSketch=b4.default;var A4=Xb();Xn.HyperLogLog=A4.default;var E4=Qb();Xn.TopK=E4.default;var S4=$y();Xn.MinHash=S4.MinHash;var P4=i2();Xn.MinHashFactory=P4.default;var C4=w2();Xn.CuckooFilter=C4.default;var k4=A2();Xn.InvertibleBloomFilter=k4.default;var I4=Gy();Xn.Cell=I4.default});var XD={};dt(XD,{InitialisationError:()=>hp,Scenario:()=>Am,VERSION:()=>Cl,account:()=>_0,apps:()=>b0,authenticatedUsername:()=>xD,checkFileSystemVersion:()=>Q2,crypto:()=>Dr,dataRoot:()=>au,did:()=>Ci,dns:()=>Es,errors:()=>y0,fs:()=>JD,initialise:()=>YD,initialize:()=>YD,ipfs:()=>Go,isSupported:()=>d6,keystore:()=>ju,leave:()=>_D,loadFileSystem:()=>Ic,lobby:()=>A0,machinery:()=>fo,path:()=>Xr,redirectToLobby:()=>bD,setup:()=>E0,ucan:()=>cs});var S0=oo(wl(),1);function so(e,t){return typeof e=="object"&&e!=null&&t in e}var vl=e=>e!==void 0,cf=e=>e!==null,xl=cf,_d=e=>vl(e)&&cf(e),_l=e=>typeof e=="boolean",Ui=e=>typeof e=="number",Yt=e=>typeof e=="string",nt=e=>e!==null&&typeof e=="object",bd=e=>typeof Blob>"u"?!1:e instanceof Blob||nt(e)&&e?.constructor?.name==="Blob";var fo={};dt(fo,{UCANS_STORAGE_KEY:()=>vf,USERNAME_STORAGE_KEY:()=>Cs,VERSION:()=>Cl,api:()=>On,arrContains:()=>Ik,arrbufs:()=>Iu,assertBrowser:()=>Kr,asyncWaterfall:()=>Tk,authenticatedUserDomain:()=>Mu,authenticatedUsername:()=>on,base64:()=>hi,blob:()=>yf,decodeCID:()=>xe,encodeCID:()=>Pk,hasProp:()=>so,isBlob:()=>bd,isBool:()=>_l,isBrowser:()=>f1,isDefined:()=>vl,isJust:()=>xl,isNum:()=>Ui,isObject:()=>nt,isString:()=>Yt,isValue:()=>_d,mapObj:()=>Gd,mapObjAsync:()=>kk,notNull:()=>cf,removeKeyFromObj:()=>Nu,updateOrRemoveKeyFromObj:()=>Ck});var On={};dt(On,{did:()=>pC});var Es={};dt(Es,{cloudflareLookup:()=>Ow,dnsOverHttps:()=>Ad,googleLookup:()=>Mw,lookupDnsLink:()=>ma,lookupTxtRecord:()=>lf});async function lf(e){return Promise.any([Mw(e),Ow(e)])}async function Mw(e){return Ad(`https://dns.google/resolve?name=${e}&type=txt`)}function Ow(e){return Ad(`https://cloudflare-dns.com/dns-query?name=${e}&type=txt`)}function Ad(e){return fetch(e,{headers:{accept:"application/dns-json"}}).then(t=>t.json()).then(t=>{if(t.Answer){let r=t.Answer.map(n=>(n.data||"").replace(/^"+|"+$/g,""));return r[0][3]===";"?r.sort((n,o)=>n.slice(0,4).localeCompare(o.slice(0,4))).map(n=>n.slice(4)).join(""):r.join("")}else return null})}async function ma(e){let t=await lf(e.startsWith("_dnslink.")?e:`_dnslink.${e}`);return t&&!t.includes("/ipns/")?t.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null}var Me={debug:!1,endpoints:{api:"https://runfission.com",apiVersion:"v2",apiUrl:null,lobby:"https://auth.fission.codes",user:"fission.name"},getApiEndpoint:()=>Me.endpoints.apiUrl?Me.endpoints.apiUrl:`${Me.endpoints.api}/${Me.endpoints.apiVersion}/api`,userMessages:{versionMismatch:{newer:async()=>Rw(`Sorry, we can't sync your filesystem with this app. This app only understands older versions of filesystems.

Please try to hard refresh this site or let this app's developer know.

Feel free to contact Fission support: support@fission.codes`),older:async()=>Rw(`Sorry, we can't sync your filesystem with this app. Your filesystem version is out-dated and it needs to be migrated.

Run a migration (https://guide.fission.codes/accounts/account-signup/account-migration) or talk to Fission support: support@fission.codes`)}},shouldPin:!1};function Rw(e){globalThis.alert!=null&&globalThis.alert(e)}var ya={did:null,host:null,lastFetched:0};async function pC(){let e;try{e=new URL(Me.getApiEndpoint()).host}catch{throw new Error("Unable to parse API Endpoint")}let t=Date.now();if((ya.host!==e||ya.lastFetched+1e3*60*60*3<=t)&&(ya.did=await lf("_did."+e),ya.host=e,ya.lastFetched=t),!ya.did)throw new Error("Couldn't get the Fission API DID");return ya.did}var Iu={};dt(Iu,{equal:()=>dC});var dC=(e,t)=>{let r=new Uint8Array(e),n=new Uint8Array(t);if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0};var hi={};dt(hi,{decode:()=>i1,encode:()=>o1,makeUrlSafe:()=>s1,makeUrlUnsafe:()=>a1,urlDecode:()=>xk,urlEncode:()=>qd});function Ed(e,t){t||(t=e.reduce((o,a)=>o+a.length,0));let r=new Uint8Array(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}var Id={};dt(Id,{identity:()=>xC});function mC(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var a=e.charAt(o),f=a.charCodeAt(0);if(r[f]!==255)throw new TypeError(a+" is ambiguous");r[f]=o}var u=e.length,h=e.charAt(0),d=Math.log(u)/Math.log(256),v=Math.log(256)/Math.log(u);function P(ee){if(ee instanceof Uint8Array||(ArrayBuffer.isView(ee)?ee=new Uint8Array(ee.buffer,ee.byteOffset,ee.byteLength):Array.isArray(ee)&&(ee=Uint8Array.from(ee))),!(ee instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(ee.length===0)return"";for(var ce=0,De=0,ge=0,Oe=ee.length;ge!==Oe&&ee[ge]===0;)ge++,ce++;for(var ae=(Oe-ge)*v+1>>>0,Ue=new Uint8Array(ae);ge!==Oe;){for(var He=ee[ge],ne=0,we=ae-1;(He!==0||ne<De)&&we!==-1;we--,ne++)He+=256*Ue[we]>>>0,Ue[we]=He%u>>>0,He=He/u>>>0;if(He!==0)throw new Error("Non-zero carry");De=ne,ge++}for(var be=ae-De;be!==ae&&Ue[be]===0;)be++;for(var je=h.repeat(ce);be<ae;++be)je+=e.charAt(Ue[be]);return je}function I(ee){if(typeof ee!="string")throw new TypeError("Expected String");if(ee.length===0)return new Uint8Array;var ce=0;if(ee[ce]!==" "){for(var De=0,ge=0;ee[ce]===h;)De++,ce++;for(var Oe=(ee.length-ce)*d+1>>>0,ae=new Uint8Array(Oe);ee[ce];){var Ue=r[ee.charCodeAt(ce)];if(Ue===255)return;for(var He=0,ne=Oe-1;(Ue!==0||He<ge)&&ne!==-1;ne--,He++)Ue+=u*ae[ne]>>>0,ae[ne]=Ue%256>>>0,Ue=Ue/256>>>0;if(Ue!==0)throw new Error("Non-zero carry");ge=He,ce++}if(ee[ce]!==" "){for(var we=Oe-ge;we!==Oe&&ae[we]===0;)we++;for(var be=new Uint8Array(De+(Oe-we)),je=De;we!==Oe;)be[je++]=ae[we++];return be}}}function R(ee){var ce=I(ee);if(ce)return ce;throw new Error(`Non-${t} character`)}return{encode:P,decodeUnsafe:I,decode:R}}var yC=mC,gC=yC,Uw=gC;var o5=new Uint8Array(0);var zw=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Oo=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var Kw=e=>new TextEncoder().encode(e),Hw=e=>new TextDecoder().decode(e);var Sd=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Pd=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseDecode=n}decode(t){if(typeof t=="string")switch(t[0]){case this.prefix:return this.baseDecode(t.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(t){return jw(this,t)}},Cd=class{constructor(t){this.decoders=t}or(t){return jw(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},jw=(e,t)=>new Cd({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),kd=class{constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Sd(t,r,n),this.decoder=new Pd(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},bl=({name:e,prefix:t,encode:r,decode:n})=>new kd(e,t,r,n),Ss=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:o}=Uw(r,t);return bl({prefix:e,name:t,encode:n,decode:a=>Oo(o(a))})},wC=(e,t,r,n)=>{let o={};for(let v=0;v<t.length;++v)o[t[v]]=v;let a=e.length;for(;e[a-1]==="=";)--a;let f=new Uint8Array(a*r/8|0),u=0,h=0,d=0;for(let v=0;v<a;++v){let P=o[e[v]];if(P===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|P,u+=r,u>=8&&(u-=8,f[d++]=255&h>>u)}if(u>=r||255&h<<8-u)throw new SyntaxError("Unexpected end of data");return f},vC=(e,t,r)=>{let n=t[t.length-1]==="=",o=(1<<r)-1,a="",f=0,u=0;for(let h=0;h<e.length;++h)for(u=u<<8|e[h],f+=8;f>r;)f-=r,a+=t[o&u>>f];if(f&&(a+=t[o&u<<r-f]),n)for(;a.length*r&7;)a+="=";return a},or=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>bl({prefix:t,name:e,encode(o){return vC(o,n,r)},decode(o){return wC(o,n,r,e)}});var xC=bl({prefix:"\0",name:"identity",encode:e=>Hw(e),decode:e=>Kw(e)});var Td={};dt(Td,{base2:()=>_C});var _C=or({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Fd={};dt(Fd,{base8:()=>bC});var bC=or({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Bd={};dt(Bd,{base10:()=>AC});var AC=Ss({prefix:"9",name:"base10",alphabet:"0123456789"});var Dd={};dt(Dd,{base16:()=>EC,base16upper:()=>SC});var EC=or({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),SC=or({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ld={};dt(Ld,{base32:()=>hf,base32hex:()=>IC,base32hexpad:()=>FC,base32hexpadupper:()=>BC,base32hexupper:()=>TC,base32pad:()=>CC,base32padupper:()=>kC,base32upper:()=>PC,base32z:()=>DC});var hf=or({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),PC=or({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),CC=or({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kC=or({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),IC=or({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),TC=or({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),FC=or({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),BC=or({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),DC=or({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Nd={};dt(Nd,{base36:()=>LC,base36upper:()=>NC});var LC=Ss({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),NC=Ss({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Md={};dt(Md,{base58btc:()=>ao,base58flickr:()=>MC});var ao=Ss({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),MC=Ss({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Od={};dt(Od,{base64:()=>OC,base64pad:()=>RC,base64url:()=>UC,base64urlpad:()=>zC});var OC=or({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),RC=or({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),UC=or({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),zC=or({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Kd={};dt(Kd,{sha256:()=>ok,sha512:()=>sk});var KC=Gw,qw=128,HC=127,$C=~HC,jC=Math.pow(2,31);function Gw(e,t,r){t=t||[],r=r||0;for(var n=r;e>=jC;)t[r++]=e&255|qw,e/=128;for(;e&$C;)t[r++]=e&255|qw,e>>>=7;return t[r]=e|0,Gw.bytes=r-n+1,t}var qC=Rd,WC=128,Ww=127;function Rd(e,n){var r=0,n=n||0,o=0,a=n,f,u=e.length;do{if(a>=u)throw Rd.bytes=0,new RangeError("Could not decode varint");f=e[a++],r+=o<28?(f&Ww)<<o:(f&Ww)*Math.pow(2,o),o+=7}while(f>=WC);return Rd.bytes=a-n,r}var GC=Math.pow(2,7),VC=Math.pow(2,14),YC=Math.pow(2,21),JC=Math.pow(2,28),XC=Math.pow(2,35),ZC=Math.pow(2,42),QC=Math.pow(2,49),ek=Math.pow(2,56),tk=Math.pow(2,63),rk=function(e){return e<GC?1:e<VC?2:e<YC?3:e<JC?4:e<XC?5:e<ZC?6:e<QC?7:e<ek?8:e<tk?9:10},nk={encode:KC,decode:qC,encodingLength:rk},ik=nk,Tu=ik;var Fu=e=>[Tu.decode(e),Tu.decode.bytes],pf=(e,t,r=0)=>(Tu.encode(e,t,r),t),df=e=>Tu.encodingLength(e);var ga=(e,t)=>{let r=t.byteLength,n=df(e),o=n+df(r),a=new Uint8Array(o+r);return pf(e,a,0),pf(r,a,n),a.set(t,o),new mf(e,r,t,a)},Vw=e=>{let t=Oo(e),[r,n]=Fu(t),[o,a]=Fu(t.subarray(n)),f=t.subarray(n+a);if(f.byteLength!==o)throw new Error("Incorrect length");return new mf(r,o,f,t)},Yw=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&zw(e.bytes,t.bytes),mf=class{constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};var zd=({name:e,code:t,encode:r})=>new Ud(e,t,r),Ud=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?ga(this.code,r):r.then(n=>ga(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Xw=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ok=zd({name:"sha2-256",code:18,encode:Xw("SHA-256")}),sk=zd({name:"sha2-512",code:19,encode:Xw("SHA-512")});var Hd={};dt(Hd,{identity:()=>uk});var Zw=0,ak="identity",Qw=Oo,fk=e=>ga(Zw,Qw(e)),uk={code:Zw,name:ak,encode:Qw,digest:fk};var S5=new TextEncoder,P5=new TextDecoder;var ot=class{constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Sl,byteLength:Sl,code:El,version:El,multihash:El,bytes:El,_baseCache:Sl,asCID:Sl})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==Du)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==mk)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ot.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=ga(t,r);return ot.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&Yw(this.multihash,t.multihash)}toString(t){let{bytes:r,version:n,_baseCache:o}=this;switch(n){case 0:return pk(r,o,t||ao.encoder);default:return dk(r,o,t||hf.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return gk(/^0\.0/,wk),!!(t&&(t[t1]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof ot)return t;if(t!=null&&t.asCID===t){let{version:r,code:n,multihash:o,bytes:a}=t;return new ot(r,n,o,a||e1(r,n,o.bytes))}else if(t!=null&&t[t1]===!0){let{version:r,multihash:n,code:o}=t,a=Vw(n);return ot.create(r,o,a)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==Du)throw new Error(`Version 0 CID must use dag-pb (code: ${Du}) block encoding`);return new ot(t,r,n,n.bytes)}case 1:{let o=e1(t,r,n.bytes);return new ot(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return ot.create(0,Du,t)}static createV1(t,r){return ot.create(1,t,r)}static decode(t){let[r,n]=ot.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=ot.inspectBytes(t),n=r.size-r.multihashSize,o=Oo(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let a=o.subarray(r.multihashSize-r.digestSize),f=new mf(r.multihashCode,r.digestSize,a,o);return[r.version===0?ot.createV0(f):ot.createV1(r.codec,f),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[P,I]=Fu(t.subarray(r));return r+=I,P},o=n(),a=Du;if(o===18?(o=0,r=0):o===1&&(a=n()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let f=r,u=n(),h=n(),d=r+h,v=d-f;return{version:o,codec:a,multihashCode:u,digestSize:h,multihashSize:v,size:d}}static parse(t,r){let[n,o]=hk(t,r),a=ot.decode(o);return a._baseCache.set(n,t),a}},hk=(e,t)=>{switch(e[0]){case"Q":{let r=t||ao;return[ao.prefix,r.decode(`${ao.prefix}${e}`)]}case ao.prefix:{let r=t||ao;return[ao.prefix,r.decode(e)]}case hf.prefix:{let r=t||hf;return[hf.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},pk=(e,t,r)=>{let{prefix:n}=r;if(n!==ao.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let a=r.encode(e).slice(1);return t.set(n,a),a}else return o},dk=(e,t,r)=>{let{prefix:n}=r,o=t.get(n);if(o==null){let a=r.encode(e);return t.set(n,a),a}else return o},Du=112,mk=18,e1=(e,t,r)=>{let n=df(e),o=n+df(t),a=new Uint8Array(o+r.byteLength);return pf(e,a,0),pf(t,a,n),a.set(r,o),a},t1=Symbol.for("@ipld/js-cid/CID"),El={writable:!1,configurable:!1,enumerable:!0},Sl={writable:!1,enumerable:!1,configurable:!1},yk="0.0.0-dev",gk=(e,t)=>{if(e.test(yk))console.warn(t);else throw new Error(t)},wk=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var $d={...Id,...Td,...Fd,...Bd,...Dd,...Ld,...Nd,...Md,...Od},L5={...Kd,...Hd};function n1(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var r1=n1("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),jd=n1("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),vk={utf8:r1,"utf-8":r1,hex:$d.base16,latin1:jd,ascii:jd,binary:jd,...$d},Pl=vk;function Jt(e,t="utf8"){let r=Pl[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}function sr(e,t="utf8"){let r=Pl[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}function i1(e){return sr(Jt(e,"base64pad"))}function o1(e){return sr(Jt(e),"base64pad")}function xk(e){return i1(a1(e))}function qd(e){return s1(o1(e))}function s1(e){return e.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function a1(e){return e.replace(/_/g,"/").replace(/-/g,"+")}var yf={};dt(yf,{toUint8Array:()=>Wd});var Wd=async e=>new Promise((t,r)=>{let n=()=>r(new Error("Failed to read file")),o=new FileReader;o.addEventListener("load",a=>{let f=a?.target?.result||null;if(f==null){n();return}if(typeof f=="string"){t(Jt(f));return}t(new Uint8Array(f))}),o.addEventListener("error",()=>o.abort()),o.addEventListener("abort",n),o.readAsArrayBuffer(e)});var Lu=oo(wl(),1);var f1=typeof self<"u"&&typeof self.location=="object",Kr=e=>{if(!f1)throw new Error(`Must be in browser to use method. Provide a node-compatible implementation for ${e}`)};var _k=e=>(Kr("storage.getItem"),Lu.default.getItem(e)),bk=(e,t)=>(Kr("storage.setItem"),Lu.default.setItem(e,t)),Ak=e=>(Kr("storage.removeItem"),Lu.default.removeItem(e)),Ek=()=>(Kr("storage.clear"),Lu.default.clear()),u1={getItem:_k,setItem:bk,removeItem:Ak,clear:Ek};var gf=u1;function c1(e){gf={...gf,...e}}var Rn=e=>gf.getItem(e),Ki=(e,t)=>gf.setItem(e,t),wf=e=>gf.removeItem(e);function xe(e){let t=ot.asCID(e);if(t)return t;if(typeof e=="string")return ot.parse(e);if(typeof e=="object"&&"version"in e&&"code"in e&&"multihash"in e)return ot.create(e.version,e.code,e.multihash);throw new Error(`Could not decode CID: ${e}`)}function Pk(e){return e.toString()}var Nu=(e,t)=>{let{[t]:r,...n}=e;return n},Ck=(e,t,r)=>r===null?Nu(e,t):{...e,[t]:r},Gd=(e,t)=>{let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=t(o,n)}),r},kk=async(e,t)=>{let r={};return await Promise.all(Object.entries(e).map(async([n,o])=>{r[n]=await t(o,n)})),r},Ik=(e,t)=>e.indexOf(t)>-1,Tk=async(e,t)=>{let r=e;for(let n=0;n<t.length;n++)r=await t[n](r);return r};var Cl="0.32.0";var vf="webnative.auth_ucans",Cs="webnative.auth_username";async function on(){return Rn(Cs).then(e=>e||null)}async function Mu({withFiles:e}={}){let t=await on();return t?t+"."+(e?"files.":"")+Me.endpoints.user:null}var Dr={};dt(Dr,{aes:()=>Hr,ed25519:()=>mm,hash:()=>mi,keystore:()=>xr,rsa:()=>ba,sha256Str:()=>jl});var Fk=globalThis||window||self,ct=Fk.crypto;var zu={};dt(zu,{arrBufToBase64:()=>kl,arrBufToStr:()=>g1,base64ToArrBuf:()=>ks,default:()=>Fe,joinBufs:()=>Tl,normalizeBase64ToBuf:()=>Is,normalizeToBuf:()=>Uu,normalizeUnicodeToBuf:()=>Hi,normalizeUtf16ToBuf:()=>em,normalizeUtf8ToBuf:()=>Qd,publicExponent:()=>w1,randomBuf:()=>v1,strToArrBuf:()=>Il,structuralClone:()=>x1});var Vd={};dt(Vd,{CharSize:()=>uo,CryptoSystem:()=>sn,EccCurve:()=>Ou,HashAlg:()=>wa,KeyUse:()=>Pt,RsaSize:()=>Ru,SymmAlg:()=>ar,SymmKeyLength:()=>Ro});var sn;(function(e){e.ECC="ecc",e.RSA="rsa"})(sn||(sn={}));var Ou;(function(e){e.P_256="P-256",e.P_384="P-384",e.P_521="P-521"})(Ou||(Ou={}));var Ru;(function(e){e[e.B1024=1024]="B1024",e[e.B2048=2048]="B2048",e[e.B4096=4096]="B4096"})(Ru||(Ru={}));var ar;(function(e){e.AES_CTR="AES-CTR",e.AES_CBC="AES-CBC",e.AES_GCM="AES-GCM"})(ar||(ar={}));var Ro;(function(e){e[e.B128=128]="B128",e[e.B192=192]="B192",e[e.B256=256]="B256"})(Ro||(Ro={}));var wa;(function(e){e.SHA_1="SHA-1",e.SHA_256="SHA-256",e.SHA_384="SHA-384",e.SHA_512="SHA-512"})(wa||(wa={}));var uo;(function(e){e[e.B8=8]="B8",e[e.B16=16]="B16"})(uo||(uo={}));var Pt;(function(e){e.Exchange="exchange",e.Write="write"})(Pt||(Pt={}));var Yd=new Error("Key does not exist. Make sure you properly instantiated the keystore."),l1=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),h1=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),Jd=new Error("ECC is not enabled for this browser. Please use RSA instead."),p1=new Error("Cryptosystem not supported. Please use ECC or RSA"),d1=new Error("Invalid key use. Please use 'exchange' or 'write"),Bk=new Error("Max must be less than 256 and greater than 0");function xf(e){if(!e||e===null)throw Yd;if(e.privateKey===void 0)throw l1;return e}function Xd(e){if(!e||e===null)throw Yd;if(e.privateKey!==void 0||e.algorithm===void 0)throw h1;return e}function Zd(e){m1(e,[sn.ECC,sn.RSA],p1)}function va(e){m1(e,[Pt.Exchange,Pt.Write],d1)}function m1(e,t,r){if(!t.some(o=>o===e))throw r}var y1={KeyDoesNotExist:Yd,NotKeyPair:l1,NotKey:h1,ECCNotEnabled:Jd,UnsupportedCrypto:p1,InvalidKeyUse:d1,checkIsKeyPair:xf,checkIsKey:Xd,checkValidCryptoSystem:Zd,checkValidKeyUse:va,InvalidMaxValue:Bk};function g1(e,t){let r=t===8?new Uint8Array(e):new Uint16Array(e);return Array.from(r).map(n=>String.fromCharCode(n)).join("")}function kl(e){return sr(new Uint8Array(e),"base64pad")}function Il(e,t){let r=t===8?new Uint8Array(e.length):new Uint16Array(e.length);for(let n=0,o=e.length;n<o;n++)r[n]=e.charCodeAt(n);return r.buffer}function ks(e){return Jt(e,"base64pad").buffer}function w1(){return new Uint8Array([1,0,1])}function v1(e,{max:t}={max:255}){if(t<1||t>255)throw y1.InvalidMaxValue;let r=new Uint8Array(e);if(t==255)return ct.getRandomValues(r),r.buffer;let n=0,o=t+1,a=Math.floor(256/o)*o,f=new Uint8Array(1);for(;n<r.length;)ct.getRandomValues(f),f[0]<a&&(r[n]=f[0]%o,n++);return r.buffer}function Tl(e,t){let r=new Uint8Array(e),n=new Uint8Array(t),o=new Uint8Array(r.length+n.length);return o.set(r),o.set(n,r.length),o.buffer}var Qd=e=>Uu(e,t=>Il(t,uo.B8)),em=e=>Uu(e,t=>Il(t,uo.B16)),Is=e=>Uu(e,ks),Hi=(e,t)=>{switch(t){case 8:return Qd(e);default:return em(e)}},Uu=(e,t)=>{if(typeof e=="string")return t(e);if(typeof e=="object"&&e.byteLength!==void 0)return new Uint8Array(e).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};async function x1(e){return new Promise(t=>{let{port1:r,port2:n}=new MessageChannel;n.onmessage=o=>t(o.data),r.postMessage(e)})}var Fe={arrBufToStr:g1,arrBufToBase64:kl,strToArrBuf:Il,base64ToArrBuf:ks,publicExponent:w1,randomBuf:v1,joinBufs:Tl,normalizeUtf8ToBuf:Qd,normalizeUtf16ToBuf:em,normalizeBase64ToBuf:Is,normalizeToBuf:Uu,structuralClone:x1};var tm={};dt(tm,{DEFAULT_CHAR_SIZE:()=>di,DEFAULT_CRYPTOSYSTEM:()=>Fl,DEFAULT_CTR_LEN:()=>Hu,DEFAULT_ECC_CURVE:()=>Uo,DEFAULT_EXCHANGE_KEY_NAME:()=>Ll,DEFAULT_HASH_ALG:()=>co,DEFAULT_RSA_SIZE:()=>Bl,DEFAULT_STORE_NAME:()=>Dl,DEFAULT_SYMM_ALG:()=>pi,DEFAULT_SYMM_LEN:()=>Ds,DEFAULT_WRITE_KEY_NAME:()=>Nl,ECC_EXCHANGE_ALG:()=>xa,ECC_WRITE_ALG:()=>Ts,RSA_EXCHANGE_ALG:()=>Fs,RSA_WRITE_ALG:()=>Bs,SALT_LENGTH:()=>Ku,default:()=>Dk});var xa="ECDH",Ts="ECDSA",Fs="RSA-OAEP",Bs="RSASSA-PKCS1-v1_5",Ku=128,Fl="ecc",Uo=Ou.P_256,Bl=Ru.B2048,pi=ar.AES_CTR,Ds=Ro.B256,Hu=64,co=wa.SHA_256,di=uo.B16,Dl="keystore",Ll="exchange-key",Nl="write-key",Dk={ECC_EXCHANGE_ALG:xa,ECC_WRITE_ALG:Ts,RSA_EXCHANGE_ALG:Fs,RSA_WRITE_ALG:Bs,SALT_LENGTH:Ku,DEFAULT_CRYPTOSYSTEM:Fl,DEFAULT_ECC_CURVE:Uo,DEFAULT_RSA_SIZE:Bl,DEFAULT_SYMM_ALG:pi,DEFAULT_CTR_LEN:Hu,DEFAULT_HASH_ALG:co,DEFAULT_CHAR_SIZE:di,DEFAULT_STORE_NAME:Dl,DEFAULT_EXCHANGE_KEY_NAME:Ll,DEFAULT_WRITE_KEY_NAME:Nl};async function rm(e){return ct.subtle.generateKey({name:e?.alg||pi,length:e?.length||Ds},!0,["encrypt","decrypt"])}async function Ml(e,t){let r=Fe.base64ToArrBuf(e);return ct.subtle.importKey("raw",r,{name:t?.alg||pi,length:t?.length||Ds},!0,["encrypt","decrypt"])}var $u={makeKey:rm,importKey:Ml};async function Ol(e,t,r){let n=Fe.normalizeUtf16ToBuf(e),o=typeof t=="string"?await $u.importKey(t,r):t,a=r?.alg||pi,f=r?.iv||Fe.randomBuf(16),u=await ct.subtle.encrypt({name:a,iv:a===ar.AES_CTR?void 0:f,counter:a===ar.AES_CTR?new Uint8Array(f):void 0,length:a===ar.AES_CTR?Hu:void 0},o,n);return Fe.joinBufs(f,u)}async function Rl(e,t,r){let n=Fe.normalizeBase64ToBuf(e),o=typeof t=="string"?await $u.importKey(t,r):t,a=r?.alg||pi,f=n.slice(0,16),u=n.slice(16);return await ct.subtle.decrypt({name:a,iv:a===ar.AES_CTR?void 0:f,counter:a===ar.AES_CTR?new Uint8Array(f):void 0,length:a===ar.AES_CTR?Hu:void 0},o,u)}async function Lk(e,t,r){let n=await Ol(e,t,r);return Fe.arrBufToBase64(n)}async function Nk(e,t,r){let n=await Rl(e,t,r);return Fe.arrBufToStr(n,16)}async function nm(e){let t=await ct.subtle.exportKey("raw",e);return Fe.arrBufToBase64(t)}var _1={encryptBytes:Ol,decryptBytes:Rl,encrypt:Lk,decrypt:Nk,exportKey:nm};var _n={...$u,..._1};var J1=oo(b1(),1);var lm={};dt(lm,{RSAKeyStore:()=>_f,decrypt:()=>k1,default:()=>ho,encrypt:()=>C1,getPublicKey:()=>I1,importPublicKey:()=>E1,makeKeypair:()=>A1,sign:()=>S1,verify:()=>P1});async function A1(e,t,r){va(r);let n=r===Pt.Exchange?Fs:Bs,o=r===Pt.Exchange?["encrypt","decrypt"]:["sign","verify"];return ct.subtle.generateKey({name:n,modulusLength:e,publicExponent:Fe.publicExponent(),hash:{name:t}},!1,o)}function Mk(e){return e.replace(`-----BEGIN PUBLIC KEY-----
`,"").replace(`
-----END PUBLIC KEY-----`,"")}async function E1(e,t,r){va(r);let n=r===Pt.Exchange?Fs:Bs,o=r===Pt.Exchange?["encrypt"]:["verify"],a=Fe.base64ToArrBuf(Mk(e));return ct.subtle.importKey("spki",a,{name:n,hash:{name:t}},!0,o)}var Ls={makeKeypair:A1,importPublicKey:E1};async function S1(e,t,r=di){return ct.subtle.sign({name:Bs,saltLength:Ku},t,Hi(e,r))}async function P1(e,t,r,n=di,o=co){return ct.subtle.verify({name:Bs,saltLength:Ku},typeof r=="string"?await Ls.importPublicKey(r,o,Pt.Write):r,Is(t),Hi(e,n))}async function C1(e,t,r=di,n=co){return ct.subtle.encrypt({name:Fs},typeof t=="string"?await Ls.importPublicKey(t,n,Pt.Exchange):t,Hi(e,r))}async function k1(e,t){let r=Is(e);return ct.subtle.decrypt({name:Fs},t,r)}async function I1(e){let t=await ct.subtle.exportKey("spki",e.publicKey);return Fe.arrBufToBase64(t)}var zo={sign:S1,verify:P1,encrypt:C1,decrypt:k1,getPublicKey:I1};var um={};dt(um,{clear:()=>N1,createIfDoesNotExist:()=>F1,createStore:()=>T1,default:()=>vr,dropStore:()=>fm,exists:()=>am,get:()=>sm,getKey:()=>D1,getKeypair:()=>B1,put:()=>om,rm:()=>L1});var lo=oo(wl(),1);function T1(e){return lo.default.createInstance({name:e})}async function F1(e,t,r=lo.default){if(await am(e,r))return;let n=await t();await om(e,n,r)}async function om(e,t,r=lo.default){return r.setItem(e,t)}async function B1(e,t=lo.default){return sm(e,xf,t)}async function D1(e,t=lo.default){return sm(e,Xd,t)}async function sm(e,t,r=lo.default){let n=await r.getItem(e);return n===null?null:t(n)}async function am(e,t=lo.default){return await t.getItem(e)!==null}async function L1(e,t=lo.default){return t.removeItem(e)}async function fm(e){return e.dropInstance()}async function N1(e){return e?fm(e):lo.default.clear()}var vr={createStore:T1,createIfDoesNotExist:F1,put:om,getKeypair:B1,getKey:D1,exists:am,rm:L1,dropStore:fm,clear:N1};var cm={};dt(cm,{default:()=>Ut,defaultConfig:()=>zl,eccEnabled:()=>U1,merge:()=>z1,normalize:()=>R1,symmKeyOpts:()=>K1});async function M1(e,t){va(t);let r=t===Pt.Exchange?xa:Ts,n=t===Pt.Exchange?["deriveKey","deriveBits"]:["sign","verify"];return ct.subtle.generateKey({name:r,namedCurve:e},!1,n)}async function O1(e,t,r){va(r);let n=r===Pt.Exchange?xa:Ts,o=r===Pt.Exchange?[]:["verify"],a=Fe.base64ToArrBuf(e);return ct.subtle.importKey("raw",a,{name:n,namedCurve:t},!0,o)}var $i={makeKeypair:M1,importPublicKey:O1};var zl={type:Fl,curve:Uo,rsaSize:Bl,symmAlg:pi,symmLen:Ds,hashAlg:co,charSize:di,storeName:Dl,exchangeKeyName:Ll,writeKeyName:Nl};function R1(e,t=!0){let r;return e?r={...zl,...e}:r=zl,e?.type||(r.type=t?sn.ECC:sn.RSA),r}async function U1(){let e=await $i.makeKeypair(Uo,Pt.Exchange);try{await Fe.structuralClone(e)}catch{return!1}return!0}function z1(e,t={}){return{...e,...t}}function K1(e){return{alg:e.symmAlg,length:e.symmLen}}var Ut={defaultConfig:zl,normalize:R1,eccEnabled:U1,merge:z1,symmKeyOpts:K1};var _a=class{constructor(t,r){this.cfg=t,this.store=r}async writeKey(){let t=await vr.getKeypair(this.cfg.writeKeyName,this.store);return xf(t)}async exchangeKey(){let t=await vr.getKeypair(this.cfg.exchangeKeyName,this.store);return xf(t)}async getSymmKey(t,r){let n=Ut.merge(this.cfg,r),o=await vr.getKey(t,this.store);if(o!==null)return o;let a=await _n.makeKey(Ut.symmKeyOpts(n));return await vr.put(t,a,this.store),a}async keyExists(t){return await vr.getKey(t,this.store)!==null}async deleteKey(t){return vr.rm(t,this.store)}async destroy(){return vr.dropStore(this.store)}async importSymmKey(t,r,n){let o=Ut.merge(this.cfg,n),a=await _n.importKey(t,Ut.symmKeyOpts(o));await vr.put(r,a,this.store)}async exportSymmKey(t,r){let n=await this.getSymmKey(t,r);return _n.exportKey(n)}async encryptWithSymmKey(t,r,n){let o=Ut.merge(this.cfg,n),a=await this.getSymmKey(r,n),f=await _n.encryptBytes(Fe.strToArrBuf(t,o.charSize),a,Ut.symmKeyOpts(o));return Fe.arrBufToBase64(f)}async decryptWithSymmKey(t,r,n){let o=Ut.merge(this.cfg,n),a=await this.getSymmKey(r,n),f=await _n.decryptBytes(Fe.base64ToArrBuf(t),a,Ut.symmKeyOpts(o));return Fe.arrBufToStr(f,o.charSize)}};var _f=class extends _a{static async init(t){let r=Ut.normalize({...t||{},type:sn.RSA}),{rsaSize:n,hashAlg:o,storeName:a,exchangeKeyName:f,writeKeyName:u}=r,h=vr.createStore(a);return await vr.createIfDoesNotExist(f,()=>Ls.makeKeypair(n,o,Pt.Exchange),h),await vr.createIfDoesNotExist(u,()=>Ls.makeKeypair(n,o,Pt.Write),h),new _f(r,h)}async sign(t,r){let n=Ut.merge(this.cfg,r),o=await this.writeKey();return Fe.arrBufToBase64(await zo.sign(t,o.privateKey,n.charSize))}async verify(t,r,n,o){let a=Ut.merge(this.cfg,o);return zo.verify(t,r,n,a.charSize,a.hashAlg)}async encrypt(t,r,n){let o=Ut.merge(this.cfg,n);return Fe.arrBufToBase64(await zo.encrypt(t,r,o.charSize,o.hashAlg))}async decrypt(t,r,n){let o=await this.exchangeKey(),a=Ut.merge(this.cfg,n);return Fe.arrBufToStr(await zo.decrypt(t,o.privateKey),a.charSize)}async publicExchangeKey(){let t=await this.exchangeKey();return zo.getPublicKey(t)}async publicWriteKey(){let t=await this.writeKey();return zo.getPublicKey(t)}},Kl=_f;var ho={...Ls,...zo,...Kl};var ju={};dt(ju,{clear:()=>dm,create:()=>Rk,get:()=>Un,set:()=>Uk});async function H1(e,t,r=di,n=co){return ct.subtle.sign({name:Ts,hash:{name:n}},t,Hi(e,r))}async function $1(e,t,r,n=di,o=Uo,a=co){return ct.subtle.verify({name:Ts,hash:{name:a}},typeof r=="string"?await $i.importPublicKey(r,o,Pt.Write):r,Is(t),Hi(e,n))}async function j1(e,t,r,n=di,o=Uo,a){let f=typeof r=="string"?await $i.importPublicKey(r,o,Pt.Exchange):r,u=await Hl(t,f,a);return _n.encryptBytes(Hi(e,n),u,a)}async function q1(e,t,r,n=Uo,o){let a=typeof r=="string"?await $i.importPublicKey(r,n,Pt.Exchange):r,f=await Hl(t,a,o);return _n.decryptBytes(Is(e),f,o)}async function W1(e){let t=await ct.subtle.exportKey("raw",e.publicKey);return Fe.arrBufToBase64(t)}async function Hl(e,t,r){return ct.subtle.deriveKey({name:xa,public:t},e,{name:r?.alg||pi,length:r?.length||Ds},!1,["encrypt","decrypt"])}var Ko={sign:H1,verify:$1,encrypt:j1,decrypt:q1,getPublicKey:W1,getSharedKey:Hl};var bf=class extends _a{static async init(t){let r=Ut.normalize({...t||{},type:sn.ECC}),{curve:n,storeName:o,exchangeKeyName:a,writeKeyName:f}=r,u=vr.createStore(o);return await vr.createIfDoesNotExist(a,()=>$i.makeKeypair(n,Pt.Exchange),u),await vr.createIfDoesNotExist(f,()=>$i.makeKeypair(n,Pt.Write),u),new bf(r,u)}async sign(t,r){let n=Ut.merge(this.cfg,r),o=await this.writeKey();return Fe.arrBufToBase64(await Ko.sign(t,o.privateKey,n.charSize,n.hashAlg))}async verify(t,r,n,o){let a=Ut.merge(this.cfg,o);return Ko.verify(t,r,n,a.charSize,a.curve,a.hashAlg)}async encrypt(t,r,n){let o=Ut.merge(this.cfg,n),a=await this.exchangeKey();return Fe.arrBufToBase64(await Ko.encrypt(t,a.privateKey,r,o.charSize,o.curve))}async decrypt(t,r,n){let o=Ut.merge(this.cfg,n),a=await this.exchangeKey();return Fe.arrBufToStr(await Ko.decrypt(t,a.privateKey,r,o.curve),o.charSize)}async publicExchangeKey(){let t=await this.exchangeKey();return Ko.getPublicKey(t)}async publicWriteKey(){let t=await this.writeKey();return Ko.getPublicKey(t)}},$l=bf;async function G1(e){let t=await Ut.eccEnabled();if(!t&&e?.type==="ecc")throw Jd;let r=Ut.normalize(e,t);return Zd(r.type),r.type==="ecc"?$l.init(r):Kl.init(r)}async function V1(){return vr.clear()}var hm={};dt(hm,{ECCKeyStore:()=>bf,decrypt:()=>q1,default:()=>Ok,encrypt:()=>j1,getPublicKey:()=>W1,getSharedKey:()=>Hl,importPublicKey:()=>O1,makeKeypair:()=>M1,sign:()=>H1,verify:()=>$1});var Ok={...$i,...Ko,...$l};var pm={init:G1,clear:V1,...Vd,...tm,...cm,...zu,ecc:hm,rsa:lm,idb:um};var Y1={type:sn.RSA},Ns=null,dm=async()=>{Ns=await Un(),await Ns.destroy(),Ns=null},Rk=async()=>await pm.init(Y1),Uk=async e=>{Ns=e},Un=async()=>Ns||(Ns=await pm.init(Y1),Ns);var zk=(e,t,r)=>{Kr("rsa.verify");let n=Fe.arrBufToBase64(r.buffer);return ho.verify(e,t,n)},Kk=async(e,t,r)=>J1.default.sign.detached.verify(e,t,r),Hk=async()=>(Kr("keystore.publicExchangeKey"),(await Un()).publicExchangeKey()),$k=async()=>(Kr("keystore.publicWriteKey"),(await Un()).publicWriteKey()),jk=async e=>(Kr("keystore.decrypt"),(await Un()).decrypt(e)),qk=async(e,t)=>(Kr("keystore.sign"),(await Un()).sign(e,{charSize:t})),Wk=async(e,t)=>(Kr("keystore.importSymmKey"),(await Un()).importSymmKey(e,t)),Gk=async e=>(Kr("keystore.exportSymmKey"),(await Un()).exportSymmKey(e)),Vk=async e=>(Kr("keystore.keyExists"),(await Un()).keyExists(e)),Yk=async()=>(Kr("keystore.getAlg"),(await Un()).cfg.type),Jk=async()=>(Kr("keystore.clear"),dm()),X1={rsa:{verify:zk},ed25519:{verify:Kk},keystore:{publicExchangeKey:Hk,publicWriteKey:$k,decrypt:jk,sign:qk,importSymmKey:Wk,exportSymmKey:Gk,keyExists:Vk,getAlg:Yk,clear:Jk}};var bn=X1;function Z1(e){bn={...bn,...e}}var jl=async e=>{let t=await ct.subtle.digest("sha-256",Jt(e));return sr(new Uint8Array(t),"hex")},mi={sha256:async e=>new Uint8Array(await ct.subtle.digest("sha-256",e)),sha256Str:jl},Hr={encrypt:async(e,t,r)=>{let n=await Ml(t,{length:Ro.B256,alg:r}),o=await Ol(e,n,{alg:r});return new Uint8Array(o)},decrypt:async(e,t,r)=>{let n=await Ml(t,{length:Ro.B256,alg:r}),o=await Rl(e,n,{alg:r});return new Uint8Array(o)},genKeyStr:async e=>{let t=await rm({length:Ro.B256,alg:e});return nm(t)},decryptGCM:async(e,t,r)=>{let n=Jt(r,"base64pad"),o=await ct.subtle.importKey("raw",Jt(t,"base64pad"),"AES-GCM",!1,["encrypt","decrypt"]),a=await ct.subtle.decrypt({name:"AES-GCM",iv:n},o,Jt(e,"base64pad"));return sr(new Uint8Array(a))}},ba={decrypt:(e,t)=>ct.subtle.decrypt({name:"RSA-OAEP"},t,e),encrypt:async(e,t)=>ct.subtle.encrypt({name:"RSA-OAEP"},await ct.subtle.importKey("spki",Jt(t,"base64pad").buffer,{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]),e),genKey:()=>ct.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]),verify:(e,t,r)=>bn.rsa.verify(e,t,r)},mm={verify:(e,t,r)=>bn.ed25519.verify(e,t,r)},xr={publicExchangeKey:()=>bn.keystore.publicExchangeKey(),publicWriteKey:()=>bn.keystore.publicWriteKey(),decrypt:e=>bn.keystore.decrypt(e),sign:(e,t)=>bn.keystore.sign(e,t),importSymmKey:(e,t)=>bn.keystore.importSymmKey(e,t),exportSymmKey:e=>bn.keystore.exportSymmKey(e),keyExists:e=>bn.keystore.keyExists(e),getAlg:()=>bn.keystore.getAlg(),clear:()=>bn.keystore.clear()};var Xr={};dt(Xr,{Branch:()=>yi,Kind:()=>Q1,combine:()=>Ms,directory:()=>kr,file:()=>ym,fromPosix:()=>qu,isBranch:()=>po,isDirectory:()=>Cr,isFile:()=>Ho,isRootDirectory:()=>tv,isSameBranch:()=>ql,isSameKind:()=>gm,kind:()=>Wl,log:()=>ji,map:()=>wm,parent:()=>vm,removeBranch:()=>Aa,root:()=>ev,terminus:()=>xm,toPosix:()=>fr,unwrap:()=>Xt});var yi=(u=>(u.Public="public",u.Pretty="p",u.Private="private",u.PrivateLog="privateLog",u.Shared="shared",u.SharedCounter="sharedCounter",u.Version="version",u))(yi||{}),Q1=(r=>(r.Directory="directory",r.File="file",r))(Q1||{});function kr(...e){if(e.some(t=>t.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{directory:e}}function ym(...e){if(e.some(t=>t.includes("/")))throw new Error("Forward slashes `/` are not allowed");return{file:e}}function ev(){return{directory:[]}}function qu(e){let t=e.replace(/^\/+/,"").split("/");return e.endsWith("/")?{directory:t.slice(0,-1)}:e===""?ev():{file:t}}function fr(e,{absolute:t}={absolute:!1}){let r=t?"/":"",n=Xt(e).join("/");return Cr(e)?r+n+(n.length?"/":""):r+n}function Ms(e,t){return wm(r=>Xt(e).concat(r),t)}function po(e,t){return Xt(t)[0]===e}function Cr(e){return!!e.directory}function Ho(e){return!!e.file}function tv(e){return e.directory.length===0}function ql(e,t){return Xt(e)[0]===Xt(t)[0]}function gm(e,t){return Cr(e)&&Cr(t)?!0:!!(Ho(e)&&Ho(t))}function Wl(e){return Cr(e)?"directory":"file"}function wm(e,t){return Cr(t)?{directory:e(t.directory)}:Ho(t)?{file:e(t.file)}:t}function vm(e){return Cr(e)&&tv(e)?null:kr(...Xt(e).slice(0,-1))}function Aa(e){return wm(t=>Cr(e)||t.length>1?t.slice(1):t,e)}function xm(e){let t=Xt(e);return t.length<1?null:t[t.length-1]}function Xt(e){return Cr(e)?e.directory:Ho(e)?e.file:[]}function ji(e){return`[ ${e.join(", ")} ]`}async function Gl({path:e}){return`wnfs__bareNameFilter__${await mi.sha256Str(rv(e))}`}async function Os({path:e}){return`wnfs__readKey__${await mi.sha256Str(rv(e))}`}function rv(e){return"/"+Xt(e).join("/")}function Wu(e){return kr("private","Apps",e.creator,e.name)}function Vl(e){let t=[];return e.app&&t.push(Wu(e.app)),e.fs?.private&&(t=t.concat(e.fs?.private.map(r=>Ms(kr("private"),r)))),e.fs?.public&&(t=t.concat(e.fs?.public.map(r=>Ms(kr("public"),r)))),t}var Am=(o=>(o.NotAuthorised="NOT_AUTHORISED",o.AuthSucceeded="AUTH_SUCCEEDED",o.AuthCancelled="AUTH_CANCELLED",o.Continuation="CONTINUATION",o))(Am||{});function nv(e,t,r,n){return{scenario:"AUTH_SUCCEEDED",permissions:e,authenticated:!0,throughLobby:!0,fs:n,newUser:t,username:r}}function iv(e,t){return{scenario:"AUTH_CANCELLED",permissions:e,authenticated:!1,throughLobby:!0,cancellationReason:t}}function Em(e,t,r){return{scenario:"CONTINUATION",permissions:e,authenticated:!0,newUser:!1,throughLobby:!1,fs:r,username:t}}function Af(e){return{scenario:"NOT_AUTHORISED",permissions:e,authenticated:!1}}async function Yl(e){return Vl(e).reduce((t,r)=>t.then(async n=>{if(n===!1||po("public",r))return n;let o=await Os({path:r});return await xr.keyExists(o)}),Promise.resolve(!0))}var Zk=["string","number","bigint","symbol"],Qk=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function ov(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;if(Zk.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(eI(e))return"Buffer";let r=tI(e);return r||"Object"}function eI(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function tI(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Qk.includes(t))return t}var V=class{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};V.uint=new V(0,"uint",!0);V.negint=new V(1,"negint",!0);V.bytes=new V(2,"bytes",!0);V.string=new V(3,"string",!0);V.array=new V(4,"array",!1);V.map=new V(5,"map",!1);V.tag=new V(6,"tag",!1);V.float=new V(7,"float",!0);V.false=new V(7,"false",!0);V.true=new V(7,"true",!0);V.null=new V(7,"null",!0);V.undefined=new V(7,"undefined",!0);V.break=new V(7,"break",!0);var Ae=class{constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Ef=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",rI=new TextDecoder,nI=new TextEncoder;function Jl(e){return Ef&&globalThis.Buffer.isBuffer(e)}function Sm(e){return e instanceof Uint8Array?Jl(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var uv=Ef?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):av(e,t,r):(e,t,r)=>r-t>64?rI.decode(e.subarray(t,r)):av(e,t,r),cv=Ef?e=>e.length>64?globalThis.Buffer.from(e):sv(e):e=>e.length>64?nI.encode(e):sv(e),mo=e=>Uint8Array.from(e),Sf=Ef?(e,t,r)=>Jl(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),lv=Ef?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),Sm(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},hv=Ef?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function pv(e,t){if(Jl(e)&&Jl(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function sv(e,t=1/0){let r,n=e.length,o=null,a=[];for(let f=0;f<n;++f){if(r=e.charCodeAt(f),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(f+1===n){(t-=3)>-1&&a.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function av(e,t,r){let n=[];for(;t<r;){let o=e[t],a=null,f=o>239?4:o>223?3:o>191?2:1;if(t+f<=r){let u,h,d,v;switch(f){case 1:o<128&&(a=o);break;case 2:u=e[t+1],(u&192)===128&&(v=(o&31)<<6|u&63,v>127&&(a=v));break;case 3:u=e[t+1],h=e[t+2],(u&192)===128&&(h&192)===128&&(v=(o&15)<<12|(u&63)<<6|h&63,v>2047&&(v<55296||v>57343)&&(a=v));break;case 4:u=e[t+1],h=e[t+2],d=e[t+3],(u&192)===128&&(h&192)===128&&(d&192)===128&&(v=(o&15)<<18|(u&63)<<12|(h&63)<<6|d&63,v>65535&&v<1114112&&(a=v))}}a===null?(a=65533,f=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),t+=f}return iI(n)}var fv=4096;function iI(e){let t=e.length;if(t<=fv)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=fv));return r}var oI=256,Gu=class{constructor(t=oI){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=hv(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Sf(n,0,this.cursor)}else r=lv(this.chunks,this.cursor);return t&&this.reset(),r}};var ht="CBOR decode error:",Pm="CBOR encode error:",Vu=[];Vu[23]=1;Vu[24]=2;Vu[25]=3;Vu[26]=5;Vu[27]=9;function $o(e,t,r){if(e.length-t<r)throw new Error(`${ht} not enough data for type`)}var Lr=[24,256,65536,4294967296,BigInt("18446744073709551616")];function zn(e,t,r){$o(e,t,1);let n=e[t];if(r.strict===!0&&n<Lr[0])throw new Error(`${ht} integer encoded in more bytes than necessary (strict decode)`);return n}function Kn(e,t,r){$o(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<Lr[1])throw new Error(`${ht} integer encoded in more bytes than necessary (strict decode)`);return n}function Hn(e,t,r){$o(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<Lr[2])throw new Error(`${ht} integer encoded in more bytes than necessary (strict decode)`);return n}function $n(e,t,r){$o(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],a=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&a<Lr[3])throw new Error(`${ht} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(r.allowBigInt===!0)return a;throw new Error(`${ht} integers outside of the safe integer range are not supported`)}function dv(e,t,r,n){return new Ae(V.uint,zn(e,t+1,n),2)}function mv(e,t,r,n){return new Ae(V.uint,Kn(e,t+1,n),3)}function yv(e,t,r,n){return new Ae(V.uint,Hn(e,t+1,n),5)}function gv(e,t,r,n){return new Ae(V.uint,$n(e,t+1,n),9)}function gi(e,t){return $r(e,0,t.value)}function $r(e,t,r){if(r<Lr[0]){let n=Number(r);e.push([t|n])}else if(r<Lr[1]){let n=Number(r);e.push([t|24,n])}else if(r<Lr[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<Lr[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<Lr[4]){let o=[t|27,0,0,0,0,0,0,0],a=Number(n&BigInt(4294967295)),f=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=a&255,a=a>>8,o[7]=a&255,a=a>>8,o[6]=a&255,a=a>>8,o[5]=a&255,o[4]=f&255,f=f>>8,o[3]=f&255,f=f>>8,o[2]=f&255,f=f>>8,o[1]=f&255,e.push(o)}else throw new Error(`${ht} encountered BigInt larger than allowable range`)}}gi.encodedSize=function(t){return $r.encodedSize(t.value)};$r.encodedSize=function(t){return t<Lr[0]?1:t<Lr[1]?2:t<Lr[2]?3:t<Lr[3]?5:9};gi.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function wv(e,t,r,n){return new Ae(V.negint,-1-zn(e,t+1,n),2)}function vv(e,t,r,n){return new Ae(V.negint,-1-Kn(e,t+1,n),3)}function xv(e,t,r,n){return new Ae(V.negint,-1-Hn(e,t+1,n),5)}var Cm=BigInt(-1),_v=BigInt(1);function bv(e,t,r,n){let o=$n(e,t+1,n);if(typeof o!="bigint"){let a=-1-o;if(a>=Number.MIN_SAFE_INTEGER)return new Ae(V.negint,a,9)}if(n.allowBigInt!==!0)throw new Error(`${ht} integers outside of the safe integer range are not supported`);return new Ae(V.negint,Cm-BigInt(o),9)}function Xl(e,t){let r=t.value,n=typeof r=="bigint"?r*Cm-_v:r*-1-1;$r(e,t.type.majorEncoded,n)}Xl.encodedSize=function(t){let r=t.value,n=typeof r=="bigint"?r*Cm-_v:r*-1-1;return n<Lr[0]?1:n<Lr[1]?2:n<Lr[2]?3:n<Lr[3]?5:9};Xl.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function Yu(e,t,r,n){$o(e,t,r+n);let o=Sf(e,t+r,t+r+n);return new Ae(V.bytes,o,r+n)}function Av(e,t,r,n){return Yu(e,t,1,r)}function Ev(e,t,r,n){return Yu(e,t,2,zn(e,t+1,n))}function Sv(e,t,r,n){return Yu(e,t,3,Kn(e,t+1,n))}function Pv(e,t,r,n){return Yu(e,t,5,Hn(e,t+1,n))}function Cv(e,t,r,n){let o=$n(e,t+1,n);if(typeof o=="bigint")throw new Error(`${ht} 64-bit integer bytes lengths not supported`);return Yu(e,t,9,o)}function Zl(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===V.string?cv(e.value):e.value),e.encodedBytes}function Pf(e,t){let r=Zl(t);$r(e,t.type.majorEncoded,r.length),e.push(r)}Pf.encodedSize=function(t){let r=Zl(t);return $r.encodedSize(r.length)+r.length};Pf.compareTokens=function(t,r){return aI(Zl(t),Zl(r))};function aI(e,t){return e.length<t.length?-1:e.length>t.length?1:pv(e,t)}function Ju(e,t,r,n,o){let a=r+n;$o(e,t,a);let f=new Ae(V.string,uv(e,t+r,t+a),a);return o.retainStringBytes===!0&&(f.byteValue=Sf(e,t+r,t+a)),f}function kv(e,t,r,n){return Ju(e,t,1,r,n)}function Iv(e,t,r,n){return Ju(e,t,2,zn(e,t+1,n),n)}function Tv(e,t,r,n){return Ju(e,t,3,Kn(e,t+1,n),n)}function Fv(e,t,r,n){return Ju(e,t,5,Hn(e,t+1,n),n)}function Bv(e,t,r,n){let o=$n(e,t+1,n);if(typeof o=="bigint")throw new Error(`${ht} 64-bit integer string lengths not supported`);return Ju(e,t,9,o,n)}var Dv=Pf;function Cf(e,t,r,n){return new Ae(V.array,n,r)}function Lv(e,t,r,n){return Cf(e,t,1,r)}function Nv(e,t,r,n){return Cf(e,t,2,zn(e,t+1,n))}function Mv(e,t,r,n){return Cf(e,t,3,Kn(e,t+1,n))}function Ov(e,t,r,n){return Cf(e,t,5,Hn(e,t+1,n))}function Rv(e,t,r,n){let o=$n(e,t+1,n);if(typeof o=="bigint")throw new Error(`${ht} 64-bit integer array lengths not supported`);return Cf(e,t,9,o)}function Uv(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${ht} indefinite length items not allowed`);return Cf(e,t,1,1/0)}function Ql(e,t){$r(e,V.array.majorEncoded,t.value)}Ql.compareTokens=gi.compareTokens;Ql.encodedSize=function(t){return $r.encodedSize(t.value)};function kf(e,t,r,n){return new Ae(V.map,n,r)}function zv(e,t,r,n){return kf(e,t,1,r)}function Kv(e,t,r,n){return kf(e,t,2,zn(e,t+1,n))}function Hv(e,t,r,n){return kf(e,t,3,Kn(e,t+1,n))}function $v(e,t,r,n){return kf(e,t,5,Hn(e,t+1,n))}function jv(e,t,r,n){let o=$n(e,t+1,n);if(typeof o=="bigint")throw new Error(`${ht} 64-bit integer map lengths not supported`);return kf(e,t,9,o)}function qv(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${ht} indefinite length items not allowed`);return kf(e,t,1,1/0)}function eh(e,t){$r(e,V.map.majorEncoded,t.value)}eh.compareTokens=gi.compareTokens;eh.encodedSize=function(t){return $r.encodedSize(t.value)};function Wv(e,t,r,n){return new Ae(V.tag,r,1)}function Gv(e,t,r,n){return new Ae(V.tag,zn(e,t+1,n),2)}function Vv(e,t,r,n){return new Ae(V.tag,Kn(e,t+1,n),3)}function Yv(e,t,r,n){return new Ae(V.tag,Hn(e,t+1,n),5)}function Jv(e,t,r,n){return new Ae(V.tag,$n(e,t+1,n),9)}function th(e,t){$r(e,V.tag.majorEncoded,t.value)}th.compareTokens=gi.compareTokens;th.encodedSize=function(t){return $r.encodedSize(t.value)};var pI=20,dI=21,mI=22,yI=23;function Xv(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${ht} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new Ae(V.null,null,1):new Ae(V.undefined,void 0,1)}function Zv(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${ht} indefinite length items not allowed`);return new Ae(V.break,void 0,1)}function km(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${ht} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${ht} Infinity values are not supported`)}return new Ae(V.float,e,t)}function Qv(e,t,r,n){return km(Im(e,t+1),3,n)}function ex(e,t,r,n){return km(Tm(e,t+1),5,n)}function tx(e,t,r,n){return km(ox(e,t+1),9,n)}function rh(e,t,r){let n=t.value;if(n===!1)e.push([V.float.majorEncoded|pI]);else if(n===!0)e.push([V.float.majorEncoded|dI]);else if(n===null)e.push([V.float.majorEncoded|mI]);else if(n===void 0)e.push([V.float.majorEncoded|yI]);else{let o,a=!1;(!r||r.float64!==!0)&&(nx(n),o=Im(qi,1),n===o||Number.isNaN(n)?(qi[0]=249,e.push(qi.slice(0,3)),a=!0):(ix(n),o=Tm(qi,1),n===o&&(qi[0]=250,e.push(qi.slice(0,5)),a=!0))),a||(gI(n),o=ox(qi,1),qi[0]=251,e.push(qi.slice(0,9)))}}rh.encodedSize=function(t,r){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){nx(n);let o=Im(qi,1);if(n===o||Number.isNaN(n))return 3;if(ix(n),o=Tm(qi,1),n===o)return 5}return 9};var rx=new ArrayBuffer(9),wi=new DataView(rx,1),qi=new Uint8Array(rx,0);function nx(e){if(e===1/0)wi.setUint16(0,31744,!1);else if(e===-1/0)wi.setUint16(0,64512,!1);else if(Number.isNaN(e))wi.setUint16(0,32256,!1);else{wi.setFloat32(0,e);let t=wi.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)wi.setUint16(0,31744,!1);else if(r===0)wi.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?wi.setUint16(0,0):o<-14?wi.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):wi.setUint16(0,(t&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Im(e,t){if(e.length-t<2)throw new Error(`${ht} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,a;return n===0?a=o*2**-24:n!==31?a=(o+1024)*2**(n-25):a=o===0?1/0:NaN,r&32768?-a:a}function ix(e){wi.setFloat32(0,e,!1)}function Tm(e,t){if(e.length-t<4)throw new Error(`${ht} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function gI(e){wi.setFloat64(0,e,!1)}function ox(e,t){if(e.length-t<8)throw new Error(`${ht} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}rh.compareTokens=gi.compareTokens;function It(e,t,r){throw new Error(`${ht} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function nh(e){return()=>{throw new Error(`${ht} ${e}`)}}var de=[];for(let e=0;e<=23;e++)de[e]=It;de[24]=dv;de[25]=mv;de[26]=yv;de[27]=gv;de[28]=It;de[29]=It;de[30]=It;de[31]=It;for(let e=32;e<=55;e++)de[e]=It;de[56]=wv;de[57]=vv;de[58]=xv;de[59]=bv;de[60]=It;de[61]=It;de[62]=It;de[63]=It;for(let e=64;e<=87;e++)de[e]=Av;de[88]=Ev;de[89]=Sv;de[90]=Pv;de[91]=Cv;de[92]=It;de[93]=It;de[94]=It;de[95]=nh("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)de[e]=kv;de[120]=Iv;de[121]=Tv;de[122]=Fv;de[123]=Bv;de[124]=It;de[125]=It;de[126]=It;de[127]=nh("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)de[e]=Lv;de[152]=Nv;de[153]=Mv;de[154]=Ov;de[155]=Rv;de[156]=It;de[157]=It;de[158]=It;de[159]=Uv;for(let e=160;e<=183;e++)de[e]=zv;de[184]=Kv;de[185]=Hv;de[186]=$v;de[187]=jv;de[188]=It;de[189]=It;de[190]=It;de[191]=qv;for(let e=192;e<=215;e++)de[e]=Wv;de[216]=Gv;de[217]=Vv;de[218]=Yv;de[219]=Jv;de[220]=It;de[221]=It;de[222]=It;de[223]=It;for(let e=224;e<=243;e++)de[e]=nh("simple values are not supported");de[244]=It;de[245]=It;de[246]=It;de[247]=Xv;de[248]=nh("simple values are not supported");de[249]=Qv;de[250]=ex;de[251]=tx;de[252]=It;de[253]=It;de[254]=It;de[255]=Zv;var Wi=[];for(let e=0;e<24;e++)Wi[e]=new Ae(V.uint,e,1);for(let e=-1;e>=-24;e--)Wi[31-e]=new Ae(V.negint,e,1);Wi[64]=new Ae(V.bytes,new Uint8Array(0),1);Wi[96]=new Ae(V.string,"",1);Wi[128]=new Ae(V.array,0,1);Wi[160]=new Ae(V.map,0,1);Wi[244]=new Ae(V.false,!1,1);Wi[245]=new Ae(V.true,!0,1);Wi[246]=new Ae(V.null,null,1);function sx(e){switch(e.type){case V.false:return mo([244]);case V.true:return mo([245]);case V.null:return mo([246]);case V.bytes:return e.value.length?void 0:mo([64]);case V.string:return e.value===""?mo([96]):void 0;case V.array:return e.value===0?mo([128]):void 0;case V.map:return e.value===0?mo([160]):void 0;case V.uint:return e.value<24?mo([Number(e.value)]):void 0;case V.negint:if(e.value>=-24)return mo([31-Number(e.value)])}}var vI={float64:!1,mapSorter:bI,quickEncodeToken:sx};function xI(){let e=[];return e[V.uint.major]=gi,e[V.negint.major]=Xl,e[V.bytes.major]=Pf,e[V.string.major]=Dv,e[V.array.major]=Ql,e[V.map.major]=eh,e[V.tag.major]=th,e[V.float.major]=rh,e}var ax=xI(),Fm=new Gu,If=class{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${Pm} object contains circular references`);return new If(r,t)}},Rs={null:new Ae(V.null,null),undefined:new Ae(V.undefined,void 0),true:new Ae(V.true,!0),false:new Ae(V.false,!1),emptyArray:new Ae(V.array,0),emptyMap:new Ae(V.map,0)},Us={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new Ae(V.float,e):e>=0?new Ae(V.uint,e):new Ae(V.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new Ae(V.uint,e):new Ae(V.negint,e)},Uint8Array(e,t,r,n){return new Ae(V.bytes,e)},string(e,t,r,n){return new Ae(V.string,e)},boolean(e,t,r,n){return e?Rs.true:Rs.false},null(e,t,r,n){return Rs.null},undefined(e,t,r,n){return Rs.undefined},ArrayBuffer(e,t,r,n){return new Ae(V.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new Ae(V.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[Rs.emptyArray,new Ae(V.break)]:Rs.emptyArray;n=If.createCheck(n,e);let o=[],a=0;for(let f of e)o[a++]=ih(f,r,n);return r.addBreakTokens?[new Ae(V.array,e.length),o,new Ae(V.break)]:[new Ae(V.array,e.length),o]},Object(e,t,r,n){let o=t!=="Object",a=o?e.keys():Object.keys(e),f=o?e.size:a.length;if(!f)return r.addBreakTokens===!0?[Rs.emptyMap,new Ae(V.break)]:Rs.emptyMap;n=If.createCheck(n,e);let u=[],h=0;for(let d of a)u[h++]=[ih(d,r,n),ih(o?e.get(d):e[d],r,n)];return _I(u,r),r.addBreakTokens?[new Ae(V.map,f),u,new Ae(V.break)]:[new Ae(V.map,f),u]}};Us.Map=Us.Object;Us.Buffer=Us.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Us[`${e}Array`]=Us.DataView;function ih(e,t={},r){let n=ov(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||Us[n];if(typeof o=="function"){let f=o(e,n,t,r);if(f!=null)return f}let a=Us[n];if(!a)throw new Error(`${Pm} unsupported type: ${n}`);return a(e,n,t,r)}function _I(e,t){t.mapSorter&&e.sort(t.mapSorter)}function bI(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,a=ax[o].compareTokens(r,n);return a===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),a}function fx(e,t,r,n){if(Array.isArray(t))for(let o of t)fx(e,o,r,n);else r[t.type.major](e,t,n)}function AI(e,t,r){let n=ih(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let a=t[n.type.major];if(a.encodedSize){let f=a.encodedSize(n,r),u=new Gu(f);if(a(u,n,r),u.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return Sm(u.chunks[0])}}return Fm.reset(),fx(Fm,n,t,r),Fm.toBytes(!0)}function Bm(e,t){return t=Object.assign({},vI,t),AI(e,ax,t)}var EI={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Dm=class{constructor(t,r={}){this.pos=0,this.data=t,this.options=r}done(){return this.pos>=this.data.length}next(){let t=this.data[this.pos],r=Wi[t];if(r===void 0){let n=de[t];if(!n)throw new Error(`${ht} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}},Xu=Symbol.for("DONE"),oh=Symbol.for("BREAK");function SI(e,t,r){let n=[];for(let o=0;o<e.value;o++){let a=Zu(t,r);if(a===oh){if(e.value===1/0)break;throw new Error(`${ht} got unexpected break to lengthed array`)}if(a===Xu)throw new Error(`${ht} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=a}return n}function PI(e,t,r){let n=r.useMaps===!0,o=n?void 0:{},a=n?new Map:void 0;for(let f=0;f<e.value;f++){let u=Zu(t,r);if(u===oh){if(e.value===1/0)break;throw new Error(`${ht} got unexpected break to lengthed map`)}if(u===Xu)throw new Error(`${ht} found map but not enough entries (got ${f} [no key], expected ${e.value})`);if(n!==!0&&typeof u!="string")throw new Error(`${ht} non-string keys not supported (got ${typeof u})`);let h=Zu(t,r);if(h===Xu)throw new Error(`${ht} found map but not enough entries (got ${f} [no value], expected ${e.value})`);n?a.set(u,h):o[u]=h}return n?a:o}function Zu(e,t){if(e.done())return Xu;let r=e.next();if(r.type===V.break)return oh;if(r.type.terminal)return r.value;if(r.type===V.array)return SI(r,e,t);if(r.type===V.map)return PI(r,e,t);if(r.type===V.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=Zu(e,t);return t.tags[r.value](n)}throw new Error(`${ht} tag not supported (${r.value})`)}throw new Error("unsupported")}function Lm(e,t){if(!(e instanceof Uint8Array))throw new Error(`${ht} data to decode must be a Uint8Array`);t=Object.assign({},EI,t);let r=t.tokenizer||new Dm(e,t),n=Zu(r,t);if(n===Xu)throw new Error(`${ht} did not find any content to decode`);if(n===oh)throw new Error(`${ht} got unexpected break`);if(!r.done())throw new Error(`${ht} too many terminals, data makes no sense`);return n}var ux=42;function kI(e){if(e.asCID!==e)return null;let t=ot.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new Ae(V.tag,ux),new Ae(V.bytes,r)]}function II(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function TI(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var FI={float64:!0,typeEncoders:{Object:kI,undefined:II,number:TI}};function BI(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return ot.decode(e.subarray(1))}var cx={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};cx.tags[ux]=BI;var lx="dag-cbor";var Sa=e=>Bm(e,FI),zs=e=>Lm(e,cx);function hx(e,t,r,n){var o,a=!1,f=0;function u(){o&&clearTimeout(o)}function h(){u(),a=!0}typeof t!="boolean"&&(n=r,r=t,t=void 0);function d(){for(var v=arguments.length,P=new Array(v),I=0;I<v;I++)P[I]=arguments[I];var R=this,ee=Date.now()-f;if(a)return;function ce(){f=Date.now(),r.apply(R,P)}function De(){o=void 0}n&&!o&&ce(),u(),n===void 0&&ee>e?ce():t!==!0&&(o=setTimeout(n?De:ce,n===void 0?e-ee:e))}return d.cancel=h,d}var _t={};dt(_t,{getEncryptedFile:()=>gT,getFile:()=>yT,getFileSystemLinks:()=>wT,getSimpleLinks:()=>Rf,putEncryptedFile:()=>hy,putFile:()=>sc,putLinks:()=>Ba});var dO=new TextDecoder;var yO=new TextEncoder,gO=2**32,wO=2**31;var Nm=new TextEncoder;function DI(e,t){if(e===t)return 0;let r=e.Name?Nm.encode(e.Name):[],n=t.Name?Nm.encode(t.Name):[],o=r.length,a=n.length;for(let f=0,u=Math.min(o,a);f<u;++f)if(r[f]!==n[f]){o=r[f],a=n[f];break}return o<a?-1:a<o?1:0}function px(e){if(typeof e.asCID=="object"){let r=ot.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Hash){let r=ot.asCID(e.Hash);try{r||(typeof e.Hash=="string"?r=ot.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=ot.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(t.Name=e.Name),typeof e.Tsize=="number"&&(t.Tsize=e.Tsize),t}function dx(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Data!==void 0)if(typeof e.Data=="string")t.Data=Nm.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))t.Links=e.Links.map(px),t.Links.sort(DI);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function Ks(e,t=[]){return dx({Data:e,Links:t})}function yo(e,t,r){return px({Hash:r,Name:e,Tsize:t})}var Go={};dt(Go,{DAG_NODE_DATA:()=>nc,add:()=>Wo,cat:()=>ic,catBuf:()=>_o,catRaw:()=>T_,dagGet:()=>Ta,dagPut:()=>xh,dagPutLinks:()=>oc,encoded:()=>_i,get:()=>xi,iframe:()=>k_,ls:()=>sy,set:()=>aT,size:()=>Gs});var mx=e=>{let{name:t,message:r,stack:n,code:o,detail:a}=e;return{name:t,message:r,stack:n,code:o,detail:a}},Tf=e=>{if(e instanceof Error)return e;{let{name:t,message:r,stack:n,code:o}=e;return Object.assign(LI(t,r),{name:t,stack:n,code:o})}},LI=(e,t)=>{switch(e){case"RangeError":return new RangeError(t);case"ReferenceError":return ReferenceError(t);case"SyntaxError":return new SyntaxError(t);case"TypeError":return new TypeError(t);case"URIError":return new URIError(t);default:return new Error(t)}};var fh=class extends Error{get name(){return this.constructor.name}},uh=class extends Error{get name(){return this.constructor.name}},ch=class extends Error{get name(){return this.constructor.name}};var jo=class{constructor(t){this.port=null,this.id=Math.random().toString(32).slice(2),this.nextID=0,this.queries=Object.create(null),t&&this.connect(t)}execute(t){let r=`${this.id}@${this.nextID++}`;return this.queries[r]=t,t.timeout>0&&t.timeout<1/0&&(t.timerID=setTimeout(jo.timeout,t.timeout,this,r)),t.signal&&t.signal.addEventListener("abort",()=>this.abort(r),{once:!0}),this.port&&jo.postQuery(this.port,r,t),t.result}connect(t){if(this.port)throw new Error("Transport is already open");this.port=t,this.port.addEventListener("message",this),this.port.start();for(let[r,n]of Object.entries(this.queries))jo.postQuery(t,r,n)}disconnect(){let t=new ch;for(let[r,n]of Object.entries(this.queries))n.fail(t),this.abort(r);this.port&&(this.port.removeEventListener("message",this),this.port.close())}static timeout(t,r){let{queries:n}=t,o=n[r];o&&(delete n[r],o.fail(new fh("request timed out")),t.port&&t.port.postMessage({type:"abort",id:r}))}abort(t){let{queries:r}=this,n=r[t];n&&(delete r[t],n.fail(new uh),this.port&&this.port.postMessage({type:"abort",id:t}),n.timerID!=null&&clearTimeout(n.timerID))}static postQuery(t,r,n){t.postMessage({type:"query",namespace:n.namespace,method:n.method,id:r,input:n.toJSON()},n.transfer())}handleEvent(t){let{id:r,result:n}=t.data,o=this.queries[r];o&&(delete this.queries[r],n.ok?o.succeed(n.value):o.fail(Tf(n.error)),o.timerID!=null&&clearTimeout(o.timerID))}};var lh=class{constructor(t,r,n){this.result=new Promise((o,a)=>{this.succeed=o,this.fail=a,this.signal=n.signal,this.input=n,this.namespace=t,this.method=r,this.timeout=n.timeout==null?1/0:n.timeout,this.timerID=null})}toJSON(){return this.input}transfer(){return this.input.transfer}};var hh=class{constructor(t,r,n){this.transport=n;let o=this;for(let a of r)o[a]=f=>this.transport.execute(new lh(t,a.toString(),f))}};var go=class{constructor(t,r,n){this.remote=new hh(t,r,n)}};var jn=(e,t)=>(t&&t.add(e.multihash.bytes.buffer),e),An=e=>{let t=e;return t._baseCache||Object.defineProperty(t,"_baseCache",{value:new Map}),t.asCID||Object.defineProperty(t,"asCID",{get:()=>t}),Object.setPrototypeOf(t.multihash.digest,Uint8Array.prototype),Object.setPrototypeOf(t.multihash.bytes,Uint8Array.prototype),Object.setPrototypeOf(t.bytes,Uint8Array.prototype),Object.setPrototypeOf(t,ot.prototype),Object.defineProperty(t,Symbol.for("@ipld/js-cid/CID"),{value:!0}),t};var yx=(e,t)=>(t&&t.add(e.buffer),e);var Hs=class extends go{constructor(t){super("block",["put","get","rm","stat"],t)}};Hs.prototype.get=async function(t,r={}){let{transfer:n}=r,{block:o}=await this.remote.get({...r,cid:jn(t,n)});return o};Hs.prototype.put=async function(t,r={}){let{transfer:n}=r;delete r.progress;let o=await this.remote.put({...r,block:t instanceof Uint8Array?t:yx(t,n)});return An(o.cid)};Hs.prototype.rm=async function*(t,r={}){let{transfer:n}=r;yield*(await this.remote.rm({...r,cids:Array.isArray(t)?t.map(a=>jn(a,n)):[jn(t,n)]})).map(NI)};Hs.prototype.stat=async function(t,r={}){let{transfer:n}=r,o=await this.remote.stat({...r,cid:jn(t,n)});return{...o,cid:An(o.cid)}};var NI=e=>{let t=An(e.cid);return e.error?{cid:t,error:Tf(e.error)}:{cid:t}};var gx=({dagNode:e,cids:t})=>{for(let r of t)An(r);return e},wx=(e,t)=>{let r=[];return Mm(e,r,t),{dagNode:e,cids:r}},Mm=(e,t,r)=>{if(e!=null&&typeof e=="object"){let n=ot.asCID(e);if(n)t.push(n),jn(n,r);else if(e instanceof ArrayBuffer)r&&r.add(e);else if(ArrayBuffer.isView(e))r&&r.add(e.buffer);else if(Array.isArray(e))for(let o of e)Mm(o,t,r);else for(let o of Object.values(e))Mm(o,t,r)}};var Pa=class extends go{constructor(t){super("dag",["put","get","resolve"],t)}};Pa.prototype.put=async function(t,r={}){let n=await this.remote.put({...r,dagNode:wx(t,r.transfer)});return An(n)};Pa.prototype.get=async function(t,r={}){let{value:n,remainderPath:o}=await this.remote.get({...r,cid:jn(t,r.transfer)});return{value:gx(n),remainderPath:o}};Pa.prototype.resolve=async function(t,r={}){let{cid:n,remainderPath:o}=await this.remote.resolve({...r,cid:MI(t,r.transfer)});return{cid:An(n),remainderPath:o}};var MI=(e,t)=>typeof e=="string"?e:jn(e,t);var ph=async function*({port:e},t){let r=f=>{},n=()=>new Promise(f=>r=f),o=()=>(e.postMessage({method:"next"}),n());e.onmessage=f=>r(f.data);let a=!1;try{for(;!a;){let{done:f,value:u,error:h}=await o();if(a=f,h!=null)throw Tf(h);u!=null&&(yield t(u))}}finally{a||e.postMessage({method:"return"}),e.close()}},wo=(e,t,r)=>{let{port1:n,port2:o}=new MessageChannel,a=OI(e),f=new Set;return n.onmessage=async({data:{method:u}})=>{switch(u){case"next":{try{let{done:h,value:d}=await a.next();if(h)n.postMessage({type:"next",done:!0}),n.close();else{f.clear();let v=t(d,f);RI(n,{type:"next",done:!1,value:v},f)}}catch(h){n.postMessage({type:"throw",error:mx(h)}),n.close()}break}case"return":{n.close(),a.return&&a.return();break}default:break}},n.start(),r.add(o),{type:"RemoteIterable",port:o}},OI=e=>{if(e!=null){if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]()}throw TypeError("Value must be async or sync iterable")},Om=(e,t)=>{let{port1:r,port2:n}=new MessageChannel;return r.onmessage=({data:o})=>e.apply(null,o),t.add(n),{type:"RemoteCallback",port:n}};var RI=(e,t,r)=>e.postMessage(t,r);var wh=oo(xx(),1);var x_=oo(Rm(),1);var qo=oo(v_(),1),Bf=qo.default.Reader,Zm=qo.default.Writer,Qe=qo.default.util,jr=qo.default.roots["ipfs-unixfs"]||(qo.default.roots["ipfs-unixfs"]={}),JI=jr.Data=(()=>{function e(t){if(this.blocksizes=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=Qe.newBuffer([]),e.prototype.filesize=Qe.Long?Qe.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=Qe.emptyArray,e.prototype.hashType=Qe.Long?Qe.Long.fromBits(0,0,!0):0,e.prototype.fanout=Qe.Long?Qe.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(r,n){if(n||(n=Zm.create()),n.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&n.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&n.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var o=0;o<r.blocksizes.length;++o)n.uint32(32).uint64(r.blocksizes[o]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&n.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&n.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&n.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&jr.UnixTime.encode(r.mtime,n.uint32(66).fork()).ldelim(),n},e.decode=function(r,n){r instanceof Bf||(r=Bf.create(r));for(var o=n===void 0?r.len:r.pos+n,a=new jr.Data;r.pos<o;){var f=r.uint32();switch(f>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;case 3:a.filesize=r.uint64();break;case 4:if(a.blocksizes&&a.blocksizes.length||(a.blocksizes=[]),(f&7)===2)for(var u=r.uint32()+r.pos;r.pos<u;)a.blocksizes.push(r.uint64());else a.blocksizes.push(r.uint64());break;case 5:a.hashType=r.uint64();break;case 6:a.fanout=r.uint64();break;case 7:a.mode=r.uint32();break;case 8:a.mtime=jr.UnixTime.decode(r,r.uint32());break;default:r.skipType(f&7);break}}if(!a.hasOwnProperty("Type"))throw Qe.ProtocolError("missing required 'Type'",{instance:a});return a},e.fromObject=function(r){if(r instanceof jr.Data)return r;var n=new jr.Data;switch(r.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?Qe.base64.decode(r.Data,n.Data=Qe.newBuffer(Qe.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),r.filesize!=null&&(Qe.Long?(n.filesize=Qe.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?n.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?n.filesize=r.filesize:typeof r.filesize=="object"&&(n.filesize=new Qe.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)Qe.Long?(n.blocksizes[o]=Qe.Long.fromValue(r.blocksizes[o])).unsigned=!0:typeof r.blocksizes[o]=="string"?n.blocksizes[o]=parseInt(r.blocksizes[o],10):typeof r.blocksizes[o]=="number"?n.blocksizes[o]=r.blocksizes[o]:typeof r.blocksizes[o]=="object"&&(n.blocksizes[o]=new Qe.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0))}if(r.hashType!=null&&(Qe.Long?(n.hashType=Qe.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?n.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?n.hashType=r.hashType:typeof r.hashType=="object"&&(n.hashType=new Qe.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(Qe.Long?(n.fanout=Qe.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?n.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?n.fanout=r.fanout:typeof r.fanout=="object"&&(n.fanout=new Qe.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(n.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=jr.UnixTime.fromObject(r.mtime)}return n},e.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.blocksizes=[]),n.defaults){if(o.Type=n.enums===String?"Raw":0,n.bytes===String?o.Data="":(o.Data=[],n.bytes!==Array&&(o.Data=Qe.newBuffer(o.Data))),Qe.Long){var a=new Qe.Long(0,0,!0);o.filesize=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.filesize=n.longs===String?"0":0;if(Qe.Long){var a=new Qe.Long(0,0,!0);o.hashType=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.hashType=n.longs===String?"0":0;if(Qe.Long){var a=new Qe.Long(0,0,!0);o.fanout=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.fanout=n.longs===String?"0":0;o.mode=0,o.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(o.Type=n.enums===String?jr.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(o.Data=n.bytes===String?Qe.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?o.filesize=n.longs===String?String(r.filesize):r.filesize:o.filesize=n.longs===String?Qe.Long.prototype.toString.call(r.filesize):n.longs===Number?new Qe.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){o.blocksizes=[];for(var f=0;f<r.blocksizes.length;++f)typeof r.blocksizes[f]=="number"?o.blocksizes[f]=n.longs===String?String(r.blocksizes[f]):r.blocksizes[f]:o.blocksizes[f]=n.longs===String?Qe.Long.prototype.toString.call(r.blocksizes[f]):n.longs===Number?new Qe.LongBits(r.blocksizes[f].low>>>0,r.blocksizes[f].high>>>0).toNumber(!0):r.blocksizes[f]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?o.hashType=n.longs===String?String(r.hashType):r.hashType:o.hashType=n.longs===String?Qe.Long.prototype.toString.call(r.hashType):n.longs===Number?new Qe.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?o.fanout=n.longs===String?String(r.fanout):r.fanout:o.fanout=n.longs===String?Qe.Long.prototype.toString.call(r.fanout):n.longs===Number?new Qe.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(o.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(o.mtime=jr.UnixTime.toObject(r.mtime,n)),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,qo.default.util.toJSONOptions)},e.DataType=function(){let t={},r=Object.create(t);return r[t[0]="Raw"]=0,r[t[1]="Directory"]=1,r[t[2]="File"]=2,r[t[3]="Metadata"]=3,r[t[4]="Symlink"]=4,r[t[5]="HAMTShard"]=5,r}(),e})(),_R=jr.UnixTime=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Seconds=Qe.Long?Qe.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(r,n){return n||(n=Zm.create()),n.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&n.uint32(21).fixed32(r.FractionalNanoseconds),n},e.decode=function(r,n){r instanceof Bf||(r=Bf.create(r));for(var o=n===void 0?r.len:r.pos+n,a=new jr.UnixTime;r.pos<o;){var f=r.uint32();switch(f>>>3){case 1:a.Seconds=r.int64();break;case 2:a.FractionalNanoseconds=r.fixed32();break;default:r.skipType(f&7);break}}if(!a.hasOwnProperty("Seconds"))throw Qe.ProtocolError("missing required 'Seconds'",{instance:a});return a},e.fromObject=function(r){if(r instanceof jr.UnixTime)return r;var n=new jr.UnixTime;return r.Seconds!=null&&(Qe.Long?(n.Seconds=Qe.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?n.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?n.Seconds=r.Seconds:typeof r.Seconds=="object"&&(n.Seconds=new Qe.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=r.FractionalNanoseconds>>>0),n},e.toObject=function(r,n){n||(n={});var o={};if(n.defaults){if(Qe.Long){var a=new Qe.Long(0,0,!1);o.Seconds=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else o.Seconds=n.longs===String?"0":0;o.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?o.Seconds=n.longs===String?String(r.Seconds):r.Seconds:o.Seconds=n.longs===String?Qe.Long.prototype.toString.call(r.Seconds):n.longs===Number?new Qe.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(o.FractionalNanoseconds=r.FractionalNanoseconds),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,qo.default.util.toJSONOptions)},e})(),bR=jr.Metadata=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.MimeType="",e.encode=function(r,n){return n||(n=Zm.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&n.uint32(10).string(r.MimeType),n},e.decode=function(r,n){r instanceof Bf||(r=Bf.create(r));for(var o=n===void 0?r.len:r.pos+n,a=new jr.Metadata;r.pos<o;){var f=r.uint32();switch(f>>>3){case 1:a.MimeType=r.string();break;default:r.skipType(f&7);break}}return a},e.fromObject=function(r){if(r instanceof jr.Metadata)return r;var n=new jr.Metadata;return r.MimeType!=null&&(n.MimeType=String(r.MimeType)),n},e.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(o.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(o.MimeType=r.MimeType),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,qo.default.util.toJSONOptions)},e})();var AR=parseInt("0644",8),ER=parseInt("0755",8);function __(e){if(e!=null)return typeof e=="number"?e&4095:(e=e.toString(),e.substring(0,1)==="0"?parseInt(e,8)&4095:parseInt(e,10)&4095)}function b_(e){if(e==null)return;let t;if(e.secs!=null&&(t={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){let r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:(r-n*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(t,"secs")){if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw(0,x_.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}var S_=oo(E_(),1),P_=oo(Rm(),1),Ws=class extends go{constructor(t){super("core",["add","addAll","cat","ls"],t)}};Ws.prototype.addAll=async function*(t,r={}){let{timeout:n,signal:o}=r,a=r.transfer||new Set,f=r.progress?Om(r.progress,a):void 0,u=await this.remote.addAll({...r,input:rT(t,a),progress:void 0,progressCallback:f,transfer:a,timeout:n,signal:o});yield*ph(u.data,C_)};Ws.prototype.add=async function(t,r={}){let{timeout:n,signal:o}=r,a=r.transfer||new Set,f=r.progress?Om(r.progress,a):void 0,u=await this.remote.add({...r,input:await tT(t,a),progress:void 0,progressCallback:f,transfer:a,timeout:n,signal:o});return C_(u.data)};Ws.prototype.cat=async function*(t,r={}){let n=ot.asCID(t),o=n?jn(n):t,a=await this.remote.cat({...r,path:o});yield*ph(a.data,eT)};Ws.prototype.ls=async function*(t,r={}){let n=ot.asCID(t),o=n?jn(n):t,a=await this.remote.ls({...r,path:o});yield*ph(a.data,QI)};var C_=({path:e,cid:t,mode:r,mtime:n,size:o})=>({path:e,cid:An(t),mode:r,mtime:n,size:o}),QI=({name:e,path:t,size:r,cid:n,type:o,mode:a,mtime:f})=>({cid:An(n),type:o,name:e,path:t,mode:a,mtime:f,size:r}),eT=e=>e,tT=async(e,t)=>{if(e instanceof Blob)return e;if(typeof e=="string")return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;{let r=ry(e);if(r)return wo(await Qm(r),ey,t);let n=ny(e);if(n)return wo(await Qm(n),Df,t);let o=iy(e);if(o)return wo(await Qm((0,wh.default)(o)),Df,t);let a=oy(e);if(a)return ty(a,t);throw TypeError("Unexpected input: "+typeof e)}},rT=(e,t)=>{let r=ry(e);if(r)return wo(r,ey,t);let n=ny(e);if(n)return wo(n,Df,t);let o=iy(e);if(o)return wo((0,wh.default)(o),Df,t);throw TypeError("Unexpected input: "+typeof e)},Df=(e,t)=>{if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;if(e instanceof Blob)return{path:"",content:e};if(typeof e=="string")return{path:"",content:e};{let r=oy(e);if(r)return ty(r,t);throw TypeError("Unexpected input: "+typeof e)}},ey=(e,t)=>{if(typeof e=="number")throw TypeError("Iterable of numbers is not supported");if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;if(e instanceof Blob)return{path:"",content:e};if(typeof e=="string")return{path:"",content:e};{let r=oy(e);if(r)return ty(r,t);throw TypeError("Unexpected input: "+typeof e)}},ty=({path:e,mode:t,mtime:r,content:n},o)=>{let a={path:e,mode:__(t),mtime:b_(r)};return n&&(a.content=nT(n,o)),a},nT=(e,t)=>{if(e==null)return"";if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return e;if(e instanceof Blob)return e;if(typeof e=="string")return e;{let r=ry(e);if(r)return wo(r,ey,t);let n=ny(e);if(n)return wo(n,Df,t);let o=iy(e);if(o)return wo((0,wh.default)(o),Df,t);throw TypeError("Unexpected input: "+typeof e)}},ry=e=>{let t=e;return t&&typeof t[Symbol.iterator]=="function"?t:null},ny=e=>{let t=e;return t&&typeof t[Symbol.asyncIterator]=="function"?t:null},iy=e=>e&&typeof e.getReader=="function"?e:null,oy=e=>typeof e=="object"&&(e.path||e.content)?e:null,Qm=async e=>{let t=(0,S_.default)(e),{value:r,done:n}=await t.peek();if(n)return[];if(t.push(r),Number.isInteger(r)||iT(r)||typeof r=="string"||r instanceof String)return t;throw(0,P_.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")};function iT(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}var rc=class extends go{constructor(t){super("files",["stat"],t)}};rc.prototype.stat=async function(t,r={}){let{size:n,hash:o,withLocal:a,timeout:f,signal:u}=r,{stat:h}=await this.remote.stat({path:oT(t),size:n,hash:o,withLocal:a,timeout:f,signal:u});return sT(h)};var oT=e=>ot.asCID(e)?`/ipfs/${e.toString()}`:e.toString(),sT=e=>({...e,cid:An(e.cid)});var Ia=class extends Ws{constructor(t){super(t),this.transport=t,this.dag=new Pa(this.transport),this.files=new rc(this.transport),this.block=new Hs(this.transport)}static attach(t,r){t.transport.connect(r)}static detached(){return new Ia(new jo(void 0))}static from(t){return new Ia(new jo(t))}};var vh=null,aT=e=>{vh=e},xi=async()=>{if(!vh){let e=await k_();vh=Ia.from(e)}return vh};function k_(){return new Promise((e,t)=>{let r=document.createElement("iframe");r.id="webnative-ipfs",r.style.width="0",r.style.height="0",r.style.border="none",r.style.display="none",document.body.appendChild(r),r.onload=()=>{let n=new MessageChannel;n.port1.onmessage=({ports:o})=>e(o[0]),r.contentWindow?r.contentWindow.postMessage("connect","*",[n.port2]):t(new Error("Don't have access to iframe.contentWindow"))},r.src=`${Me.endpoints.lobby}/ipfs/v2.html`})}var nc=new Uint8Array([8,1]);var fT=e=>yo(e.Name,e.Tsize,xe(e.Hash)),I_=e=>{let t=e?.value?.Data,r=e?.value?.Links?.map(fT);return Ks(t,r)};var Wo=async e=>{let r=await(await xi()).add(e,{cidVersion:1,pin:Me.shouldPin});return{cid:xe(r.cid),size:r.size,isFile:!0}},T_=async e=>{let t=Lf(e),r=await xi(),n=[];await ay(t);for await(let o of r.cat(t))n.push(o);return n},_o=async e=>{let t=Lf(e),r=await T_(t);return Ed(r)},ic=async e=>{let t=Lf(e);return(await _o(t)).toString()},sy=async e=>{let t=Lf(e),r=await xi(),n=[];for await(let o of r.ls(t))n.push({...o,cid:xe(o.cid)});return n},Ta=async e=>{let t=Lf(e),r=await xi();await ay(t);let n=await r.dag.get(t);return I_(n)},xh=async e=>{let t=await xi(),r=Ks(e.Data||new Uint8Array,e.Links.map(a=>yo(a.Name||"",a.Tsize||0,a.Hash))),n=await t.dag.put(r,{storeCodec:"dag-pb",hashAlg:"sha2-256"}).then(xe);await ay(n);let o=await Gs(n);return{cid:n,size:o,isFile:!1}},oc=async e=>{let t=Ks(nc,e);return xh(t)},Gs=async e=>{let t=Lf(e);return(await(await xi()).files.stat(`/ipfs/${t}`)).cumulativeSize},ay=async e=>{if(!Me.shouldPin)return;let t=await xi();try{await t.pin.add(e,{recursive:!1})}catch(r){if(!nt(r)||!Yt(r.message)||!r.message||!r.message.includes("already pinned recursively"))throw r}},Lf=e=>{let t=ot.asCID(e);if(!t)throw new Error(`Expected a CID class instance: Found ${e}`);return t};var _i={};dt(_i,{add:()=>cT,catAndDecode:()=>lT});var cT=async(e,t)=>{let r=bd(e)?await Wd(e):e,n=Sa(r);if(!xl(t))return Wo(n);let o=ar.AES_GCM,a=await Hr.encrypt(n,t,o),f=Sa({alg:o,cip:a});return Wo(f)},lT=async(e,t)=>{let r=await _o(e);if(!xl(t))return zs(r);let n=zs(r);if(!hT(n.alg)||!vl(n.cip))throw new Error('Unexpected private block. Expected "alg" and "cip" field.');let o=n.alg,a=await Hr.decrypt(n.cip,t,o);return zs(a)};function hT(e){return Yt(e)&&Object.values(ar).includes(e)}var ur=e=>nt(e)&&e.content!==void 0,_h=e=>nt(e)&&e.ls!==void 0,uy=e=>nt(e)&&Yt(e.name)&&Ui(e.size)&&_l(e.isFile),_r=e=>nt(e)&&Yt(e.name)&&Yt(e.ipns),F_=e=>{if(nt(e)){let t=Object.values(e);return t.length>0&&t.every(_r)}return!1},B_=e=>Array.isArray(e)&&e.every(_r),pT=e=>uy(e)&&Vo(e.cid),D_=e=>nt(e)&&Object.values(e).every(t=>pT(t)||_r(t)),dT=e=>nt(e)&&Ui(e.mtime)&&Ui(e.ctime)&&Ui(e.mode)&&Yt(e._type),Fa=e=>nt(e)&&dT(e.unixMeta)&&_l(e.isFile)&&mT(e.version),bh=e=>nt(e)&&Object.values(e).every(Ah),Ah=e=>nt(e)&&Vo(e.cid)&&Vo(e.userland)&&Vo(e.metadata)&&bh(e.subSkeleton)||_r(e),cy=e=>nt(e)&&bh(e.skeleton)&&Fa(e.metadata)&&e.metadata.isFile===!1,L_=e=>cy(e)&&Vo(e.userland),ly=e=>nt(e)&&Fa(e.metadata)&&e.metadata.isFile===!0,N_=e=>ly(e)&&Vo(e.userland),Vo=e=>!!ot.asCID(e)||Yt(e)||e&&"code"in e&&"version"in e&&"multihash"in e,mT=e=>{if(!nt(e))return!1;let{major:t,minor:r,patch:n}=e;return Ui(t)&&Ui(r)&&Ui(n)};var Eh=e=>{let{name:t,cid:r,size:n}=e;return yo(t,n,xe(r))},M_=e=>{let{name:t="",cid:r,size:n,type:o}=e;return{name:t,cid:r,size:n,isFile:o!=="dir"}},Nf=e=>{let t=e.Name||"",r=e.Hash,n=e.Tsize||0;return{name:t,cid:r,size:n}},an=(e,t,r,n)=>({name:e,cid:t,size:n,isFile:r}),Mf=e=>e.reduce((t,r)=>(t[r.name]=r,t),{});var yT=async e=>_o(e),gT=async(e,t)=>_i.catAndDecode(e,t),sc=async e=>Wo(e),hy=async(e,t)=>_i.add(e,t),Rf=async e=>{let t=await Ta(e);return Mf(t.Links.map(Nf))},wT=async e=>{let t=await Ta(e),r=await Promise.all(t.Links.map(async n=>{let o=await Ta(n.Hash),a=Mf(o.Links.map(Nf));if(!!a.softLink){let h=await _o(xe(a.softLink.cid)),d=new TextDecoder().decode(h);return JSON.parse(d)}let u=await _i.catAndDecode(xe(a.metadata.cid),null);return{...Nf(n),isFile:so(u,"isFile")?u.isFile:!1}}));return Mf(r)},Ba=async e=>{let t=Object.values(e).filter(r=>r!==void 0).map(async r=>{if(_r(r)){let n=await Wo(JSON.stringify(r)),o=await xh(Ks(nc,[yo("softLink",n.size,n.cid)]));return yo(r.name,o.size,o.cid)}else return r.Hash?r:Eh(r)});return oc(await Promise.all(t))};var vT={"0":!0,"1":!0,"2":!0,"3":!0,"4":!0,"5":!0,"6":!0,"7":!0,"8":!0,"9":!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},xT=e=>vT[e]===!0,qr=class{constructor(t){this.links=t,this.children={}}static create(){return new qr({})}static async fromCID(t){let r=await Rf(t);return new qr(r)}async putDetailed(){return Ba(this.links)}async put(){let{cid:t}=await this.putDetailed();return t}async add(t,r){if(!xT(t[0]))throw new Error("Not a valid name, must be hexadecimal");let n=this.nextTreeOrSiblingName(t);if(t===n)Me.debug&&this.links[t]?.cid!==r&&console.warn(`Adding \`${t}\` to the MMPT again with a different value. This should not happen. The original value will still be used and can loading issues on other ipfs repos. Current CID is \`${this.links[t]?.cid}\`, new CID is \`${r}\`.`);else if(n===null)this.links[t]=an(t,r,!0,0);else if(n.length===1)await(await this.getDirectChild(n)).add(t.slice(1),r),await this.putAndUpdateChildLink(n);else{let o=this.addEmptyChild(t[0]),a=this.links[n].cid;this.removeChild(n),await Promise.all([o.add(t.slice(1),r),o.add(n.slice(1),xe(a))]),await this.putAndUpdateChildLink(t[0])}}async putAndUpdateChildLink(t){let r=this.links[t]?.cid,{cid:n,size:o}=await this.children[t].putDetailed(),a=this.links[t]?.cid;if(r!=a)return await this.putAndUpdateChildLink(t);this.links[t]=an(t,n,!1,o)}addEmptyChild(t){let r=qr.create();return this.children[t]=r,r}async get(t){let r=this.nextTreeName(t);return r===null?null:r.length>1?xe(this.links[r].cid):(await this.getDirectChild(r)).get(t.slice(1))}async exists(t){return await this.get(t)!==null}async members(){return(await Promise.all(Object.values(this.links).map(async({name:r,cid:n})=>r.length>1?[{name:r,cid:xe(n)}]:(await(await qr.fromCID(xe(n))).members()).map(f=>({...f,name:r+f.name}))))).reduce((r,n)=>r.concat(n))}async getDirectChild(t){if(this.children[t])return this.children[t];let r=await qr.fromCID(xe(this.links[t].cid));return this.children[t]?this.children[t]:(this.children[t]=r,r)}removeChild(t){delete this.links[t],this.children[t]&&delete this.children[t]}directChildExists(t){return this.links[t]!==void 0||this.children[t]!==void 0}nextTreeName(t){return this.directChildExists(t[0])?t[0]:this.directChildExists(t)?t:null}nextTreeOrSiblingName(t){let r=t[0];return this.directChildExists(r)?r:Object.keys(this.links).find(n=>r===n[0])||null}};var Yi={};dt(Yi,{checkValue:()=>R_,get:()=>AT,getAndCheckValue:()=>dy,getValue:()=>O_,getValueFromLinks:()=>py,normalizeFileContent:()=>U_,putAndMakeLink:()=>Sh,putFile:()=>bT,putTree:()=>_T});var _T=async(e,t,r,n)=>{let o=await Ba(e),a=an("userland",o.cid,!0,o.size),[f,u]=await Promise.all([Sh("metadata",r),Sh("skeleton",t)]),h=n!=null?an("previous",n,!1,await Gs(n)):void 0,d={metadata:f,skeleton:u,userland:a,previous:h},{cid:v,size:P}=await Ba(d);return{cid:v,userland:xe(a.cid),metadata:xe(f.cid),size:P,isFile:!1,skeleton:t}},bT=async(e,t,r)=>{let n=await sc(await U_(e)),o=an("userland",n.cid,!0,n.size),a=await Sh("metadata",t),f=r!=null?an("previous",r,!1,await Gs(r)):void 0,u={metadata:a,userland:o,previous:f},{cid:h,size:d}=await Ba(u);return{cid:h,userland:xe(o.cid),metadata:xe(a.cid),size:d,isFile:!0,skeleton:{}}},Sh=async(e,t)=>{let{cid:r,size:n}=await _i.add(t,null);return an(e,r,!0,n)},AT=async e=>{let t=await Rf(e),r=await dy(t,"metadata",Fa),n=r.isFile?void 0:await dy(t,"skeleton",bh),o=t.userland?.cid||null;if(!Vo(o))throw new Error("Could not find userland");let a=t.previous?.cid||void 0;return{userland:o,metadata:r,previous:a,skeleton:n}},O_=async(e,t)=>{let r=ot.asCID(e);if(Vo(e)){if(!r)return null;let n=await Rf(r);return py(n,t)}return py(e,t)},py=async(e,t)=>{let r=e[t]?.cid;return r?_i.catAndDecode(xe(r),null):null},dy=async(e,t,r,n=!1)=>{let o=await O_(e,t);return R_(o,t,r,n)},R_=(e,t,r,n=!1)=>{if(!_d(e)){if(n)return e;throw new Error(`Could not find header value: ${t}`)}if(r(e))return e;throw new Error(`Improperly formatted header value: ${t}`)};async function U_(e){if(e instanceof Uint8Array)return e;if(typeof Blob<"u"&&e instanceof Blob)return await yf.toUint8Array(e);let t=new TextEncoder;if(typeof e=="string")return t.encode(e);let r=JSON.stringify(e);return t.encode(r)}var Or={};dt(Or,{addNode:()=>O4,findLatestRevision:()=>D2,getByCID:()=>Xh,getByName:()=>R4,getLatestByBareNameFilter:()=>U4,getLatestByCID:()=>B2,getLatestByName:()=>F2,getRevision:()=>Xy,readNode:()=>T2});var Ph=e=>ac(e)||Jo(e)||_r(e),Jo=e=>nt(e)&&Fa(e.metadata)&&e.metadata.isFile&&Yt(e.key)&&cf(e.content),ac=e=>nt(e)&&Fa(e.metadata)&&e.metadata.isFile===!1&&Ui(e.revision)&&ET(e.links)&&z_(e.skeleton),my=e=>uy(e)&&Yt(e.key)&&Yt(e.pointer),ET=e=>nt(e)&&Object.values(e).every(t=>my(t)||_r(t)),z_=e=>nt(e)&&Object.values(e).every(t=>ST(t)||_r(t)),ST=e=>nt(e)&&cf(e.cid)&&Yt(e.key)&&z_(e.subSkeleton);var P2=oo(E2(),1);var Yh=e=>Array.prototype.map.call(e,t=>("00"+t.toString(16)).slice(-2)).join(""),S2=e=>{let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++)t[r]=parseInt(e.slice(r*2,r*2+2),16);return t};var F4=1024,B4=16,C2=320,Vy=async e=>{let t="0".repeat(F4/4);return Pi(t,e)},Pi=async(e,t)=>{let r=Jy(e),n=await mi.sha256Str(t);return r.add(n),await I2(r)},rs=async(e,t,r)=>await Pi(e,`${r}${t}`),ns=async e=>{let t=await Yy(Jy(e));return D4(t)},D4=async e=>{let t=new Uint8Array(e.toBytes()),r=await mi.sha256(t);return Yh(r)},k2=async(e,t=C2)=>{let r=await Yy(Jy(e),t);return await I2(r)},Yy=async(e,t=C2)=>{if(t>e.toBytes().byteLength*8)throw new Error("threshold is bigger than filter size");if(L4(e)>=t)return e;let n=e.toBytes(),o=n;do{let a=await mi.sha256(o);e.add(Yh(a)),o=a}while(N4(n,e.toBytes()));return Yy(e,t)},L4=e=>{let t=new Uint32Array(e.toBytes()),r=0;for(let n=0;n<t.length;n++)r+=M4(t[n]);return r},I2=e=>Yh(e.toBytes()),Jy=e=>{let t=S2(e);return P2.BloomFilter.fromBytes(t,B4)},N4=(e,t)=>{if(e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),n=new Uint8Array(t);for(let o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0},M4=e=>{let t=e-(e>>1&1431655765),r=(t&858993459)+(t>>2&858993459);return(r+(r>>4)&252645135)*16843009>>24};var O4=async(e,t,r)=>{let{cid:n,size:o}=await hy(t,r),a=await rs(t.bareNameFilter,r,t.revision),f=await ns(a);if(await e.add(f,n),Jo(t)){let d=await Pi(t.bareNameFilter,t.key),v=await rs(d,t.key,t.revision),P=await ns(v);await e.add(P,xe(t.content))}let[u,h]=Jo(t)?[{},!0]:[t.skeleton,!1];return{cid:n,name:f,key:r,size:o,isFile:h,skeleton:u}},T2=async(e,t)=>{let r=await _i.catAndDecode(e,t);if(!Ph(r))throw new Error(`Could not parse a valid filesystem object, ${e}`);return r},R4=async(e,t,r)=>{let n=await e.get(t);return n===null?null:Xh(n,r)},Xh=async(e,t)=>await T2(e,t),F2=async(e,t,r)=>{let n=await e.get(t);return n===null?null:B2(e,n,r)},B2=async(e,t,r)=>{let n=await Xh(t,r),o=await D2(e,n.bareNameFilter,r,n.revision);return o?.cid?await Xh(xe(o?.cid),r):n},U4=async(e,t,r)=>{let n=await rs(t,r,1),o=await ns(n);return F2(e,o,r)},D2=async(e,t,r,n)=>{let o=n,a=null,f=0,u=null;for(;a===null;){let h=n+Math.pow(2,f),d=await Xy(e,t,r,h);d!==null?(u=d,o=h):a=h,f++}for(;o<a-1;){let h=Math.floor((a+o)/2),d=await Xy(e,t,r,h);d!==null?(u=d,o=h):a=h}return u},Xy=async(e,t,r,n)=>{let o=await rs(t,r,n),a=await ns(o),f=await e.get(a);return f?{cid:f,name:a,number:n}:null};var Zy=(e,t,r)=>({major:e,minor:t,patch:r}),Zh=e=>{let t=e.split(".").map(r=>parseInt(r));return t.length!==3||t.some(r=>typeof r!="number")?null:{major:t[0],minor:t[1],patch:t[2]}},Xf=e=>{let{major:t,minor:r,patch:n}=e;return`${t}.${r}.${n}`},L2=(e,t)=>e.major!=t.major?e.major<t.major:e.minor!=t.minor?e.minor<t.minor:e.patch<t.patch,YU=Zy(0,0,0),JU=Zy(1,0,0),Zr=Zy(2,0,0);var Qy=class{constructor(t){this.content=t,this.readOnly=!1}async put(){let{cid:t}=await this.putDetailed();return t}async updateContent(t){if(this.readOnly)throw new Error("File is read-only");return this.content=t,this}},Qf=Qy;var eu=class extends Qf{static create(t){return new eu(t)}static async fromCID(t){let r=await _t.getFile(t);return new eu(r)}static instanceOf(t){return nt(t)&&t.content!==void 0}async put(){let{cid:t}=await this.putDetailed();return t}async putDetailed(){return _t.putFile(await Yi.normalizeFileContent(this.content))}},Qh=eu;var e0=class{constructor(){this.readOnly=!1}async put(){let{cid:t}=await this.putDetailed();return t}async ls(t){let r=await this.get(t);if(r===null)throw new Error("Path does not exist");if(ur(r))throw new Error("Can not `ls` a file");return r.getLinks()}async cat(t){let r=await this.get(t);if(r===null)throw new Error("Path does not exist");if(!ur(r))throw new Error("Can not `cat` a directory");return r.content}async mkdir(t){return this.mkdirRecurse(t,()=>this.put())}async mkdirRecurse(t,r){let[n,...o]=t;if(!n)throw new Error("Invalid path: empty");let a=await this.getOrCreateDirectChild(n,r);if(ur(a))throw new Error(`There is a file along the given path: ${ji(t)}`);return o.length&&await a.mkdirRecurse(o,()=>this.updateDirectChild(a,n,r)),this}async add(t,r){return await this.addRecurse(t,r,()=>this.put()),this}async addRecurse(t,r,n){let[o,...a]=t;if(!o)throw new Error("Invalid path: empty");if(a.length===0)await this.createOrUpdateChildFile(r,o,n);else{let f=await this.getOrCreateDirectChild(o,n);if(ur(f))throw new Error(`There is a file along the given path: ${ji(t)}`);await f.addRecurse(a,r,async()=>{await this.updateDirectChild(f,o,n)})}return this}async rm(t){return await this.rmRecurse(t,()=>this.put()),this}async rmRecurse(t,r){let[n,...o]=t;if(!n)throw new Error("Invalid path: empty");if(o.length===0)this.removeDirectChild(n),r&&await r();else{let a=await this.getDirectChild(n);if(a===null)throw new Error("Invalid path: does not exist");if(ur(a))throw new Error(`There is a file along the given path: ${ji(t)}`);await a.rmRecurse(o,async()=>{await this.updateDirectChild(a,n,r)})}return this}async mv(t,r){let n=await this.get(t);if(n===null)throw new Error(`Path does not exist: ${ji(t)}`);if(r.length<1)throw new Error(`Path does not exist: ${ji(r)}`);let o=r.slice(0,-1),a=await this.get(o);if(!a)await this.mkdir(o),a=await this.get(o);else if(ur(a))throw new Error(`Can not \`mv\` to a file: ${ji(o)}`);return await this.rm(t),await[...r].reverse().reduce((f,u,h)=>f.then(async d=>{let v=r.slice(0,-(h+1)),P=v.length?await this.get(v):this;if(P&&!ur(P))return await P.updateDirectChild(d,u,null),P;throw new Error("Failed to update tree while moving node")}),Promise.resolve(n)),this}async exists(t){return await this.get(t)!==null}read(t){return this.get(t)}write(t,r){return this.add(t,r)}async getOrCreateDirectChild(t,r){let n=await this.getDirectChild(t);return n!==null?n:this.createChildTree(t,r)}async updateChild(t,r){let n=[];return await r.reduce(async(o,a,f)=>{let u=await o;if(n.push([a,u]),f+1===r.length)return u;let h=await u.getDirectChild(a);if(!_h(h)){let d=r.slice(f+1);throw new Error(`Expected a tree at the given path: ${ji(d)}`)}return h},Promise.resolve(this)),await n.reverse().reduce(async(o,[a,f])=>(await f.updateDirectChild(await o,a,null),f),Promise.resolve(t)),this}},tu=e0;var is=class extends tu{constructor(r){super();this.links=r,this.children={}}static async empty(){return new is({})}static async fromCID(r){let n=Mf((await sy(r)).map(M_));return new is(n)}static fromLinks(r){return new is(r)}async createChildTree(r,n){let o=await is.empty(),a=this.children[r];if(a){if(ur(a))throw new Error(`There is a file at the given path: ${r}`);return a}return await this.updateDirectChild(o,r,n),o}async createOrUpdateChildFile(r,n,o){let a=await this.getDirectChild(n),f;if(a===null)f=await Qh.create(r);else if(Qh.instanceOf(a))f=await a.updateContent(r);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(f,n,o),f}async putDetailed(){return _t.putLinks(this.links)}async putAndUpdateLink(r,n,o){let a=await r.putDetailed();return this.updateLink(n,a),o&&await o(),this}async updateDirectChild(r,n,o){return this.children[n]=r,this.putAndUpdateLink(r,n,o)}removeDirectChild(r){return delete this.links[r],this.children[r]&&delete this.children[r],this}async getDirectChild(r){if(this.children[r])return this.children[r];let n=this.links[r]||null;if(n===null)return null;let o=xe(n.cid),a=n.isFile?await Qh.fromCID(o):await is.fromCID(o);return this.children[r]?this.children[r]:(this.children[r]=a,a)}async get(r){let[n,...o]=r;if(!n)return this;let a=await this.getDirectChild(n);if(o.length){if(a===null||ur(a))return null}else return a;return a.get(o)}updateLink(r,n){let{cid:o,size:a,isFile:f}=n;return this.links[r]=an(r,o,f,a),this}getLinks(){return this.links}},qa=is;var Pn=class{constructor(t){this.node=t}back(t=-1){let r=Math.abs(Math.min(t,-1));return Array.from({length:r},(n,o)=>o).reduce(n=>n.then(o=>o?Pn._getPreviousVersion(o):null),Promise.resolve(this.node))}async prior(t){return Pn._prior(this.node,t)}async list(t=5){let{acc:r}=await Array.from({length:t},(n,o)=>o).reduce((n,o)=>n.then(({node:a,acc:f})=>a?Pn._getPreviousVersion(a).then(u=>({node:u,acc:[...f,{delta:-(o+1),timestamp:a.header.metadata.unixMeta.mtime}]})):Promise.resolve({node:null,acc:f})),Pn._getPreviousVersion(this.node).then(n=>({node:n,acc:[]})));return r}static async _getPreviousVersion(t){return t.header.previous?t.constructor.fromCID(t.header.previous):Promise.resolve(null)}static async _prior(t,r){if(t.header.metadata.unixMeta.mtime<r)return t;let n=await Pn._getPreviousVersion(t);return n?Pn._prior(n,r):null}};var z4=e=>({mtime:Date.now(),ctime:Date.now(),mode:e?644:755,_type:e?"file":"dir"}),Xs=(e,t)=>({isFile:e,version:t,unixMeta:z4(e)}),ep=e=>({...e,unixMeta:{...e.unixMeta,mtime:Date.now()}});var Wa=class extends Qf{constructor({content:r,header:n,cid:o}){super(r);this.cid=o,this.header=n,this.history=new Pn(this)}static instanceOf(r){return nt(r)&&r.content!==void 0&&ly(r.header)}static async create(r){return new Wa({content:r,header:{metadata:Xs(!0,Zr)},cid:null})}static async fromCID(r){let n=await Yi.get(r);return Wa.fromInfo(n,r)}static async fromInfo(r,n){let{userland:o,metadata:a,previous:f}=r,u=await _t.getFile(xe(o));return new Wa({content:u,header:{metadata:a,previous:f},cid:n})}async putDetailed(){let r=await Yi.putFile(this.content,ep(this.header.metadata),this.cid);return this.cid=r.cid,r}},ru=Wa;var K4="webnative.wnfs_cid_log";function t0(){return K4+"-"+Me.endpoints.lobby}async function r0(){return await Rn(t0())||[]}async function N2(e){let t=await r0();return[t.indexOf(e),t.length]}async function Zs(){return(await r0())[0]}async function rp(e){let t=await r0(),r=[e,...t].slice(0,1e3);await Ki(t0(),r)}async function M2(){await wf(t0())}function O2(e){let t=e.slice(1);return t.length<1?null:t}var hn=class extends tu{constructor({links:r,header:n,cid:o}){super();this.children={},this.cid=o,this.links=r,this.header=n,this.history=new Pn(this)}static async empty(){return new hn({links:{},header:{metadata:Xs(!1,Zr),skeleton:{}},cid:null})}static async fromCID(r){let n=await Yi.get(r);if(!L_(n))throw new Error(`Could not parse a valid public tree at: ${r}`);return hn.fromInfo(n,r)}static async fromInfo(r,n){let{userland:o,metadata:a,previous:f,skeleton:u}=r,h=await _t.getFileSystemLinks(xe(o));return new hn({links:h,header:{metadata:a,previous:f,skeleton:u},cid:n})}static instanceOf(r){return D_(r.links)&&cy(r.header)}async createChildTree(r,n){let o=await hn.empty(),a=this.children[r];if(a){if(ru.instanceOf(a))throw new Error(`There is a file at the given path: ${r}`);if(hn.instanceOf(a))return a;throw new Error(`Not a public tree at the given path: ${r}`)}return await this.updateDirectChild(o,r,n),o}async createOrUpdateChildFile(r,n,o){let a=await this.getDirectChild(n),f;if(a===null)f=await ru.create(r);else if(ru.instanceOf(a))f=await a.updateContent(r);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(f,n,o),f}async putDetailed(){let r=await Yi.putTree(this.links,this.header.skeleton,this.header.metadata,this.cid);return this.header.previous=this.cid||void 0,this.cid=r.cid,r}async updateDirectChild(r,n,o){if(this.readOnly)throw new Error("Tree is read-only");this.children[n]=r;let a=await r.putDetailed();return this.updateLink(n,a),o&&await o(),this}removeDirectChild(r){return delete this.links[r],delete this.header.skeleton[r],this.children[r]&&delete this.children[r],this}async getDirectChild(r){let n=null;if(this.children[r])return this.children[r];let o=this.header.skeleton[r]||null;if(o===null)return null;if(Ah(o)){let a=xe(o.cid);n=o.isFile?await ru.fromCID(a):await hn.fromCID(a)}else if(_r(o))return hn.resolveSoftLink(o);return this.children[r]?this.children[r]:(n&&(this.children[r]=n),n)}async get(r){if(r.length<1)return this;let n=await this.getRecurse(this.header.skeleton,r);if(Ah(n)){let o=xe(n.cid),a=await Yi.get(o);return N_(a)?ru.fromInfo(a,o):hn.fromInfo(a,o)}return n}async getRecurse(r,n){let o=n[0],a=r[o]||null,f=O2(n);if(_r(a)){let u=await hn.resolveSoftLink(a);return f?hn.instanceOf(u)?u.get(f).then($4):null:u}else return a===null||f===null?a:a.subSkeleton?this.getRecurse(a.subSkeleton,f):null}assignLink({name:r,link:n,skeleton:o}){this.links[r]=n,this.header.skeleton[r]=o,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(r){let[n,...o]=r.ipns.split("/"),a=qu(o.join("/"));if(!(po("public",a)||po("p",a)))throw new Error("Mixing public and private soft links is not supported yet.");let u=n===await Mu({withFiles:!0})?await Zs():await ma(n);if(!u)throw new Error(`Failed to resolve the soft link: ${r.ipns} - Could not resolve DNSLink`);let h=(await _t.getSimpleLinks(xe(u))).public.cid,d=Aa(a),P=await(await hn.fromCID(xe(h))).get(Xt(d));return P&&(P.readOnly=!0),P}getLinks(){return Object.values(this.links).reduce((r,n)=>{let o=this.header.skeleton[n.name];return{...r,[n.name]:o&&o.isFile!==void 0?{...n,isFile:o.isFile}:{...n}}},{})}updateLink(r,n){let{cid:o,metadata:a,userland:f,size:u,isFile:h,skeleton:d}=n;return this.assignLink({name:r,link:an(r,o,!1,u),skeleton:{cid:o,metadata:a,userland:f,subSkeleton:d,isFile:h}}),this}insertSoftLink({name:r,path:n,username:o}){let a={ipns:`${o}.files.${Me.endpoints.user}/public/${fr(n)}`,name:r};return this.assignLink({name:r,link:a,skeleton:a}),this}};function $4(e){return e&&(e.readOnly=!0),e}var os=hn;var Ga=class{constructor(t){this.node=t}async back(t=-1){let r=Math.min(t,-1),n=this.node.header?.revision;return n&&await this._getRevision(n+r)||null}async prior(t){return this.node.header.metadata.unixMeta.mtime<t?this.node:this._prior(this.node.header.revision-1,t)}async list(t=5){let r=this.node.header.revision;return Promise.all(Array.from({length:t},(n,o)=>{let a=o+1;return this._getRevisionInfoFromNumber(r-a).then(f=>({revisionInfo:f,delta:-a}))})).then(n=>n.filter(o=>!!o.revisionInfo)).then(n=>n.map(o=>{let a=o.revisionInfo.metadata.unixMeta.mtime;return{delta:o.delta,timestamp:a}}))}async _getRevision(t){let r=await this._getRevisionInfoFromNumber(t);return r&&await this.node.constructor.fromInfo(this.node.mmpt,this.node.key,r)}_getRevisionInfo(t){return Or.readNode(xe(t.cid),this.node.key)}async _getRevisionInfoFromNumber(t){let{key:r,mmpt:n}=this.node,{bareNameFilter:o}=this.node.header,a=await Or.getRevision(n,o,r,t);return a&&this._getRevisionInfo(a)}async _prior(t,r){let n=await this._getRevisionInfoFromNumber(t);return n?.revision?n.metadata.unixMeta.mtime<r?this._getRevision(n.revision):this._prior(n.revision-1,r):null}};var Qs=class extends Qf{constructor({content:r,mmpt:n,key:o,header:a}){super(r);this.header=a,this.history=new Ga(this),this.key=o,this.mmpt=n}static instanceOf(r){return nt(r)&&r.content!==void 0&&r.mmpt!==void 0&&Jo(r.header)}static async create(r,n,o,a){let f=await Pi(o,a),u=await Hr.genKeyStr(),h=await _t.putEncryptedFile(n,u);return new Qs({content:n,mmpt:r,key:a,header:{bareNameFilter:f,key:u,revision:1,metadata:Xs(!0,Zr),content:h.cid}})}static async fromBareNameFilter(r,n,o){let a=await Or.getLatestByBareNameFilter(r,n,o);return this.fromInfo(r,o,a)}static async fromLatestName(r,n,o){let a=await Or.getLatestByName(r,n,o);return Qs.fromInfo(r,o,a)}static async fromName(r,n,o){let a=await Or.getByName(r,n,o);return Qs.fromInfo(r,o,a)}static async fromInfo(r,n,o){if(!Jo(o))throw new Error("Could not parse a valid private file using the given key");let a=await _t.getEncryptedFile(xe(o.content),o.key);return new Qs({content:a,key:n,mmpt:r,header:o})}async getName(){let{bareNameFilter:r,revision:n}=this.header,o=await rs(r,this.key,n);return ns(o)}async updateParentNameFilter(r){return this.header.bareNameFilter=await Pi(r,this.header.key),this}async updateContent(r){let n=await _t.putEncryptedFile(r,this.header.key);return this.content=r,this.header={...this.header,revision:this.header.revision+1,content:n.cid},this}async putDetailed(){return Or.addNode(this.mmpt,{...this.header,metadata:ep(this.header.metadata)},this.key)}},Cn=Qs;var zt=class extends tu{constructor({mmpt:r,key:n,header:o}){super();this.children={},this.header=o,this.history=new Ga(this),this.key=n,this.mmpt=r}static instanceOf(r){return nt(r)&&r.mmpt!==void 0&&ac(r.header)}static async create(r,n,o){let a=o?await Pi(o,n):await Vy(n);return new zt({mmpt:r,key:n,header:{metadata:Xs(!1,Zr),bareNameFilter:a,revision:1,links:{},skeleton:{}}})}static async fromBaseKey(r,n){let o=await Vy(n);return this.fromBareNameFilter(r,o,n)}static async fromBareNameFilter(r,n,o){let a=await Or.getLatestByBareNameFilter(r,n,o);return this.fromInfo(r,o,a)}static async fromLatestName(r,n,o){let a=await Or.getLatestByName(r,n,o);return this.fromInfo(r,o,a)}static async fromName(r,n,o){let a=await Or.getByName(r,n,o);return this.fromInfo(r,o,a)}static async fromInfo(r,n,o){if(!ac(o))throw new Error("Could not parse a valid private tree using the given key");return new zt({mmpt:r,key:n,header:o})}async createChildTree(r,n){let o=await Hr.genKeyStr(),a=await zt.create(this.mmpt,o,this.header.bareNameFilter),f=this.children[r];if(f){if(Cn.instanceOf(f))throw new Error(`There is a file at the given path: ${r}`);return f}return await this.updateDirectChild(a,r,n),a}async createOrUpdateChildFile(r,n,o){let a=await this.getDirectChild(n),f;if(a===null){let u=await Hr.genKeyStr();f=await Cn.create(this.mmpt,r,this.header.bareNameFilter,u)}else if(Cn.instanceOf(a))f=await a.updateContent(r);else throw new Error(`There is already a directory with that name: ${n}`);return await this.updateDirectChild(f,n,o),f}async putDetailed(){let r=Object.assign({},this.header);return Or.addNode(this.mmpt,r,this.key)}async updateDirectChild(r,n,o){if(this.readOnly)throw new Error("Tree is read-only");await r.updateParentNameFilter(this.header.bareNameFilter),this.children[n]=r;let a=await r.putDetailed();return this.updateLink(n,a),o&&await o(),this}removeDirectChild(r){return this.header={...this.header,revision:this.header.revision+1,links:Nu(this.header.links,r),skeleton:Nu(this.header.skeleton,r)},this.children[r]&&delete this.children[r],this}async getDirectChild(r){let n=null;if(this.children[r])return this.children[r];let o=this.header.links[r];if(o===void 0)return null;if(my(o))n=o.isFile?await Cn.fromLatestName(this.mmpt,o.pointer,o.key):await zt.fromLatestName(this.mmpt,o.pointer,o.key);else if(_r(o))return zt.resolveSoftLink(o);return this.children[r]?this.children[r]:(n&&(this.children[r]=n),n)}async getName(){let{bareNameFilter:r,revision:n}=this.header,o=await rs(r,this.key,n);return ns(o)}async updateParentNameFilter(r){return this.header.bareNameFilter=await Pi(r,this.key),this}async get(r){if(r.length===0)return this;let[n,...o]=r,a=this.header.skeleton[n];return a===void 0?null:this.getRecurse(a,o)}async getRecurse(r,n){let[o,...a]=n;if(_r(r)){let d=await zt.resolveSoftLink(r);if(!d)return null;if(o===void 0)return d;if(zt.instanceOf(d))return d.get(n).then(q4);throw new Error("Was expecting a directory at: "+ji(n))}if(o===void 0)return j4(this.mmpt,r);let f=r.subSkeleton[o];if(f!==void 0)return this.getRecurse(f,a);let u=await Or.getLatestByCID(this.mmpt,xe(r.cid),r.key);if(!ac(u))return null;let h=u.skeleton[o];return h===void 0?null:this.getRecurse(h,a)}assignLink({name:r,link:n,skeleton:o}){this.header.links[r]=n,this.header.skeleton[r]=o,this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=Date.now()}static async resolveSoftLink(r){let n=r.ipns.split("/")[0];if(!r.privateName||!r.key)throw new Error("Mixing public and private soft links is not supported yet.");let o=n===await Mu({withFiles:!0})?await Zs():await ma(n);if(!o)throw new Error(`Failed to resolve the soft link: ${r.ipns} - Could not resolve DNSLink`);let a=(await _t.getSimpleLinks(xe(o))).private.cid,f=await qr.fromCID(xe(a)),u=await Or.getLatestByName(f,r.privateName,r.key);if(!u)return null;let h=u.metadata.isFile?await Cn.fromInfo(f,r.key,u):await zt.fromInfo(f,r.key,u);return h&&(h.readOnly=!0),h}getLinks(){return Gd(this.header.links,r=>{if(_r(r))return{...r};{let{key:n,...o}=r;return{...o}}})}updateLink(r,n){let{cid:o,size:a,key:f,isFile:u,skeleton:h}=n,d=n.name;return this.assignLink({name:r,link:{name:r,key:f,pointer:d,size:a,isFile:u},skeleton:{cid:o,key:f,subSkeleton:h}}),this}insertSoftLink({name:r,username:n,key:o,privateName:a}){let f={ipns:`${n}.files.${Me.endpoints.user}`,name:r,privateName:a,key:o};return this.assignLink({name:r,link:f,skeleton:f}),this}};async function j4(e,t){let r=await Or.getLatestByCID(e,xe(t.cid),t.key);return Jo(r)?await Cn.fromInfo(e,t.key,r):await zt.fromInfo(e,t.key,r)}function q4(e){return e&&(e.readOnly=!0),e}var nu=class{constructor({links:t,mmpt:r,privateLog:n,sharedCounter:o,sharedLinks:a,publicTree:f,prettyTree:u,privateNodes:h}){this.links=t,this.mmpt=r,this.privateLog=n,this.sharedCounter=o,this.sharedLinks=a,this.publicTree=f,this.prettyTree=u,this.privateNodes=h}static async empty({rootKey:t}){let r=await os.empty(),n=await qa.empty(),o=qr.create(),a=fr(kr("private")),f=await zt.create(o,t,null);await f.put();let u=new nu({links:{},mmpt:o,privateLog:[],sharedCounter:1,sharedLinks:{},publicTree:r,prettyTree:n,privateNodes:{[a]:f}});return await nu.storeRootKey(t),await u.setVersion(Zr),await Promise.all([u.updatePuttable("public",r),u.updatePuttable("p",n),u.updatePuttable("private",o)]),u}static async fromCID({cid:t,permissions:r}){let n=await _t.getSimpleLinks(t),o=r?await V4(r):[],a=n["public"]?.cid||null,f=a===null?await os.empty():await os.fromCID(xe(a)),u=n["p"]?await qa.fromCID(xe(n["p"].cid)):await qa.empty(),h=n["private"]?.cid||null,d,v;h===null?(d=qr.create(),v={}):(d=await qr.fromCID(xe(h)),v=await G4(o,d));let P=n["privateLog"]?.cid,I=P?await Ta(xe(P)).then(Oe=>Oe.Links.map(Nf)).then(Oe=>Oe.sort((ae,Ue)=>parseInt(ae.name,10)-parseInt(Ue.name,10))):[],R=n["shared"]?.cid||null,ee=R?await this.getSharedLinks(xe(R)):{},ce=n["sharedCounter"]?.cid||null,De=ce?await _t.getFile(xe(ce)).then(Oe=>JSON.parse(sr(Oe,"utf8"))):1,ge=new nu({links:n,mmpt:d,privateLog:I,sharedCounter:De,sharedLinks:ee,publicTree:f,prettyTree:u,privateNodes:v});return n["version"]==null&&await ge.setVersion(Zr),ge}async put(){let{cid:t}=await this.putDetailed();return t}async putDetailed(){return _t.putLinks(this.links)}updateLink(t,r){let{cid:n,size:o,isFile:a}=r;return this.links[t]=an(t,n,a,o),this}async updatePuttable(t,r){return this.updateLink(t,await r.putDetailed())}static async storeRootKey(t){let r=kr("private"),n=await Os({path:r});await xr.importSymmKey(t,n)}static async retrieveRootKey(){let t=kr("private"),r=await Os({path:t});return await xr.exportSymmKey(r)}findPrivateNode(t){return n0(this.privateNodes,t)}async addPrivateLogEntry(t){let r=[...this.privateLog],n=Math.max(0,r.length-1),o=r[n]?.cid?(await ic(xe(r[n].cid))).split(","):[];o.length+1>nu.LOG_CHUNK_SIZE&&(n=n+1,o=[]);let f=await mi.sha256Str(t.toString()),u=[...o,f],h=await _t.putFile(u.join(","));r[n]={name:n.toString(),cid:h.cid,size:h.size};let d=await oc(r.map(Eh));this.updateLink("privateLog",{cid:d.cid,isFile:!1,size:await Gs(d.cid)}),this.privateLog=r}async addShares(t){this.sharedLinks=t.reduce((a,f)=>({...a,[f.name]:f}),this.sharedLinks);let r=Object.values(this.sharedLinks).reduce((a,{cid:f,name:u,size:h})=>({...a,[u]:{cid:f,name:u,size:h}}),{}),o=await(await xi()).block.put(Sa(r),{format:lx,mhtype:"sha2-256",pin:!1,version:1});return this.updateLink("shared",{cid:o,isFile:!1,size:await Gs(o)}),this}static async getSharedLinks(t){let n=await(await xi()).block.get(t),o=zs(n);if(!nt(o))throw new Error("Invalid shared section, not an object");return Object.values(o).reduce((a,f)=>{if(!nt(f))return a;let u=f.name?f.name:null,h=f.cid?xe(f.cid):null;return!u||!h?a:{...a,[u]:{name:u,cid:h,size:f.size||0}}},{})}async setSharedCounter(t){this.sharedCounter=t;let{cid:r,size:n}=await _t.putFile(JSON.stringify(t));return this.updateLink("sharedCounter",{cid:r,isFile:!0,size:n}),t}async bumpSharedCounter(){let t=this.sharedCounter+1;return this.setSharedCounter(t)}async setVersion(t){let r=await _t.putFile(Xf(t));return this.updateLink("version",r)}async getVersion(){let t=await _t.getFile(xe(this.links["version"].cid));return Zh(sr(t))}},Eo=nu;Eo.LOG_CHUNK_SIZE=1020;async function W4(e,t){let r=await Gl({path:t}),n=await Rn(r);if(n)return n;let[o,a]=n0(e,t);if(!a)return null;let u=Xt(t).slice(Xt(o).length);return Cn.instanceOf(a)?u.length===0?a.header.bareNameFilter:null:(a.exists(u)||(Cr(t)?await a.mkdir(u):await a.add(u,"")),a.get(u).then(h=>h?h.header.bareNameFilter:null))}function n0(e,t){let r=e[fr(t)];if(r)return[t,r];let n=vm(t);return n?n0(e,n):[t,null]}function G4(e,t){return Y4(e).reduce((r,{path:n,key:o})=>r.then(async a=>{let f,u=Xt(n);if(u.length===1&&u[0]==="private")f=await zt.fromBaseKey(t,o);else{let d=await W4(a,n);if(!d)throw new Error(`Was trying to load the PrivateTree for the path \`${n}\`, but couldn't find the bare name filter for it.`);Cr(n)?f=await zt.fromBareNameFilter(t,d,o):f=await Cn.fromBareNameFilter(t,d,o)}let h=fr(n);return{...a,[h]:f}}),Promise.resolve({}))}async function V4(e){return Vl(e).reduce(async(t,r)=>{if(po("public",r))return t;let n=await Os({path:r}),o=await xr.exportSymmKey(n),a={path:r,key:o};return t.then(f=>[...f,a])},Promise.resolve([]))}function Y4(e){return e.sort((t,r)=>fr(t.path).localeCompare(fr(r.path)))}var au={};dt(au,{lookup:()=>Ya,lookupOnFisson:()=>W2,update:()=>m0});function kn(...e){Me.debug&&console.log(...e)}function R2(...e){Me.debug&&console.warn(...e)}var Ci={};dt(Ci,{KeyType:()=>Pc,didToPublicKey:()=>Va,exchange:()=>as,ownRoot:()=>h0,publicKeyToDid:()=>iu,root:()=>fs,ucan:()=>cr,verifySignedData:()=>c0,write:()=>cr});var i0={};function ss(){return i0}function U2(e){i0=e}async function z2(){i0={},await wf(vf)}var Pc=(n=>(n.RSA="rsa",n.Edwards="ed25519",n.BLS="bls12-381",n))(Pc||{});var s0=new Uint8Array([237,1]),a0=new Uint8Array([234,1]),f0=new Uint8Array([0,245,2]),ip="did:key:z";function H2(e){switch(e){case"ed25519":return s0;case"rsa":return f0;case"bls12-381":return a0;default:return null}}var $2=e=>{if(o0(e,f0))return{keyBuffer:e.slice(f0.byteLength),type:"rsa"};if(o0(e,s0))return{keyBuffer:e.slice(s0.byteLength),type:"ed25519"};if(o0(e,a0))return{keyBuffer:e.slice(a0.byteLength),type:"bls12-381"};throw new Error("Unsupported key algorithm. Try using RSA.")},o0=(e,t)=>Iu.equal(t,e.slice(0,t.byteLength)),u0=e=>{switch(e){case"rsa":return"rsa";case"ed25519":return"ed25519";case"bls12-381":return"bls12-381"}throw new Error(`Key Type ${e} not supported`)};function iu(e,t){let r=ks(e),n=H2(t);if(n===null)throw new Error(`Key type '${t}' not supported`);let o=Tl(n,r);return ip+sr(new Uint8Array(o),"base58btc")}function Va(e){if(!e.startsWith(ip))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");let t=e.substr(ip.length),r=Jt(t,"base58btc"),{keyBuffer:n,type:o}=$2(r);return{publicKey:kl(n),type:o}}async function as(){let e=await xr.publicExchangeKey(),t=await xr.getAlg();return iu(e,u0(t))}async function cr(){let e=await xr.publicWriteKey(),t=await xr.getAlg();return iu(e,u0(t))}async function c0({charSize:e=16,data:t,did:r,signature:n}){try{let{type:o,publicKey:a}=Va(r),f=new Uint8Array(ks(n)),u=new Uint8Array(Hi(t,e)),h=new Uint8Array(ks(a));switch(o){case"ed25519":return await mm.verify(u,f,h);case"rsa":return await ba.verify(u,f,h);default:return!1}}catch{return!1}}async function pn({addSignature:e=!0,audience:t,facts:r=[],issuer:n,lifetimeInSeconds:o=30,expiration:a,potency:f="APPEND",proof:u,resource:h}){let d=Math.floor(Date.now()/1e3),v=u&&br(u),P=await xr.getAlg(),I={alg:X4(P)||"UnknownAlgorithm",typ:"JWT",uav:"1.0.0"},R=a||d+o,ee=d-60;if(v){let ge=v.payload;R=Math.min(ge.exp,R),ee=Math.max(ge.nbf,ee)}let ce={aud:t,exp:R,fct:r,iss:n||await cr(),nbf:ee,prf:u||null,ptc:f,rsc:h||(v?v.payload.rsc:"*")},De=e?await j2(I,ce):null;return{header:I,payload:ce,signature:De}}function br(e){let t=e.split("."),r=JSON.parse(hi.urlDecode(t[0])),n=JSON.parse(hi.urlDecode(t[1]));return{header:r,payload:n,signature:t[2]||null}}function dn(e){let t=op(e.header),r=sp(e.payload);return t+"."+r+"."+e.signature}function op(e){return hi.urlEncode(JSON.stringify(e))}function sp(e){return hi.urlEncode(JSON.stringify({...e}))}function eo(e){return e.payload.exp<=Math.floor(Date.now()/1e3)}async function ou(e){let t=op(e.header),r=sp(e.payload),n=await c0({charSize:8,data:`${t}.${r}`,did:e.payload.iss,signature:hi.makeUrlUnsafe(e.signature||"")});if(!n)return n;if(!e.payload.prf)return!0;let o=br(e.payload.prf),a=o.payload.aud===e.payload.iss;return a&&await ou(o)}function su(e,t=0){let r=Z4(e,t);return r.prf?su(r.prf,t+1):r.iss}async function j2(e,t){let r=op(e),n=sp(t);return hi.makeUrlSafe(await xr.sign(`${r}.${n}`,8))}function X4(e){switch(e){case"ed25519":return"EdDSA";case"rsa":return"RS256";default:return null}}function Z4(e,t){try{return JSON.parse(hi.urlDecode(e.split(".")[1]))}catch{throw new Error(`Invalid UCAN (${t} level${t===1?"":"s"} deep): \`${e}\``)}}async function fs(e){let t=Me.endpoints.user;try{let r=await lf(`_did.${e}.${t}`);if(r!==null)return r}catch{}throw new Error("Could not locate user DID in DNS.")}async function h0(){let e=ss(),t=Object.values(e)[0];if(t!==void 0)return su(t);let r=await on();if(!Yt(r))throw new Error("No logged in user");return fs(r)}var cs={};dt(cs,{build:()=>pn,decode:()=>br,dictionary:()=>ki,encode:()=>dn,encodeHeader:()=>op,encodePayload:()=>sp,isExpired:()=>eo,isValid:()=>ou,rootIssuer:()=>su,sign:()=>j2});var ki={};dt(ki,{WNFS_PREFIX:()=>p0,compile:()=>d0,filesystemPrefix:()=>fp,lookup:()=>us,lookupAppUcan:()=>Q4,lookupFilesystemUcan:()=>eD,resourceLabel:()=>ap});var p0="wnfs";function d0(e){return e.reduce((t,r)=>{let n=br(r);if(eo(n))return t;let o=ap(n.payload.rsc);return{...t,[o]:r}},{})}function ap(e){if(typeof e!="object")return e;let t=Array.from(Object.entries(e))[0];return t[0]+":"+(t[0]===p0?t[1].replace(/^\/+/,""):t[1])}function fp(e){return p0+":"}function us(e){return ss()[e]}async function Q4(e){let t=ss();return t["*"]||t["app:*"]||t[`app:${e}`]}async function eD(e){let t=us("*");if(t)return t;let r=e==="*",n=r?!1:Cr(e),o=r?["*"]:Xt(e),a=await on(),f=a?fp(a):"";return o.reduce((u,h,d)=>{if(u)return u;let v=d===0,P=o.slice(0,o.length-d),I=fr(v&&!n?ym(...P):kr(...P));return us(`${f}${I}`)||null},null)}var q2="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";async function Ya(e){let t=await W2(e);if(!t||t.toString()===q2)return null;if(t!==null)return t;try{let r=await ma(e+".files."+Me.endpoints.user);return!r||r===q2?null:xe(r)}catch(r){throw console.error(r),new Error("Could not locate user root in dns")}}async function W2(e){let t=Me.getApiEndpoint();try{let n=await(await fetch(`${t}/user/data/${e}`,{cache:"reload"})).json();return xe(n)}catch(r){return kn("Could not locate user root on Fission server: ",so(r,"toString")?r.toString():r),null}}async function m0(e,t){let r=Me.getApiEndpoint(),n=e.toString();return kn("\u{1F30A} Updating your DNSLink:",n),await G2(`${r}/user/data/${n}`,{headers:async()=>({authorization:`Bearer ${dn(await pn({audience:await On.did(),issuer:await cr(),potency:"APPEND",proof:t,resource:br(t).payload.rsc}))}`}),retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PUT"}).then(o=>(o.status<300?kn("\u{1FAB4} DNSLink updated:",n):kn("\u{1F525} Failed to update DNSLink for:",n),{success:o.status<300})).catch(o=>(kn("\u{1F525} Failed to update DNSLink for:",n),console.error(o),{success:!1}))}async function G2(e,t,r,n=0){let o=await t.headers(),a=await fetch(e,{...r,headers:{...r.headers,...o}});if(t.retryOn.includes(a.status)){if(n<t.retries)return await new Promise((f,u)=>setTimeout(()=>G2(e,t,r,n+1).then(f,u),t.retryDelay));throw new Error("Too many retries for fetch")}return a}function up({counter:e,recipientExchangeDid:t,senderRootDid:r}){return jl(`${t}${r}${e}`)}function V2({entryIndexCid:e,symmKey:t,symmKeyAlgo:r}){let n=e;return{algo:r,key:typeof t=="string"?Jt(t,"base64pad"):t,cid:n}}async function J2({bareFilter:e,shareKey:t}){let r=await mi.sha256Str(t);return k2(await Pi(e,r))}var cp=kr("public",".well-known","exchange");async function X2(e,t,{shareWith:r,sharedBy:n}){let o=Array.isArray(r)?r:r.startsWith("did:")?[r]:await rD(r),a=e.sharedCounter||1,f=e.mmpt,u=await Promise.all(o.map(async ce=>[ce,await up({counter:a,recipientExchangeDid:ce,senderRootDid:n.rootDid})])),h=await Hr.genKeyStr(ar.AES_GCM),d=await zt.create(f,h,null);await Promise.all(t.map(async([ce,De])=>{let ge=await De.getName();return d.insertSoftLink({key:De.key,name:ce,privateName:ge,username:n.username})}));let v=ar.AES_GCM,P=Object.assign({},d.header),I=await sc(await Hr.encrypt(new TextEncoder().encode(JSON.stringify(P)),d.key,v));if(u.length){let ce=await J2({bareFilter:P.bareNameFilter,shareKey:u[0][1]});await f.add(ce,I.cid)}let R=Sa(V2({entryIndexCid:I.cid.toString(),symmKey:d.key,symmKeyAlgo:v})),ee=await Promise.all(u.map(async([ce,De])=>{let{publicKey:ge}=Va(ce),Oe=await ba.encrypt(R,ge),ae=await Wo(Oe);return{name:De,cid:ae.cid,size:ae.size}}));return await e.addShares(ee),{shareId:a.toString(),sharedBy:n}}async function rD(e){let t=await Ya(e);if(!t)throw new Error("This person doesn't have a filesystem yet.");let n=(await _t.getSimpleLinks(t))["p"]?.cid||null;if(!n)throw new Error("This person's filesystem doesn't have a pretty tree.");let o=await qa.fromCID(xe(n)),a=Xt(Aa(cp)),f=await o.get(a);return f&&f instanceof qa?Object.keys(f.getLinks()):[]}var y0={};dt(y0,{NoPermissionError:()=>fu});var fu=class extends Error{constructor(t){super(t),this.name="NoPermissionError"}};var uu=class{constructor({root:t,permissions:r,localOnly:n}){this.localOnly=n||!1,this.proofs={},this.publishHooks=[],this.root=t,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);let o=globalThis;o.filesystems=o.filesystems||[],o.filesystems.push(this),r&&r.app&&r.app.creator&&r.app.name&&(this.appPath=iD(r));let a=async u=>{await rp(u.toString()),kn("\u{1F4D3} Adding to the CID ledger:",u.toString())},f=hx(3e3,!1,(u,h)=>{if(globalThis.navigator.onLine)return this._publishing=[u,!0],m0(u,h).then(()=>{this._publishing&&this._publishing[0]===u&&(this._publishing=!1)});this._publishWhenOnline.push([u,h])},!1);this.publishHooks.push(a),this.publishHooks.push(f),this.localOnly||(globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving))}static async empty(t={}){let{permissions:r,localOnly:n}=t,o=t.rootKey||await Hr.genKeyStr(),a=await Eo.empty({rootKey:o});return new uu({root:a,permissions:r,localOnly:n})}static async fromCID(t,r={}){let{permissions:n,localOnly:o}=r,a=await Eo.fromCID({cid:t,permissions:n});return new uu({root:a,permissions:n,localOnly:o})}deactivate(){if(this.localOnly)return;let t=globalThis;t.filesystems=t.filesystems.filter(r=>r!==this),t.removeEventListener("online",this._whenOnline),t.removeEventListener("beforeunload",this._beforeLeaving)}async ls(t){if(Ho(t))throw new Error("`ls` only accepts directory paths");return this.runOnNode(t,!1,(r,n)=>{if(ur(r))throw new Error("Tried to `ls` a file");return r.ls(n)})}async mkdir(t,r={}){if(Ho(t))throw new Error("`mkdir` only accepts directory paths");return await this.runOnNode(t,!0,(n,o)=>{if(ur(n))throw new Error("Tried to `mkdir` a file");return n.mkdir(o)}),r.publish&&await this.publish(),this}async add(t,r,n={}){return await this.runOnNode(t,!0,async(o,a)=>{let f=ur(o),u=_r(r)||F_(r)||B_(r);if(u&&f)throw new Error("Can't add soft links to a file");if(!u&&Cr(t))throw new Error("`add` only accepts file paths when working with regular files");if(f&&!u)return o.updateContent(r);if(u){let h=Array.isArray(r)?r:nt(r)?Object.values(r):[r];return this.runOnChildTree(o,a,async d=>(h.forEach(v=>{(zt.instanceOf(d)||os.instanceOf(d))&&d.assignLink({name:v.name,link:v,skeleton:v})}),d))}else if(!f)return o.add(a,r)}),n.publish&&await this.publish(),this}async cat(t){if(Cr(t))throw new Error("`cat` only accepts file paths");return this.runOnNode(t,!1,async(r,n)=>ur(r)?r.content:r.cat(n))}async read(t){if(Cr(t))throw new Error("`read` only accepts file paths");return this.cat(t)}async write(t,r,n={}){if(Cr(t))throw new Error("`write` only accepts file paths");return this.add(t,r,n)}async exists(t){return this.runOnNode(t,!1,async(r,n)=>ur(r)?!0:r.exists(n))}async get(t){return this.runOnNode(t,!1,async(r,n)=>ur(r)?r:r.get(n))}async mv(t,r){let n=ql(t,r);if(!gm(t,r)){let o=Wl(t),a=Wl(r);throw new Error(`Can't move to a different kind of path, from is a ${o} and to is a ${a}`)}if(!n)throw new Error("`mv` is only supported on the same tree for now");if(await this.exists(r))throw new Error("Destination already exists");return await this.runOnNode(t,!0,(o,a)=>{if(ur(o))throw new Error("Tried to `mv` within a file");let[f,...u]=Xt(r);return o.mv(a,u)}),this}async rm(t){return await this.runOnNode(t,!0,(r,n)=>{if(ur(r))throw new Error("Cannot `rm` a file you've asked permission for");return r.rm(n)}),this}async symlink(t){let{at:r,referringTo:n,name:o}=t;if(r==null)throw new Error("Missing parameter `symlink.at`");if(Ho(r))throw new Error("`symlink.at` only accepts directory paths");let a=t.username||await on(),f=ql(r,n);if(!a)throw new Error("I need a username in order to use this method");if(!f)throw new Error("`link` is only supported on the same tree for now");if(!ki.lookupFilesystemUcan(kr("shared")))throw new Error("Not allowed to share private items");return await this.runOnNode(r,!0,async(h,d)=>{if(ur(h))throw new Error("Cannot add a soft link to a file");return this.runOnChildTree(h,d,async v=>{if(zt.instanceOf(v)){let P=await this.runOnNode(n,!1,async(I,R)=>{let ee=ur(I)?I:await I.get(R);if(zt.instanceOf(ee))return ee;if(Cn.instanceOf(ee))return ee;throw new Error("`symlink.referringTo` is not of the right type")});if(!P)throw new Error("Could not find the item the symlink is referring to");v.insertSoftLink({name:o,username:a,key:P.key,privateName:await P.getName()})}else os.instanceOf(v)&&v.insertSoftLink({path:Aa(n),name:o,username:a});return v})}),this}async publish(){let t=Array.from(Object.entries(this.proofs));this.proofs={};let r=await this.root.put();return t.forEach(([n,o])=>{this.publishHooks.forEach(a=>a(r,o))}),r}async acceptShare({shareId:t,sharedBy:r}){let n=await this.loadShare({shareId:t,sharedBy:r});return await this.add(kr("private","Shared with me",r),await n.ls([])),this}async loadShare({shareId:t,sharedBy:r}){let n=await as(),o=await fs(r),a=await up({counter:parseInt(t,10),recipientExchangeDid:n,senderRootDid:o}),f=await Ya(r);if(!f)throw new Error("This user doesn't have a filesystem yet.");let u=await _t.getSimpleLinks(f),h=u["shared"]?.cid||null;if(!h)throw new Error("This user hasn't shared anything yet.");let d=await Eo.getSharedLinks(xe(h)),v=nt(d)?d[a]:null;if(!v)throw new Error("Couldn't find a matching share.");let P=nt(v)?v.cid:null;if(!P)throw new Error("Couldn't find a matching share.");let I=await _o(xe(P)),ee=await(await Un()).exchangeKey();if(!ee.privateKey)throw new Error("Missing private key in exchange key-pair");let ce=await ba.decrypt(I,ee.privateKey),De=zs(new Uint8Array(ce));if(!so(De,"cid"))throw new Error("Share payload is missing the `cid` property");if(!so(De,"key"))throw new Error("Share payload is missing the `key` property");if(!so(De,"algo"))throw new Error("Share payload is missing the `algo` property");let ge=De.cid,Oe=sr(De.key,"base64pad"),ae=De.algo;if(!u["private"]?.cid)throw new Error("This user's filesystem doesn't have a private branch");let He=await qr.fromCID(xe(u["private"]?.cid)),ne=await _o(xe(ge)),we=await Hr.decrypt(ne,Oe,ae),be=JSON.parse(sr(we,"utf8"));if(!Ph(be))throw new Error("The share payload did not point to a valid entry index");return await zt.fromInfo(He,Oe,be)}async sharePrivate(t,{sharedBy:r,shareWith:n}){let o=t.filter(u=>po("private",u));if(!r){let u=await on();if(!u)throw new Error("I need a username in order to use this method");r={rootDid:await h0(),username:u}}let a=await o.reduce(async(u,h)=>{let d=await u,v=xm(h),P=await this.get(h);return v&&(Cn.instanceOf(P)||zt.instanceOf(P))?[...d,[v,P]]:d},Promise.resolve([]));if(!a.length)throw new Error("Didn't find any items to share");let f=await X2(this.root,a,{shareWith:n,sharedBy:r});return await this.root.bumpSharedCounter(),await this.root.updatePuttable("private",this.root.mmpt),await this.publish(),f}async addPublicExchangeKey(){let t=await as();await this.mkdir(Ms(cp,kr(t)))}async hasPublicExchangeKey(){let t=await as();return this.exists(Ms(cp,kr(t)))}resolveSymlink(t){return so(t,"privateName")?zt.resolveSoftLink(t):os.resolveSoftLink(t)}async runOnNode(t,r,n){let o=Xt(t),a=o[0],f=o.slice(1),u=r?"make changes to":"query";if(!this.localOnly){let v=await ki.lookupFilesystemUcan(t),P=v&&br(v);if(!v||!P||eo(P)||!P.signature)throw new fu(`I don't have the necessary permissions to ${u} the file system at "${fr(t)}"`);this.proofs[P.signature]=v}let h,d;if(a==="public")h=await n(this.root.publicTree,f),r&&os.instanceOf(h)&&(d=await n(this.root.prettyTree,f),this.root.publicTree=h,this.root.prettyTree=d,await Promise.all([this.root.updatePuttable("public",this.root.publicTree),this.root.updatePuttable("p",this.root.prettyTree)]));else if(a==="private"){let[v,P]=this.root.findPrivateNode(t);if(!P)throw new fu(`I don't have the necessary permissions to ${u} the file system at "${fr(t)}"`);if(h=await n(P,o.slice(Xt(v).length)),r&&(zt.instanceOf(h)||Cn.instanceOf(h))){this.root.privateNodes[fr(v)]=h,await h.put(),await this.root.updatePuttable("private",this.root.mmpt);let I=await this.root.mmpt.put();await this.root.addPrivateLogEntry(I)}}else{if(a==="p"&&r)throw new Error("The pretty path is read only");if(a==="p")h=await n(this.root.prettyTree,f);else throw new Error("Not a valid FileSystem path")}return h}async runOnChildTree(t,r,n){let o=t;if(r.length){await o.exists(r)||await o.mkdir(r);let a=await o.get(r);if(_h(a))o=a;else throw new Error("Path does not point to a directory")}return o=await n(o),r.length?await t.updateChild(o,r):t}_whenOnline(){let t=[...this._publishWhenOnline];this._publishWhenOnline=[],t.forEach(([r,n])=>{this.publishHooks.forEach(o=>o(r,n))})}_beforeLeaving(t){let r="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(t||globalThis.event).returnValue=r,r}},Z2=uu;function iD(e){if(!e.app)throw Error("Only works with app permissions");let t=Wu(e.app);return r=>r?Ms(t,r):t}var Cc=Z2;async function kc(e){let r=(await Rn(vf)||[]).concat(e);U2(d0(r));let n=oD();await Ki(vf,n)}function lp({app:e,fs:t,raw:r},n){let o=fp(n),a=us("*");if(a&&!eo(br(a)))return!0;if(e){let f=o+fr(Wu(e)),u=us(f);if(!u||eo(br(u)))return!1}return!(t?.private&&!t.private.every(u=>{let h=`${o}private/`+fr(u),d=us(h);return d&&!eo(br(d))})||t?.public&&!t.public.every(u=>{let h=`${o}public/`+fr(u),d=us(h);return d&&!eo(br(d))})||r&&!r.every(u=>{let h=ap(u.rsc),d=us(h);return d&&!eo(br(d))}))}function oD(){return Object.values(ss())}async function Ic(e,t,r){let n,o;if(t=t||await on()||void 0,!t)throw new Error("User hasn't authenticated yet");await kc([]);let a=navigator.onLine?await Ya(t):null,[f,u]=a?await N2(a.toString()):[-1,0];if(!navigator.onLine)n=xe(await Zs());else if(!a)n=xe(await Zs()),n?kn("\u{1F4D3} No DNSLink, using local CID:",n.toString()):kn("\u{1F4D3} Creating a new file system");else if(f===0)n=a,kn("\u{1F4D3} DNSLink is up to date:",n.toString());else if(f>0){n=xe(await Zs());let d=f===1?"1 newer local entry":f+" newer local entries";kn("\u{1F4D3} DNSLink is outdated ("+d+"), using local CID:",n.toString())}else n=a,await rp(n.toString()),kn("\u{1F4D3} DNSLink is newer:",n.toString());let h=e||void 0;if(n!=null&&(await Q2(n),o=await Cc.fromCID(n,{permissions:h}),o!=null))return o;if(!r)throw new Error("Can't make new filesystem without a root AES key");return o=await Cc.empty({permissions:h,rootKey:r}),await sD(o),o}async function Q2(e){let t=await _t.getSimpleLinks(e),r=t["version"]==null?"1.0.0":new TextDecoder().decode(await _t.getFile(xe(t["version"].cid)));if(r!==Xf(Zr)){let n=Zh(r),o=Me.userMessages;throw n==null||L2(Zr,n)?(await o.versionMismatch.newer(r),new Error(`Incompatible filesystem version. Version: ${r} Supported: ${Xf(Zr)} Please upgrade this app's webnative version.`)):(await o.versionMismatch.older(r),new Error(`Incompatible filesystem version. Version: ${r} Supported: (${Xf(Zr)} The user should migrate their filesystem.`))}}async function sD(e){await e.mkdir({directory:["private","Apps"]}),await e.mkdir({directory:["private","Audio"]}),await e.mkdir({directory:["private","Documents"]}),await e.mkdir({directory:["private","Photos"]}),await e.mkdir({directory:["private","Video"]}),await e.publish()}var e6=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];async function w0(e){let t=Me.getApiEndpoint();return!(await fetch(`${t}/user/data/${e}`)).ok}function v0(e){return!e.startsWith("-")&&!e.endsWith("-")&&!e.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(e)&&!e6.includes(e.toLowerCase())}var lr=class extends Error{constructor(t){super(t),this.name="LinkingError"}},Ii=class extends Error{constructor(t){super(t),this.name="LinkingWarning"}},In=e=>{switch(e.name){case"LinkingWarning":R2(e.message);break;case"LinkingError":throw e;default:throw e}},cu=(e,t,r)=>{try{let n=JSON.parse(e);return t(n)?{ok:!0,value:n}:{ok:!1,error:new Ii(`${r.participant} received an unexpected message in ${r.callSite}: ${e}. Ignoring message.`)}}catch{return{ok:!1,error:new Ii(`${r.participant} received a message in ${r.callSite} that it could not parse: ${e}. Ignoring message.`)}}};var t6=async e=>{let{username:t,handleMessage:r}=e,n=await fD(t);if(!n)throw new lr(`Failed to lookup DID for ${t}`);let a=Me.getApiEndpoint().replace(/^https?:\/\//,"wss://"),f=`deviceLink#${n}`;console.log("Opening channel",f);let u=new WebSocket(`${a}/user/link/${n}`);await uD(u),u.onmessage=r;let h=lD(u),d=cD(u);return{send:h,close:d}},fD=async e=>{let t=await fs(e);return t||new Promise(r=>{let o=0,a=setInterval(async()=>{if(console.log("Could not fetch root DID. Retrying"),t=await fs(e).catch(f=>{throw clearInterval(a),f}),!t&&o<3){o++;return}clearInterval(a),r(t)},2e3)})},uD=async e=>new Promise((t,r)=>{e.onopen=()=>{t()},e.onerror=()=>{r("Websocket channel could not be opened")}}),cD=e=>function(){e&&e.close(1e3)},lD=e=>function(t){let r=typeof t=="string"?new TextEncoder().encode(t).buffer:t;e?.send(r)};var x0=async e=>{let t=e.permissions||null,{autoRemoveUrlParams:r=!0,rootKey:n}=e,o=async h=>e.loadFileSystem===!1?void 0:await Ic(t,h,n),a=new URL(window.location.href),f=a.searchParams.get("authorised"),u=a.searchParams.get("cancelled");if(f){let h=a.searchParams.get("newUser")==="t",d=a.searchParams.get("username")||"";return await dD(async()=>yD(f==="via-postmessage"?await gD():JSON.parse(await ic(xe(f)))),{tries:10,timeout:1e4,timeoutMessage:"Trying to retrieve UCAN(s) and readKey(s) from the auth lobby timed out after 10 seconds."}),await Ki(Cs,d),r&&(a.searchParams.delete("authorised"),a.searchParams.delete("newUser"),a.searchParams.delete("username"),history.replaceState(null,document.title,a.toString())),t&&await Yl(t)===!1?(console.warn("Unable to validate filesystem secrets"),Af(t)):t&&lp(t,d)===!1?(console.warn("Unable to validate UCAN permissions"),Af(t)):nv(t,h,d,await o(d))}else if(u){let h=(()=>{switch(u){case"DENIED":return"User denied authorisation";default:return"Unknown reason"}})();return iv(t,h)}else await kc([]);return null},r6=async e=>new Promise(t=>t({success:!1})),n6=async e=>v0(e),i6=async e=>w0(e),o6=e=>t6(e),s6=async e=>{if(!await Rn("readKey"))return!1;let r=await fs(e),n=await Rn("ucan");if(n){let o=su(n),a=br(n),{ptc:f}=a.payload;return r===o&&f==="SUPER_USER"}else{let o=await cr();return r===o}},a6=async(e,t)=>{let r=await Rn("readKey"),n=await Rn("ucan"),o=await pn({audience:t,issuer:await cr(),lifetimeInSeconds:60*60*24*30*12*1e3,potency:"SUPER_USER",proof:n});return{readKey:r,ucan:dn(o)}};function pD(e){return nt(e)&&"readKey"in e&&typeof e.readKey=="string"&&"ucan"in e&&typeof e.ucan=="string"}var f6=async e=>{if(!pD(e))throw new lr(`Consumer received invalid link device response from producer: Expected read key and ucan, but got ${JSON.stringify(e)}`);let{readKey:t,ucan:r}=e,n=br(r);if(await ou(n))await Ki("ucan",r),await Ki("readKey",t);else throw new lr(`Consumer received invalid link device response from producer. Given ucan is invalid: ${e.ucan}`)},u6={init:x0,register:r6,isUsernameValid:n6,isUsernameAvailable:i6,createChannel:o6,checkCapability:s6,delegateAccount:a6,linkDevice:f6};async function dD(e,t){return await Promise.race([(async()=>{let r=1;for(;r<=t.tries;){try{await e();return}catch(n){if(r==t.tries)throw n}r++}})(),new Promise((r,n)=>setTimeout(()=>n(new Error(t.timeoutMessage)),t.timeout))])}function mD(e){return nt(e)&&Yt(e.sessionKey)&&Yt(e.secrets)&&Yt(e.iv)}async function yD(e){let t=await xr.decrypt(e.sessionKey),r=await Hr.decryptGCM(e.secrets,t,e.iv),n=JSON.parse(r),o=n.fs,a=n.ucans;await Promise.all(Object.entries(o).map(async([f,{bareNameFilter:u,key:h}])=>{let d=qu(f),v=await Os({path:d}),P=await Gl({path:d});await xr.importSymmKey(h,v),await Ki(P,u)})),await kc(a)}async function gD(){let e=await new Promise(t=>{let r=document.createElement("iframe");r.id="webnative-secret-exchange",r.style.width="0",r.style.height="0",r.style.border="none",r.style.display="none",document.body.appendChild(r),r.onload=()=>{t(r)},r.src=`${Me.endpoints.lobby}/exchange.html`});try{let t=new Promise((n,o)=>{let a=10;window.addEventListener("message",u);function f(h){console.warn(`When importing UCANs & readKey(s): Can't parse: ${h}. Might be due to extensions.`),--a===0&&(window.removeEventListener("message",u),o(new Error("Couldn't parse message from auth lobby after 10 tries. See warnings above.")))}function u(h){if(new URL(h.origin).host!==new URL(Me.endpoints.lobby).host){console.log(`Got a message from ${h.origin} while waiting for login credentials. Ignoring.`);return}if(h.data==null)return;let d=null;try{d=JSON.parse(h.data)}catch{f(h.data);return}if(!mD(d)){f(h.data);return}window.removeEventListener("message",u),n(d)}});if(e.contentWindow==null)throw new Error("Can't import UCANs & readKey(s): No access to its contentWindow");let r={webnative:"exchange-secrets",didExchange:await as()};return e.contentWindow.postMessage(r,e.src),await t}finally{document.body.removeChild(e)}}var c6=e=>x0(e);var hp=(r=>(r.InsecureContext="INSECURE_CONTEXT",r.UnsupportedBrowser="UNSUPPORTED_BROWSER",r))(hp||{});async function xD(){return on()}async function _D({withoutRedirect:e}={}){await wf(Cs),await z2(),await M2(),await xr.clear(),(globalThis.filesystems||[]).forEach(t=>t.deactivate()),!e&&globalThis.location&&(globalThis.location.href=Me.endpoints.lobby)}async function bD(e,t,r){let n=e?.app,o=e?.fs,a=e?.platform,f=e?.raw,u=e?.sharing,h=await as(),d=await cr(),v=!!document.body.querySelector("iframe#webnative-ipfs")&&typeof SharedWorker=="function";t=t||window.location.href;let P=[["didExchange",h],["didWrite",d],["redirectTo",t],["sdk",Cl.toString()],["sharedRepo",v?"t":"f"],["sharing",u?"t":"f"]].concat(n?[["appFolder",`${n.creator}/${n.name}`]]:[],o?.private?o.private.map(I=>["privatePath",fr(I,{absolute:!0})]):[],o?.public?o.public.map(I=>["publicPath",fr(I,{absolute:!0})]):[],f?[["raw",qd(JSON.stringify(f))]]:[],r?Object.entries(r):[]).concat((()=>{let I=a?.apps;switch(typeof I){case"string":return[["app",I]];case"object":return I.map(R=>["app",R]);default:return[]}})());window.location.href=Me.endpoints.lobby+"?"+P.map(([I,R])=>encodeURIComponent(I)+"="+encodeURIComponent(R)).join("&")}var _0={};dt(_0,{createConsumer:()=>p6,createProducer:()=>h6,isUsernameAvailable:()=>ND,isUsernameValid:()=>LD,register:()=>DD});var Zn=u6;function l6(e){Zn={...Zn,...e}}var lu=class{constructor(){this.events=new Map}on(t,r){let n=this.events.get(t);n===void 0?this.events.set(t,new Set([r])):n.add(r)}removeListener(t,r){let n=this.events.get(t);n!==void 0&&(n.delete(r),n.size===0&&this.events.delete(t))}emit(t,r){this.events.get(t)?.forEach(n=>{n.apply(this,[r])})}};var h6=async e=>{let{username:t}=e;if(!await Zn.checkCapability(t))throw new lr(`Producer cannot delegate for username ${t}`);let n=new lu,o={username:t,sessionKey:null,step:"BROADCAST"},a=async v=>{let{data:P}=v,I=P.arrayBuffer?new TextDecoder().decode(await P.arrayBuffer()):P;if(o.step==="BROADCAST"){let{sessionKey:R,sessionKeyMessage:ee}=await SD(I);o.sessionKey=R,o.step="NEGOTIATION",d.send(ee)}else if(o.step==="NEGOTIATION")if(o.sessionKey){let R=await PD(o.sessionKey,I);if(o.step="DELEGATION",R.ok){let{pin:ee,audience:ce}=R.value,De=()=>{let ae=!1;return{confirmPin:async()=>{ae||(ae=!0,o.sessionKey?await CD(o.sessionKey,t,ce,f):In(new lr("Producer missing session key when delegating account")))},rejectPin:async()=>{ae||(ae=!0,o.sessionKey?await kD(o.sessionKey,f):In(new lr("Producer missing session key when declining account delegation")))}}},{confirmPin:ge,rejectPin:Oe}=De();n?.emit("challenge",{pin:ee,confirmPin:ge,rejectPin:Oe})}else In(R.error)}else In(new lr("Producer missing session key when handling user challenge"));else o.step==="DELEGATION"&&In(new Ii("Producer received an unexpected message while delegating an account. The message will be ignored."))},f=async(v,P)=>{await d.send(v),o.username!=null&&(n?.emit("link",{approved:P,username:o.username}),u())},u=()=>{o.sessionKey=null,o.step="BROADCAST"},h=async()=>{n?.emit("done",void 0),n=null,d.close()},d=await Zn.createChannel({username:t,handleMessage:a});return{on:(...v)=>n?.on(...v),cancel:h}},SD=async e=>{let t=await _n.makeKey({alg:ar.AES_GCM,length:256}),r=await _n.exportKey(t),{publicKey:n}=Va(e),o=await ho.importPublicKey(n,wa.SHA_256,Pt.Exchange),a=Fe.arrBufToStr(Fe.base64ToArrBuf(r),uo.B16),f=await ho.encrypt(a,o),u=await pn({issuer:await cr(),audience:e,lifetimeInSeconds:60*5,facts:[{sessionKey:r}],potency:null}),h=Fe.randomBuf(16),d=Fe.arrBufToBase64(await ct.subtle.encrypt({name:"AES-GCM",iv:h},t,Jt(dn(u),"utf8"))),v=JSON.stringify({iv:Fe.arrBufToBase64(h),msg:d,sessionKey:Fe.arrBufToBase64(f)});return{sessionKey:t,sessionKeyMessage:v}},PD=async(e,t)=>{let n=cu(t,o=>nt(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string",{participant:"Producer",callSite:"handleUserChallenge"});if(n.ok){let{iv:o,msg:a}=n.value,f=Fe.base64ToArrBuf(o),u=null;try{u=sr(await ct.subtle.decrypt({name:"AES-GCM",iv:f},e,Fe.base64ToArrBuf(a)),"utf8")}catch{return{ok:!1,error:new Ii("Ignoring message that could not be decrypted.")}}let h=JSON.parse(u),d=h.pin??null,v=h.did??null;return d!==null&&v!==null?{ok:!0,value:{pin:d,audience:v}}:{ok:!1,error:new lr(`Producer received invalid pin ${h.pin} or audience ${h.audience}`)}}else return n},CD=async(e,t,r,n)=>{let o=await Zn.delegateAccount(t,r),a=JSON.stringify(o),f=Fe.randomBuf(16),u=Fe.arrBufToBase64(await ct.subtle.encrypt({name:"AES-GCM",iv:f},e,Jt(a,"utf8"))),h=JSON.stringify({iv:Fe.arrBufToBase64(f),msg:u});await n(h,!0)},kD=async(e,t)=>{let r=JSON.stringify({linkStatus:"DENIED"}),n=Fe.randomBuf(16),o=Fe.arrBufToBase64(await ct.subtle.encrypt({name:"AES-GCM",iv:n},e,Jt(r,"utf8"))),a=JSON.stringify({iv:Fe.arrBufToBase64(n),msg:o});await t(a,!1)};var p6=async e=>{let{username:t}=e,r=new lu,n={username:t,sessionKey:null,temporaryRsaPair:null,step:"BROADCAST"},o=async h=>{let{data:d}=h,v=d.arrayBuffer?new TextDecoder().decode(await d.arrayBuffer()):d;if(n.step==="BROADCAST")In(new Ii("Consumer is not ready to start linking"));else if(n.step==="NEGOTIATION")if(n.sessionKey)In(new Ii("Consumer already received a session key"));else if(!n.temporaryRsaPair||!n.temporaryRsaPair.privateKey)In(new lr("Consumer missing RSA key pair when handling session key message"));else{let P=await TD(n.temporaryRsaPair.privateKey,v);if(P.ok){n.sessionKey=P.value;let{pin:I,challenge:R}=await FD(n.sessionKey);f.send(R),r?.emit("challenge",{pin:Array.from(I)}),n.step="DELEGATION"}else In(P.error)}else if(n.step==="DELEGATION")if(!n.sessionKey)In(new lr("Consumer was missing session key when linking device"));else if(!n.username)In(new lr("Consumer was missing username when linking device"));else{let P=await BD(n.sessionKey,n.username,v);if(P.ok){let{approved:I}=P.value;r?.emit("link",{approved:I,username:n.username}),await a()}else In(P.error)}},a=async()=>{r?.emit("done",void 0),r=null,f.close(),clearInterval(u)},f=await Zn.createChannel({username:t,handleMessage:o}),u=setInterval(async()=>{if(n.sessionKey)clearInterval(u);else{let{temporaryRsaPair:h,temporaryDID:d}=await ID();n.temporaryRsaPair=h,n.step="NEGOTIATION",await f.send(d)}},2e3);return{on:(...h)=>r?.on(...h),cancel:a}},ID=async()=>{let e=Ut.normalize(),{rsaSize:t,hashAlg:r}=e,n=await ho.makeKeypair(t,r,Pt.Exchange),o=await ho.getPublicKey(n),a=iu(o,"rsa");return{temporaryRsaPair:n,temporaryDID:a}},TD=async(e,t)=>{let n=cu(t,o=>nt(o)&&"iv"in o&&typeof o.iv=="string"&&"msg"in o&&typeof o.msg=="string"&&"sessionKey"in o&&typeof o.sessionKey=="string",{participant:"Consumer",callSite:"handleSessionKey"});if(n.ok){let{iv:o,msg:a,sessionKey:f}=n.value,u=Fe.base64ToArrBuf(o),h,d;try{let ee=Fe.base64ToArrBuf(f);d=await ho.decrypt(ee,e),h=await _n.importKey(Fe.arrBufToBase64(d),{alg:ar.AES_GCM,length:256})}catch{return{ok:!1,error:new Ii(`Consumer received a session key in handleSessionKey that it could not decrypt: ${t}. Ignoring message`)}}let v=null;try{v=sr(await ct.subtle.decrypt({name:"AES-GCM",iv:u},h,Fe.base64ToArrBuf(a)),"utf8")}catch{return{ok:!1,error:new lr("Consumer could not decrypt closed UCAN with provided session key.")}}let P=br(v);if(await ou(P)===!1)return{ok:!1,error:new lr("Consumer received an invalid closed UCAN")};if(P.payload.ptc)return{ok:!1,error:new lr("Consumer received a closed UCAN with potency. Closed UCAN must not have potency.")};let I=P.payload.fct[0]&&P.payload.fct[0].sessionKey;if(!I)return{ok:!1,error:new lr("Consumer received a closed UCAN that was missing a session key in facts.")};let R=Fe.arrBufToBase64(d);return I!==R?{ok:!1,error:new lr("Consumer received a closed UCAN session key does not match the session key")}:{ok:!0,value:h}}else return n},FD=async e=>{let t=Array.from(new Uint8Array(Fe.randomBuf(6,{max:9}))),r=Fe.randomBuf(16),n=Fe.arrBufToBase64(await ct.subtle.encrypt({name:"AES-GCM",iv:r},e,Jt(JSON.stringify({did:await cr(),pin:t}),"utf8"))),o=JSON.stringify({iv:Fe.arrBufToBase64(r),msg:n});return{pin:t,challenge:o}},BD=async(e,t,r)=>{let o=cu(r,a=>nt(a)&&"iv"in a&&typeof a.iv=="string"&&"msg"in a&&typeof a.msg=="string",{participant:"Consumer",callSite:"linkDevice"});if(o.ok){let{iv:a,msg:f}=o.value,u=Fe.base64ToArrBuf(a),h=null;try{h=sr(await ct.subtle.decrypt({name:"AES-GCM",iv:u},e,Fe.base64ToArrBuf(f)),"utf8")}catch{return{ok:!1,error:new Ii("Consumer ignoring message that could not be decrypted in linkDevice.")}}let d=cu(h,nt,{participant:"Consumer",callSite:"linkDevice"});return d.ok?d.value.linkStatus==="DENIED"?{ok:!0,value:{approved:!1}}:(await Ki(Cs,t),await Zn.linkDevice(d.value),{ok:!0,value:{approved:!0}}):d}else return o};var DD=async e=>Zn.register(e),LD=async e=>Zn.isUsernameValid(e),ND=async e=>Zn.isUsernameAvailable(e);var b0={};dt(b0,{create:()=>OD,deleteByDomain:()=>RD,index:()=>MD,publish:()=>UD});async function MD(){let e=Me.getApiEndpoint(),t=await ki.lookupAppUcan("*");if(t===null)throw"Could not find your local UCAN";let r=dn(await pn({audience:await On.did(),issuer:await cr(),proof:t,potency:null})),o=await(await fetch(`${e}/app`,{method:"GET",headers:{authorization:`Bearer ${r}`}})).json();return Object.values(o).filter(a=>a.urls.length>0).map(({urls:a,insertedAt:f,modifiedAt:u})=>({domains:a,insertedAt:f,modifiedAt:u}))}async function OD(e){let t=Me.getApiEndpoint(),r=await ki.lookupAppUcan("*");if(r===null)throw"Could not find your local UCAN";let n=dn(await pn({audience:await On.did(),issuer:await cr(),proof:r,potency:null})),o=Yt(e)?`${t}/app?subdomain=${encodeURIComponent(e)}`:`${t}/app`,f=await(await fetch(o,{method:"POST",headers:{authorization:`Bearer ${n}`}})).json(),u=new Date().toISOString();return{domains:[f],insertedAt:u,modifiedAt:u}}async function RD(e){let t=Me.getApiEndpoint(),r=await ki.lookupAppUcan(e);if(r===null)throw new Error("Could not find your local UCAN");let n=dn(await pn({audience:await On.did(),issuer:await cr(),proof:r,potency:null})),a=await(await fetch(`${t}/app`,{method:"GET",headers:{authorization:`Bearer ${n}`}})).json(),f=Object.entries(a).find(([u,h])=>h.urls.includes(e));if(f==null)throw new Error(`Couldn't find an app with domain ${e}`);await fetch(`${t}/app/${encodeURIComponent(f[0])}`,{method:"DELETE",headers:{authorization:`Bearer ${n}`}})}async function UD(e,t){let r=Me.getApiEndpoint(),n=await ki.lookupAppUcan(e);if(n===null)throw"Could not find your local UCAN";let o=dn(await pn({audience:await On.did(),issuer:await cr(),proof:n,potency:null})),a=`${r}/app/${e}/${t}`;await fetch(a,{method:"PUT",headers:{authorization:`Bearer ${o}`}})}var A0={};dt(A0,{createAccount:()=>zD,isUsernameAvailable:()=>w0,isUsernameValid:()=>v0,resendVerificationEmail:()=>KD,shareLink:()=>HD,storeFileSystemRootKey:()=>$D});async function zD(e){let t=Me.getApiEndpoint(),r=dn(await pn({audience:await On.did(),issuer:await cr()}));return{success:(await fetch(`${t}/user`,{method:"PUT",headers:{authorization:`Bearer ${r}`,"content-type":"application/json"},body:JSON.stringify(e)})).status<300}}async function KD(){let e=Me.getApiEndpoint(),t=Object.values(ss())[0];if(t===null)throw"Could not find your local UCAN";let r=dn(await pn({audience:await On.did(),issuer:await cr(),proof:t,potency:null}));return{success:(await fetch(`${e}/user/email/resend`,{method:"POST",headers:{authorization:`Bearer ${r}`}})).status<300}}function HD(e){return Me.endpoints.lobby+"/#/share/"+encodeURIComponent(e.sharedBy.username)+"/"+encodeURIComponent(e.shareId)+"/"}function $D(e){return Eo.storeRootKey(e)}var E0={};dt(E0,{debug:()=>jD,endpoints:()=>WD,setImplementations:()=>GD,shouldPin:()=>qD,userMessages:()=>VD});function jD({enabled:e}){return Me.debug=e,Me.debug}function qD({enabled:e}){return Me.shouldPin=e,Me.shouldPin}function WD(e){return Me.endpoints={...Me.endpoints,...e},{...Me.endpoints}}function GD(e){e.auth&&l6(e.auth),e.crypto&&Z1(e.crypto),e.storage&&c1(e.storage)}function VD(e){return Me.userMessages={...Me.userMessages,...e},{...Me.userMessages}}async function YD(e){e=e||{};let t=e.permissions||null,{rootKey:r}=e,n=async f=>e.loadFileSystem===!1?void 0:await Ic(t,f,r);if(globalThis.isSecureContext===!1)throw"INSECURE_CONTEXT";if(await d6()===!1)throw"UNSUPPORTED_BROWSER";let o=await c6(e);if(o)return o;let a=await on();if(a&&t){let f=await Yl(t),u=lp(t,a);return f&&u?Em(t,a,await n(a)):Af(t)}else return a?Em(t,a,await n(a)):Af(t)}async function d6(){return S0.default.supports(S0.default.INDEXEDDB)&&await(()=>new Promise(e=>{let t=indexedDB.open("testDatabase");t.onsuccess=()=>e(!0),t.onerror=()=>e(!1)}))()}var JD=Cc;return hC(XD);})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
return webnative;
}));
