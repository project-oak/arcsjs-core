<!doctype html>
<script type="module">
  import {graph} from './graph.js';
  export const Graph = {
    nodes: {
      Data: {
        type: 'DataNode',
        props: {
          data: [
            {first: "Don", last: "Quixote"},
            {first: "Sancho", last: "Panza"}
          ]
        }
      },
      JSONata: {
        type: 'JSONataNode',
        connections: {
          json: ['Data:data']
        },
        props: {
          expression: 'first'
        }
      }
    }
  };
  const user = await graph(Graph);
  const resultStore = user.stores['JSONata:result'];
  resultStore.listen('change', () => console.log(resultStore?.pretty));
</script>