var W=Object.defineProperty;var ut=(r,t,e)=>t in r?W(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var _=(r,t)=>{for(var e in t)W(r,e,{get:t[e],enumerable:!0})};var P=(r,t,e)=>(ut(r,typeof t!="symbol"?t+"":t,e),e);var l=class{listeners={};getEventListeners(t){return this.listeners[t]||(this.listeners[t]=[])}fire(t,...e){let s=this.getEventListeners(t);s?.forEach&&s.forEach(o=>o(...e))}listen(t,e,s){return this.getEventListeners(t).push(e),e._name=s||"(unnamed listener)",e}unlisten(t,e){let s=this.getEventListeners(t),o=typeof e=="string"?s.findIndex(i=>i._name===e):s.indexOf(e);o>=0?s.splice(o,1):console.warn("failed to unlisten from",t)}};var J=["log","group","groupCollapsed","groupEnd","dir"],V=["warn","error"];var{fromEntries:G}=Object,Q=(r,t,e,s,o="log")=>{if(typeof r=="string"&&(r=a.flags[r]),!r)return()=>{};if(o==="dir")return console.dir.bind(console);let i=`background: ${e||"gray"}; color: ${s||"white"}; padding: 1px 6px 2px 7px; border-radius: 6px 0 0 6px;`;return console[o].bind(console,`%c${t}`,i)},a=(r,t,e="",s="")=>{let o=G(J.map(p=>[p,Q(r,t,e,s,p)])),i=G(V.map(p=>[p,Q(!0,t,e,s,p)])),n={...o,...i},c=n.log;return Object.assign(c,n),c};a.flags=globalThis.config?.logFlags||{};var ft=r=>a(a.flags.arc,`Arc (${r})`,"slateblue"),{assign:dt,keys:C,entries:X,create:mt}=Object,v=r=>Object.values(r),j=()=>mt(null),b=class extends l{log;id;meta;stores;hosts;surface;composer;hostService;constructor(t,e,s){super(),this.id=t,this.meta=e,this.surface=s,this.hosts=j(),this.stores=j(),this.log=ft(t)}async addHost(t,e){return await this.ensureComposer(),this.hosts[t.id]=t,t.arc=this,this.updateHost(t),t}async ensureComposer(){!this.composer&&this.surface&&(this.composer=await this.surface.createComposer("root"),this.composer.onevent=this.onevent.bind(this))}rerender(){v(this.hosts).forEach(t=>t.rerender())}removeHost(t){this.hosts[t]?.detach(),delete this.hosts[t]}addStore(t,e){e&&!this.stores[t]&&(this.stores[t]=e,e.listen("change",()=>this.storeChanged(t,e),this.id))}removeStore(t){let e=this.stores[t];e&&e.unlisten("change",this.id),delete this.stores[t]}storeChanged(t,e){this.log(`storeChanged: "${t}"`);let s=o=>o&&o.some(i=>v(i)[0]==t||C(i)[0]==t);v(this.hosts).forEach(o=>{let i=o.meta?.inputs;(i==="*"||s(i))&&(this.log(`host "${o.id}" has interest in "${t}"`),this.updateHost(o))}),this.fire("store-changed",t)}updateParticleMeta(t,e){let s=this.hosts[t];s.meta=e,this.updateHost(s)}updateHost(t){t.inputs=this.computeInputs(t)}computeInputs(t){let e=j(),s=t.meta?.inputs;if(s==="*")X(this.stores).forEach(([o,i])=>e[o]=i.pojo);else{let o=t.meta?.staticInputs;dt(e,o),s&&(s.forEach(i=>this.computeInput(X(i)[0],e)),this.log(`computeInputs(${t.id}) =`,e))}return e}computeInput([t,e],s){let o=e||t,i=this.stores[o];i&&(s[t]=i.pojo)}assignOutputs({id:t,meta:e},s){let o=C(s);e?.outputs&&o.length&&(o.forEach(i=>this.assignOutput(i,s[i],e.outputs)),this.log(`[end][${t}] assignOutputs:`,s))}assignOutput(t,e,s){if(e!==void 0){let o=this.findOutputByName(s,t)||t,i=this.stores[o];i?(this.log(`assignOutputs: "${t}" is dirty, updating Store "${o}"`,e),i.data=e):s?.[t]&&this.log.warn(`assignOutputs: no "${o}" store for output "${t}"`)}}findOutputByName(t,e){let s=t?.find(o=>C(o||0)[0]===e);if(s)return v(s)[0]}async render(t){this.composer&&this.composer.render(t)}onevent(t,e){let s=this.hosts[t];s&&s.handleEvent(e)}async service(t,e){let s=await this.surface?.service(e);return s===void 0&&(s=this.hostService?.(t,e)),s}};var gt=(r,t)=>{let e=t;if(t){if(Array.isArray(t)){Array.isArray(r)||(r=[]);for(let o=0;o<t.length;o++){let i=t[o];r[o]!==i&&(r[o]=i)}let s=r.length-t.length;s>0&&r.splice(t.length,s)}else if(typeof t=="object"){e=r&&typeof r=="object"?r:Object.create(null);let s={};Object.keys(t).forEach(o=>{e[o]=t[o],s[o]=!0}),Object.keys(e).forEach(o=>{s[o]||delete e[o]})}}return e},yt=(r,t)=>{if(t==null)return null;if(typeof t=="object"){let e=r&&typeof r=="object"?r:Object.create(null);return Object.keys(t).forEach(s=>e[s]=t[s]),e}return t};function h(r){if(r){if(Array.isArray(r))return r.map(t=>h(t));if(typeof r=="object"){let t=Object.create(null);return Object.entries(r).forEach(([e,s])=>{t[e]=h(s)}),t}else return r}else return r}var u=(r,t)=>{let e=typeof r;if(e!==typeof t)return!1;if(e==="object"&&r&&t){let s=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(t);return s.length==o.length&&!s.some(i=>!u(r[i],t[i]))}return r===t},Y=r=>r===void 0?null:(r&&typeof r=="object"&&Object.getOwnPropertyNames(r).forEach(e=>{let s=r[e];s===void 0?delete r[e]:Y(s)}),r);var{floor:Z,pow:$t,random:F}=Math,xt=r=>Z((1+F()*9)*$t(10,r-1)),w=r=>Z(F()*r),D=r=>r[w(r.length)],St=r=>Boolean(F()<r);var A=a(a.flags.decorator,"Decorator","plum"),{values:Pt,entries:tt}=Object,I={},B={setOpaqueData(r,t){return I[r]=t,r},getOpaqueData(r){return I[r]},maybeDecorateModel(r,t){return r&&!Array.isArray(r)&&Pt(r).forEach(e=>{e&&typeof e=="object"&&(e.models?(A("applying decorator(s) to list:",e),this.maybeDecorateItem(e,t)):(r?.filter||r?.decorator||r?.collateBy)&&(A("scanning for lists in sub-model:",e),this.maybeDecorateModel(e,t)))}),r},maybeDecorateItem(r,t){let e=typeof r.models=="string"?this.getOpaqueData(r.models):r.models;e&&(e=vt(e,r.decorator,t),e=bt(e,r.filter,t.impl),e=wt(e,r),r.models=e)}},vt=(r,t,e)=>{t=e.impl[t]??t;let{inputs:s,state:o}=e.internal;if(t){let i=Object.freeze(h(s)),n=Object.freeze(h(o));r=r.map(c=>{c.privateData=c.privateData||{};let p=Object.freeze(h(c)),K=t(p,i,n);return c.privateData=K.privateData,{...K,...c}}),r.sort(Ot("sortKey")),A("decoration was performed")}return r},bt=(r,t,e)=>(t=e[t]??t,t&&r&&(r=r.filter(t)),r),wt=(r,t)=>(tt(t).forEach(([e,s])=>{if(s?.collateBy){let o=Ct(r,s.collateBy);r=jt(o,e,s.$template)}}),r),Ot=r=>(t,e)=>Et(String(t[r]).toLowerCase(),String(e[r]).toLowerCase()),Et=(r,t)=>r<t?-1:r>t?1:0,Ct=(r,t)=>{let e={};return r.forEach(s=>{let o=s[t];o&&(e[o]||(e[o]=[])).push(s)}),e},jt=(r,t,e)=>tt(r).map(([s,o])=>({key:s,[t]:{models:o,$template:e},single:o.length===1,...o?.[0]}));var{entries:et,keys:Ft}=Object,Dt=r=>a(a.flags.host,`Host (${r})`,D(["#5a189a","#51168b","#48137b","#6b2fa4","#7b46ae","#3f116c"])),f=class extends l{arc;id;lastOutput;lastPacket;lastRenderModel;log;meta;particle;constructor(t){super(),this.log=Dt(t),this.id=t}onevent(t){this.arc?.onevent(t),this.fire("eventlet",t)}installParticle(t,e){this.particle&&this.detachParticle(),t&&(this.particle=t,this.meta=e||this.meta)}get container(){return this.meta?.container||"root"}detach(){this.detachParticle(),this.arc=null}detachParticle(){this.particle&&(this.render({$clear:!0}),this.particle=null,this.meta=null)}async service(t){return t?.decorate?B.maybeDecorateModel(t.model,this.particle):this.arc?.service(this,t)}output(t,e){t&&(this.lastOutput=t,this.arc?.assignOutputs(this,t),this.fire("output",t)),this.template&&(B.maybeDecorateModel(e,this.particle),this.lastRenderModel={...e},this.render(e))}rerender(){this.lastRenderModel&&this.render(this.lastRenderModel)}render(t){let{id:e,container:s,template:o}=this,n={id:e,container:s,content:{model:t,template:o}};this.fire("render",n),this.arc?.render(n),this.lastPacket=n}set inputs(t){if(this.particle&&t){let e=this.particle.internal.inputs;this.dirtyCheck(t,e,this.lastOutput)?(this.particle.inputs=h({...this.meta?.staticInputs,...t}),this.fire("inputs-changed")):this.log("inputs are uninteresting, skipping update")}}dirtyCheck(t,e,s){let o=([i,n])=>s?.[i]&&!u(s[i],n)||!u(e?.[i],n);return!e||et(t).length!==this.lastInputsLength(e)||et(t).some(o)}lastInputsLength(t){return Ft(t).filter(e=>!this.meta?.staticInputs?.[e]&&e!=="eventlet").length}get config(){return this.particle?.config}get template(){return this.config?.template}invalidate(){this.particle?.invalidate()}handleEvent(t){return this.particle?.handleEvent(t)}};var{create:At,keys:Bt}=Object,{stringify:st,parse:rt}=JSON,z=class extends l{privateData;constructor(){super()}setPrivateData(t){this.privateData=t}set data(t){this.setPrivateData(t)}get data(){return this.privateData}toString(){return this.pretty}get isObject(){return this.data&&typeof this.data=="object"}get pojo(){return this.data}get json(){return st(this.data)}set json(t){let e=null;try{e=rt(t)}catch{}this.data=e}get pretty(){let t={},e=this.pojo;return Bt(e).sort().forEach(s=>t[s]=e[s]),st(t,null,"  ")}},L=class extends z{change(t){t(this),this.doChange()}doChange(){this.fire("change",this),this.onChange(this)}onChange(t){}set data(t){this.change(e=>e.setPrivateData(t))}get data(){return this.privateData}set(t,e){this.data||this.setPrivateData(At(null)),e!==void 0?this.change(s=>s.data[t]=e):this.delete(t)}delete(t){this.change(e=>delete e.data[t])}},M=class extends L{meta;constructor(t){super(),this.meta={...t}}toString(){return`${JSON.stringify(this.meta,null,"  ")}, ${this.pretty}`}get tags(){return this.meta.tags??(this.meta.tags=[])}is(...t){return t.every(e=>this.tags.includes(e))}isCollection(){return this.meta.type?.[0]==="["}shouldPersist(){return this.is("persisted")&&!this.is("volatile")}async doChange(){return this.persist(),super.doChange()}async persist(){}async restore(){}save(){return this.json}load(t,e){let s=e;try{t&&(s=rt(t))}catch{}s!==void 0&&(this.data=s)}},O=class extends M{};var d=(r,t,e)=>{r=r||2,t=t||2,e=e||"-";let s=Math.pow(10,t-1),o=Math.pow(10,t)-s,i=[];for(let n=0;n<r;n++)i.push(`${w(o-s)+s}`);return i.join(e)};var ot=a(a.flags.runtime,"runtime","#873600"),it={},k={},{keys:zt}=Object,T=class extends l{log;uid;nid;arcs;stores;peers;shares;endpoint;network;surfaces;persistor;prettyUid;constructor(t){t=t||"user",super(),this.arcs={},this.surfaces={},this.stores={},this.peers=new Set,this.shares=new Set,this.setUid(t),this.log=a(a.flags.runtime,`runtime:[${this.prettyUid}]`,"#873600")}setUid(t){this.uid=t,this.nid=`${t}:${d(1,2)}`,this.prettyUid=t.substring(0,t.indexOf("@")+1)||t}async bootstrapArc(t,e,s,o){let i=new b(t,e,s);return i.hostService=this.serviceFactory(o),await this.addArc(i),i}serviceFactory(t){return async(e,s)=>t.handle(this,e,s)}async bootstrapParticle(t,e,s){let o=new f(e);return await this.marshalParticle(o,s),await t.addHost(o),ot("bootstrapped particle",e),o}addSurface(t,e){this.surfaces[t]=e}getSurface(t){return this.surfaces[t]}addArc(t){let{id:e}=t;if(e&&!this.arcs[e])return this.arcs[e]=t;throw`arc has no id, or id "${e}" is already in use`}removeArc(t){let{id:e}=t;if(!e||!this.arcs[e])throw e?`id "${e}" is not in use`:"arc has no id";delete this.arcs[e]}async marshalParticle(t,e){let s=await this.createParticle(t,e.kind);return t.installParticle(s,e)}async installParticle(t,e,s){if(this.log("installParticle",s,e,t.id),s=s||d(),t.hosts[s]){let i=1;for(;t.hosts[`${s}-${i}`];i++);s=`${s}-${i}`}let o=new f(s);return await this.marshalParticle(o,e),await t.addHost(o),o}async addParticle(t,e,s,o){return this.log("addParticle",t.id,o,s,t.id),await this.marshalParticle(e,s),await t.addHost(e),e}idFromName(t,e){let s=t||d();if(e[s]){let o=1;for(;e[`${s}-${o}`];o++);s=`${s}-${o}`}return s}addStore(t,e){e.marshal&&e.marshal(this),e.persist=async()=>this.persistStore(t,e),e.restore=async()=>this.restoreStore(t,e);let s=`${this.nid}:${t}-changed`,o=this.storeChanged.bind(this,t);e.listen("change",o,s),this.stores[t]=e,this.maybeShareStore(t)}async persistStore(t,e){if(e.shouldPersist())return this.log(`persistStore "${t}"`),this.persistor?.persist?.(t,e)}async restoreStore(t,e){if(e.shouldPersist())return this.log(`restoreStore "${t}"`),this.persistor?.restore?.(t)}storeChanged(t,e){this.log("storeChanged",t),this.network?.invalidatePeers(t),this.onStoreChange(t,e),this.fire("store-changed",{storeId:t,store:e})}onStoreChange(t,e){}do(t,e){e(this.stores[t])}removeStore(t){this.do(t,e=>{e?.unlisten("change",`${this.nid}:${t}-changed`)}),delete this.stores[t]}maybeShareStore(t){this.do(t,e=>{e?.is("shared")&&this.shareStore(t)})}addPeer(t){this.peers.add(t),[...this.shares].forEach(e=>this.maybeShareStoreWithPeer(e,t))}shareStore(t){this.shares.add(t),[...this.peers].forEach(e=>this.maybeShareStoreWithPeer(t,e))}maybeShareStoreWithPeer(t,e){this.do(t,s=>{let o=this.uid.replace(/\./g,"_");(!s.is("private")||e.startsWith(o))&&this.shareStoreWithPeer(t,e)})}shareStoreWithPeer(t,e){this.network?.shareStore(t,e)}async createParticle(t,e){try{return(await this.marshalParticleFactory(e))?.(t)}catch(s){ot.error(`createParticle(${e}):`,s)}}async marshalParticleFactory(t){return it[t]??this.lateBindParticle(t)}lateBindParticle(t,e){let{particleOptions:s,particleIndustry:o,registerFactoryPromise:i}=T;if(o){let n=o(t,{...s,code:e});return i(t,n),n}else throw`no ParticleIndustry to create '${t}'`}static registerFactoryPromise(t,e){return it[t]=e}requireStore(t){let e=this.stores[t.name];return e||(e=this.createStore(t),this.addStore(t.name,e)),e}createStore(t){let e=zt(k).find(o=>t.tags?.includes?.(o)),s=k[String(e)]||O;return new s(t)}static registerStoreClass(t,e){k[t]=e}},m=T;P(m,"securityLockdown"),P(m,"particleIndustry"),P(m,"particleOptions");var N=a(a.flags.recipe,"flan","violet"),{entries:Lt,create:Mt}=Object,g=class{stores;particles;slots;meta;constructor(t){this.stores=[],this.particles=[],this.slots=[],this.meta=Mt(null),t&&this.parse(t)}parse(t){let e=this.normalize(t);return this.parseSlotSpec(e,"root",""),this}normalize(t){if(typeof t!="object")throw Error("recipe must be an Object");return t}parseSlotSpec(t,e,s){for(let o in t)switch(o){case"$meta":this.meta={...this.meta,...t.$meta};break;case"$stores":this.parseStoresNode(t.$stores);break;default:{let i=s?`${s}#${e}`:e;this.parseParticleSpec(i,o,t[o]);break}}}parseStoresNode(t){for(let e in t)this.parseStoreSpec(e,t[e])}parseStoreSpec(t,e){if(this.stores.find(o=>o.name===t)){N("duplicate store name");return}let s={name:t,type:e.$type,tags:e.$tags,value:e.$value};this.stores.push(s)}parseParticleSpec(t,e,s){if(!s.$kind)throw N.warn('parseParticleSpec: malformed spec has no "kind":',s),Error();if(this.particles.find(o=>o.id===e)){N("duplicate particle name");return}this.particles.push({id:e,container:t,spec:s}),s.$slots&&this.parseSlotsNode(s.$slots,e)}parseSlotsNode(t,e){Lt(t).forEach(([s,o])=>this.parseSlotSpec(o,s,e))}};function H(r,t){for(let e in t)if(r[e]!==t[e])return!1;return!0}var U=a(a.flags.recipe,"StoreCook","#99bb15"),{values:kt}=Object,Tt=(r,t)=>kt(r.stores).filter(e=>H(e?.meta,t)),Nt=(r,{name:t,type:e})=>Tt(r,{name:t,type:e})?.[0],E=class{static async execute(t,e,s){return this.forEachStore(this.realizeStore,t,e,s)}static async evacipate(t,e,s){return this.forEachStore(this.derealizeStore,t,e,s)}static async forEachStore(t,e,s,o){return Promise.all(o.map(i=>t.call(this,e,s,i)))}static async realizeStore(t,e,s){let o=this.constructMeta(t,e,s),i=o?.value,n=Nt(t,o);if(n)U(`realizeStore: mapped "${s.name}" to "${n.meta.name}"`);else if(n=t.createStore(o),U(`realizeStore: created "${o.name}"`),t.addStore(o.name,n),n.shouldPersist()){let c=await n.restore();i=c??i}i!==void 0&&(U("setting data to:",i),n.data=i),e.addStore(o.name,n)}static async derealizeStore(t,e,s){t.removeStore(s.$name),e.removeStore(s.$name)}static constructMeta(t,e,s){let o={...s,arcid:e.id,uid:t.uid};return{...o,owner:o.uid,shareid:`${o.name}:${o.arcid}:${o.uid}`}}};var Ht=a(a.flags.recipe,"ParticleCook","#5fa530"),y=class{static async execute(t,e,s){for(let o of s)await this.realizeParticle(t,e,o)}static async realizeParticle(t,e,s){Ht("realizedParticle:",s.id);let o=this.specToMeta(s.spec);return o.container||=s.container,t.bootstrapParticle(e,s.id,o)}static specToMeta(t){t.$bindings&&console.warn(`Particle '${t.$kind}' spec contains deprecated $bindings property (${JSON.stringify(t.$bindings)})`);let{$kind:e,$container:s,$staticInputs:o}=t,i=this.formatBindings(t.$inputs),n=this.formatBindings(t.$outputs);return{kind:e,staticInputs:o,inputs:i,outputs:n,container:s}}static formatBindings(t){return t?.map?.(e=>typeof e=="string"?{[e]:e}:e)}static async evacipate(t,e,s){return Promise.all(s.map(o=>this.derealizeParticle(t,e,o)))}static async derealizeParticle(t,e,s){e.removeHost(s.id)}};var $=a(a.flags.recipe,"Chef","#087f23"),at=class{static async execute(t,e,s){if(s instanceof Promise){$.error("`arc` must be an Arc, not a Promise. Make sure `boostrapArc` is awaited.");return}$("|-->...| executing recipe: ",t.$meta??"");let o=new g(t);await E.execute(e,s,o.stores),await y.execute(e,s,o.particles),s.meta={...s.meta,...o.meta},$("|...-->| recipe complete: ",t.$meta??"")}static async evacipate(t,e,s){$("|-->...| evacipating recipe: ",t.$meta);let o=new g(t);await y.evacipate(e,s,o.particles),$("|...-->| recipe evacipated: ",t.$meta)}static async executeAll(t,e,s){for(let o of t)await this.execute(o,e,s)}static async evacipateAll(t,e,s){return Promise.all(t?.map(o=>this.evacipate(o,e,s)))}};var pt={};_(pt,{fetchParticleCode:()=>ct,maybeFetchParticleCode:()=>lt,pathForKind:()=>ht,requireParticleBaseCode:()=>S,requireParticleImplCode:()=>qt});var nt=class{map;constructor(r){this.map={},this.setRoot(r)}add(r){Object.assign(this.map,r||{})}resolve(r){let t;do r=this._resolve(t=r);while(t!==r);return r}_resolve(r){let t=r.split("/"),e=t.shift();return[this.map[e]||e,...t].join("/")}setRoot(r){r.length&&r[r.length-1]==="/"&&(r=r.slice(0,-1)),this.add({$root:r,$arcs:r})}getAbsoluteHereUrl(r,t){let e=r.url.split("/").slice(0,-(t??1)).join("/");if(globalThis?.document){let s=document.URL;s[s.length-1]!=="/"&&(s=`${s.split("/").slice(0,-1).join("/")}/`);let o=new URL(e,s).href;return o[o.length-1]==="/"&&(o=o.slice(0,-1)),o}else return e}},Ut=import.meta.url.split("/").slice(0,-3).join("/"),x=globalThis.Paths=new nt(Ut);x.add(globalThis.config?.paths);var R=a(a.flags.code,"code","gold","#333"),Rt="$arcs/core/Particle.js",qt=async(r,t)=>{let e=t?.code||await ct(r);return e.slice(e.indexOf("({"))},ct=async r=>{if(r)return await lt(r);R.error("fetchParticleCode: empty 'kind'")},lt=async r=>{let t=ht(r);try{let e=await fetch(t);if(e.ok)return await e.text();throw""}catch{R.error(`could not locate implementation for particle "${r}" [${t}]`)}},ht=r=>r?(!"$./".includes(r[0])&&!r.includes("://")&&(r=`$library/${r}`),r?.split("/").pop().includes(".")||(r=`${r}.js`),x.resolve(r)):"404",S=async r=>{if(!S.source){let t=x.resolve(r||Rt);R("particle base code path: ",t);let s=await(await fetch(t)).text()+`
//# sourceURL=`+t+`
`;S.source=s.replace(/export /g,"")}return S.source};S.source=null;var q={};_(q,{PathMapper:()=>nt,Paths:()=>x,arand:()=>D,async:()=>_t,asyncTask:()=>Jt,computeAgeString:()=>Kt,debounce:()=>Wt,deepCopy:()=>h,deepEqual:()=>u,deepUndefinedToNull:()=>Y,irand:()=>w,key:()=>xt,logFactory:()=>a,makeId:()=>d,matches:()=>H,prob:()=>St,shallowMerge:()=>yt,shallowUpdate:()=>gt});var Kt=(r,t)=>{let e=Math.round((t-r)/1e3);if(isNaN(e))return"\u2022";let s="";return e<60?(e>1&&(s="s"),`${e} second${s} ago`):(e=Math.round(e/60),e<60?(e>1&&(s="s"),`${e} minute${s} ago`):(e=Math.round(e/60),e<24?(e>1&&(s="s"),`${e} hour${s} ago`):(e=Math.round(e/24),e<30?(e>1&&(s="s"),`${e} day${s} ago`):(e=Math.round(e/30),e<12?(e>1&&(s="s"),`${e} month${s} ago`):(e=Math.round(e/12),e>1&&(s="s"),`${e} year${s} ago`)))))};var Wt=(r,t,e)=>{if(r&&clearTimeout(r),t&&e)return setTimeout(t,e)},_t=r=>async(...t)=>{await Promise.resolve(),r(...t)},Jt=(r,t)=>{setTimeout(r,t??0)};var{logFactory:Ze,Paths:Vt}=q;var Gt=import.meta.url.split("/").slice(0,-1).join("/");Vt.setRoot(Gt);export{b as Arc,at as Chef,z as DataStore,B as Decorator,l as EventEmitter,f as Host,g as Parser,y as ParticleCook,Vt as Paths,m as Runtime,O as Store,E as StoreCook,pt as code,Ze as logFactory,q as utils};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by a BSD-style
 * license that can be found in the LICENSE file or at
 * https://developers.google.com/open-source/licenses/bsd
 */
//# sourceMappingURL=arcs.min.js.map
